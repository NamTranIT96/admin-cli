(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["344dda44"],{"1fc3":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._m(0),i("div",{staticClass:"q-pa-md"},[i("q-btn",{staticClass:"q-mr-md",attrs:{icon:"add",size:"md",label:"Add","no-caps":"",color:"primary"},on:{click:function(t){return e.openDialogNewEmailTemplate()}}}),i("q-btn",{staticClass:"q-mr-md",attrs:{disable:0==e.selected.length,color:"secondary",size:"md",icon:"edit","no-caps":"",label:"Edit"},on:{click:function(t){return e.triggerOpenModalEditEmailTemplate()}}}),i("q-btn",{attrs:{disable:0==e.selected.length,icon:"delete",size:"md",label:"Delete","no-caps":"",color:"negative"},on:{click:function(t){return e.deleteEmailTemplate()}}})],1),i("div",{staticClass:"list-email-template q-pa-md"},[i("q-table",{staticClass:"table-list-email-template",attrs:{data:e.list_email_template,columns:e.columns,selection:"single",selected:e.selected,"row-key":"stt",pagination:e.pagination},on:{"update:selected":function(t){e.selected=t},"update:pagination":function(t){e.pagination=t}}})],1),i("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale"},model:{value:e.trigger_dialog_new_email_template,callback:function(t){e.trigger_dialog_new_email_template=t},expression:"trigger_dialog_new_email_template"}},[i("q-card",{staticClass:"bg-primary text-white",staticStyle:{width:"80vw","max-width":"80vw"}},[e.is_edit_email_template?i("q-card-actions",{staticClass:"section-header-detail-booking q-pa-md"},[e._v("Edit email template")]):i("q-card-actions",{staticClass:"section-header-detail-booking q-pa-md"},[e._v("Add new email template")]),i("q-card-actions",{staticClass:"bg-white text-black q-pa-md"},[i("div",{staticClass:"w-100"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-8"},[i("div",[e._v("Title of template")]),i("div",[i("el-input",{model:{value:e.obj_temp.title,callback:function(t){e.$set(e.obj_temp,"title",t)},expression:"obj_temp.title"}})],1),i("div",{staticClass:"q-mt-md"},[e._v("Content of template")]),i("div",[i("v-editor-app",{attrs:{config:e.config},model:{value:e.obj_temp.content,callback:function(t){e.$set(e.obj_temp,"content",t)},expression:"obj_temp.content"}})],1)]),i("div",{staticClass:"col-4 q-pl-lg"},[i("div",[e._v("Danh sách biến")]),i("div",{staticStyle:{"overflow-x":"auto",border:"1px solid #cecece",height:"70vh"}},[i("div",{staticClass:"list-param-wrapper q-mt-md q-pl-md q-pr-md",staticStyle:{width:"400px"}},e._l(e.list_param,(function(t,a){return i("div",{key:a,staticClass:"item-param q-mt-sm q-mb-sm"},[i("span",[i("q-btn",{staticClass:"q-mr-md",attrs:{size:"xs",color:"primary",icon:"file_copy",round:"",outline:""},on:{click:function(i){return e.copyParam(t)}}})],1),i("b",[i("span",{attrs:{id:"param-"+t.id}},[e._v(e._s(t.name))])]),e._v("\n                    : "+e._s(t.desc)+"\n                  ")])})),0)])])]),i("div",[i("el-input",{attrs:{id:"input-copy-temp"},model:{value:e.temp_string_copy,callback:function(t){e.temp_string_copy=t},expression:"temp_string_copy"}})],1)])]),i("q-separator"),i("q-card-actions",{staticClass:"bg-white text-teal q-pa-md",attrs:{align:"right"}},[i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{label:"cancel",color:"white","text-color":"black",icon:"cancel","no-caps":""}}),e.is_edit_email_template?i("q-btn",{attrs:{label:"Save template","no-caps":"",color:"primary",icon:"add"},on:{click:function(t){return e.editTemplateAPI()}}}):i("q-btn",{attrs:{label:"Add new template","no-caps":"",color:"primary",icon:"add"},on:{click:function(t){return e.addNewTemplateAPI()}}})],1)])],1)],1)],1)},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-pa-md q-gutter-sm"},[i("div",{staticClass:"title-and-controller flex"},[i("div",{staticClass:"text-title"},[e._v("List Email Template")])])])}],o=(i("8e6e"),i("8a81"),i("ac6a"),i("cadf"),i("06db"),i("456d"),i("7f7f"),i("c47a")),l=i.n(o),r=i("2f62"),s=i("67ba");function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(i,!0).forEach((function(t){l()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var m={name:"email-tempalte-manage-page",filters:{},computed:d({},Object(r["b"])({current_user_logged_info:"login/getUserLoggedInfo",current_branch_id:"login/getCurrentBranchId"})),data:function(){return{obj_temp:{title:"",content:""},list_param:s["a"],config:{uploadImgUrl:"https://familala.net/api/Media/photoOnlyUrl",uploadParams:{token:"123456798",name:"avatar"},uploadHeaders:{authorization:""},menus:["source","|","bold","underline","italic","strikethrough","eraser","forecolor","bgcolor","|","quote","fontfamily","fontsize","head","unorderlist","orderlist","alignleft","aligncenter","alignright","|","link","unlink","table","emotion","|","img","video","location","insertcode","|","undo","redo","fullscreen"],printLog:!0,lang:{bold:"Bold",underline:"Underline",italic:"Italic",forecolor:"Color",bgcolor:"Backcolor",strikethrough:"Strikethrough",eraser:"Eraser",source:"Codeview",quote:"Quote",fontfamily:"Font family",fontsize:"Font size",head:"Head",orderlist:"Ordered list",unorderlist:"Unordered list",alignleft:"Align left",aligncenter:"Align center",alignright:"Align right",link:"Insert link",linkTarget:"Open mode",text:"Text",submit:"Submit",cancel:"Cancel",unlink:"Unlink",table:"Table",emotion:"Emotions",img:"Image",uploadImg:"Upload",linkImg:"Link",video:"Video",width:"width",height:"height",location:"Location",loading:"Loading",searchlocation:"search",dynamicMap:"Dynamic",clearLocation:"Clear",langDynamicOneLocation:"Only one location in dynamic map",insertcode:"Insert Code",undo:"Undo",redo:"Redo",fullscreen:"Full screen",openLink:"open link"}},trigger_dialog_new_email_template:!1,is_edit_email_template:!1,selected:[],pagination:{sortBy:"stt",descending:!1,page:1,rowsPerPage:10},columns:[{style:"width: 50px",name:"no",label:"No",unique:"no",align:"left",field:"stt"},{style:"width: 300px",name:"title",align:"left",label:"Template name",unique:"title",field:"title"},{name:"content",align:"left",label:"Content",unique:"content",field:"content"}],list_email_template:[],temp_string_copy:""}},methods:{deleteEmailTemplateSelected:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i={id:e.selected[0].id};e.$axios.delete("/api/EmailTemplates/Delete",{data:i,headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Delete template Successfully"}),e.getListEmailTemplate()})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))},deleteEmailTemplate:function(){var e=this;this.$swal({title:"Are you sure?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then((function(t){t.value&&e.deleteEmailTemplateSelected()}))},triggerOpenModalEditEmailTemplate:function(){var e=this;e.obj_temp=JSON.parse(JSON.stringify(e.selected[0])),e.trigger_dialog_new_email_template=!0,e.is_edit_email_template=!0},editTemplateAPI:function(){var e=this,t={id:e.obj_temp.id,title:e.obj_temp.title,content:e.obj_temp.content},i=localStorage.getItem("user_token_fisheye_client");this.$axios.put("/api/EmailTemplates/Update",JSON.stringify(t),{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(t){e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Update template Successfully"}),e.getListEmailTemplate(),e.trigger_dialog_new_email_template=!1})).catch((function(t){e.trigger_dialog_new_email_template=!1,t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))},addNewTemplateAPI:function(){var e=this,t={branchId:parseInt(this.current_branch_id),title:e.obj_temp.title,content:e.obj_temp.content},i=localStorage.getItem("user_token_fisheye_client");this.$axios.post("/api/EmailTemplates/Add",JSON.stringify(t),{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(t){e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Add template Successfully"}),e.getListEmailTemplate(),e.trigger_dialog_new_email_template=!1})).catch((function(t){e.trigger_dialog_new_email_template=!1,t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))},copyParam:function(e){var t=this;t.temp_string_copy=e.name,setTimeout((function(){var e=document.querySelector("#input-copy-temp");e.select();try{document.execCommand("copy");t.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Copy success"})}catch(i){}}),200)},openDialogNewEmailTemplate:function(){var e=this;e.trigger_dialog_new_email_template=!0,e.is_edit_email_template=!1,this.obj_temp_new_template={title:"",content:""}},getListEmailTemplate:function(){var e=this,t=localStorage.getItem("branch_id_fisheye_client"),i=localStorage.getItem("user_token_fisheye_client");this.$axios.get("/api/EmailTemplates/Get?branchId="+t,{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(t){t.data.emailTemplates.forEach((function(e,t){e.stt=t+1})),e.list_email_template=t.data.emailTemplates,e.selected=[],e.$forceUpdate()})).catch((function(e){}))}},mounted:function(){this.getListEmailTemplate()},components:{}},p=m,u=i("2877"),g=i("fe09"),_=Object(u["a"])(p,a,n,!1,null,"0eb083c7",null);t["default"]=_.exports;_.options.components=Object.assign({QBtn:g["c"],QTable:g["I"],QDialog:g["k"],QCard:g["e"],QCardActions:g["f"],QSeparator:g["C"]},_.options.components||{}),_.options.directives=Object.assign({ClosePopup:g["a"]},_.options.directives||{})},"67ba":function(e,t,i){"use strict";var a=[{id:1,name:"{{product_name}}",desc:"Name of product"},{id:2,name:"{{time_start}}",desc:"Time start"},{id:3,name:"{{travel_date}}",desc:"Travel date"},{id:4,name:"{{number_traveler}}",desc:"Number of traveler"},{id:5,name:"{{total_price_booking}}",desc:"Total price booking"},{id:6,name:"{{traveler_first_name}}",desc:"Traveler first name (Lead)"},{id:7,name:"{{traveler_last_name}}",desc:"Traveler last name (Lead)"},{id:8,name:"{{traveler_phone}}",desc:"Traveler phone (Lead)"},{id:9,name:"{{traveler_email}}",desc:"Traveler email (Lead)"},{id:10,name:"{{other_traveler}}",desc:"Other traveler"},{id:11,name:"{{pickup_location}}",desc:"Pickup location"},{id:12,name:"{{nationality}}",desc:"Nationality"},{id:13,name:"{{other_request}}",desc:"Other request"},{id:14,name:"{{booking_number}}",desc:"Booking number"},{id:15,name:"{{tour_type}}",desc:"Tour type"},{id:16,name:"{{hotel_name}}",desc:"Hotel name"},{id:17,name:"{{hotel_address}}",desc:"Hotel address"},{id:18,name:"{{pickup_time_from}}",desc:"Pickup time from"},{id:19,name:"{{pickup_time_to}}",desc:"Pickup time to"},{id:20,name:"{{adult_number}}",desc:"Adult number traveller"},{id:21,name:"{{child_number}}",desc:"Child number traveller"},{id:22,name:"{{infant_number}}",desc:"Infant number traveller"},{id:23,name:"{{youth_number}}",desc:"Youth number traveller"},{id:24,name:"{{senior_number}}",desc:"Senior number traveller"},{id:25,name:"{{deposit_requested}}",desc:"Deposit requested"},{id:26,name:"{{food_notes}}",desc:"Food notes"},{id:27,name:"{{adult_price}}",desc:"Adult price of traveller"},{id:28,name:"{{child_price}}",desc:"Child price of traveller"},{id:29,name:"{{infant_price}}",desc:"Infant price of traveller"},{id:30,name:"{{youth_price}}",desc:"Youth price of traveller"},{id:31,name:"{{senior_price}}",desc:"Senior price of traveller"}];t["a"]=a}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["af0799f0"],{"604c":function(e,t,i){},"637b":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"regional-wrapper q-pa-lg"},[i("div",{staticClass:"text-center q-mb-md",staticStyle:{"font-size":"24px","font-weight":"bold"}},[e._v("Email setting")]),i("q-separator"),e.is_have_email_info?i("div",{staticClass:"content-wrapper"},[i("div",{staticClass:"q-mt-md flex items-center"},[i("div",{staticClass:"w-50-per text-right q-pr-md"},[e._v("Sender email address")]),i("div",{staticClass:"w-50-per"},[i("el-input",{model:{value:e.info_email_setting.userName,callback:function(t){e.$set(e.info_email_setting,"userName",t)},expression:"info_email_setting.userName"}})],1)]),i("div",{staticClass:"q-mt-md flex items-center"},[i("div",{staticClass:"w-50-per text-right q-pr-md"},[e._v("App password of email")]),i("div",{staticClass:"w-50-per"},[i("el-input",{model:{value:e.info_email_setting.password,callback:function(t){e.$set(e.info_email_setting,"password",t)},expression:"info_email_setting.password"}})],1)]),i("div",{staticClass:"q-mt-md flex items-center"},[i("div",{staticClass:"w-50-per text-right q-pr-md"},[e._v("SMTP server")]),i("div",{staticClass:"w-50-per"},[i("el-input",{model:{value:e.info_email_setting.smtpServer,callback:function(t){e.$set(e.info_email_setting,"smtpServer",t)},expression:"info_email_setting.smtpServer"}})],1)]),i("div",{staticClass:"q-mt-md flex items-center"},[i("div",{staticClass:"w-50-per text-right q-pr-md"},[e._v("Other recipients emails")]),i("div",{staticClass:"w-50-per"},[i("el-input",{model:{value:e.info_email_setting.senderAddress,callback:function(t){e.$set(e.info_email_setting,"senderAddress",t)},expression:"info_email_setting.senderAddress"}})],1)]),i("div",{staticClass:"q-mt-md flex items-center"},[i("div",{staticClass:"w-50-per text-right q-pr-md"},[e._v("Port")]),i("div",{staticClass:"w-50-per"},[i("el-input",{model:{value:e.info_email_setting.port,callback:function(t){e.$set(e.info_email_setting,"port",t)},expression:"info_email_setting.port"}})],1)]),i("div",{staticClass:"q-mt-md flex items-center"},[i("div",{staticClass:"w-50-per text-right q-pr-md"},[e._v("Enable SSL")]),i("div",{staticClass:"w-50-per"},[i("el-switch",{model:{value:e.info_email_setting.enableSsl,callback:function(t){e.$set(e.info_email_setting,"enableSsl",t)},expression:"info_email_setting.enableSsl"}})],1)]),i("div",{staticClass:"button-wrapper text-center q-mt-lg"},[i("q-btn",{attrs:{color:"primary",icon:"check",label:"Save",size:"md"},on:{click:function(t){return e.saveEmailSetting()}}})],1)]):i("div",{staticClass:"content-wrapper text-center q-mt-lg"},[i("q-btn",{staticClass:"q-mt-lg",attrs:{label:"Custom Setup",size:"md",color:"primary",icon:"settings"},on:{click:function(t){return e.openTriggerSettingEmail()}}})],1)],1)},s=[],o=(i("8e6e"),i("8a81"),i("8993")),r=i.n(o),a=(i("28a5"),i("ac6a"),i("cadf"),i("06db"),i("456d"),i("c47a")),l=i.n(a),c=i("2f62");function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(i,!0).forEach((function(t){l()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var g={name:"regional-manage",filters:{},computed:d({},Object(c["b"])({current_user_logged_info:"login/getUserLoggedInfo",current_branch_id:"login/getCurrentBranchId"}),{is_have_email_info:function(){return Object.keys(this.info_email_setting).length>0}}),watch:{current_branch_id:function(e){!isNaN(e)&&parseInt(e)>0&&this.getInfoEmailSetting()}},data:function(){return{info_email_setting:{}}},methods:{doOpenTabAddEmailSetting:function(){this.info_email_setting={branchId:null,userName:"",password:"",smtpServer:"",senderAddress:"",port:0,enableSsl:!0}},openTriggerSettingEmail:function(){var e=this;this.$swal({title:"Are you sure?",text:"Will you setting custom email info to send your customer ?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, i will!",cancelButtonText:"No"}).then((function(t){t.value&&e.doOpenTabAddEmailSetting()}))},validateEmail:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())},checkValidateSaveEmailSetting:function(){var e=this,t=e.info_email_setting.userName,i=t.split(",");if(0==i.length)return e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:"Sender email address is required"}),!1;var n=!0;return i.forEach((function(t){e.validateEmail(t)||(n=!1)})),!!n||(e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:"Sender email format is not correct"}),!1)},saveEmailSetting:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");if(e.checkValidateSaveEmailSetting())if(e.info_email_setting.branchId){var i={branchId:e.current_branch_id,userName:e.info_email_setting.userName,password:e.info_email_setting.password,smtpServer:e.info_email_setting.smtpServer,senderAddress:e.info_email_setting.senderAddress,port:e.info_email_setting.port,enableSsl:e.info_email_setting.enableSsl};this.$axios.put("/api/Settings/UpdateEmailSetting",JSON.stringify(i),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Update successfully!"})})).catch((function(t){if(t.response.data){if("string"==typeof t.response.data)""!=t.response.data?e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:t.response.data}):t.response.statusText&&e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:t.response.statusText});else if("object"==r()(t.response.data)){var i=Object.keys(t.response.data);i.length>0&&e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:t.response.data[i[0]]})}}else e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:"Have error"})}))}else e.addEmailSettingForBranch()},addEmailSettingForBranch:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i={branchId:e.current_branch_id,userName:e.info_email_setting.userName,password:e.info_email_setting.password,smtpServer:e.info_email_setting.smtpServer,senderAddress:e.info_email_setting.senderAddress,port:e.info_email_setting.port,enableSsl:e.info_email_setting.enableSsl};this.$axios.post("/api/Settings/AddEmailSetting",JSON.stringify(i),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Add successfully!"}),window.location.reload()})).catch((function(t){if(t.response.data){if("string"==typeof t.response.data)""!=t.response.data?e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:t.response.data}):t.response.statusText&&e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:t.response.statusText});else if("object"==r()(t.response.data)){var i=Object.keys(t.response.data);i.length>0&&e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:t.response.data[i[0]]})}}else e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:"Have error"})}))},getInfoEmailSetting:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i=this.current_branch_id;-1!=i&&this.$axios.get("/api/Settings/GetEmailSetting/"+i,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.info_email_setting=t.data})).catch((function(t){if(t.response.data){if("string"==typeof t.response.data)""!=t.response.data?e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:t.response.data}):t.response.statusText&&e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:t.response.statusText});else if("object"==r()(t.response.data)){var i=Object.keys(t.response.data);i.length>0&&e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:t.response.data[i[0]]})}}else e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:"Have error"})}))}},mounted:function(){this.getInfoEmailSetting()}},m=g,f=(i("c4c4"),i("2877")),u=i("fe09"),_=Object(f["a"])(m,n,s,!1,null,null,null);t["default"]=_.exports;_.options.components=Object.assign({QSeparator:u["C"],QBtn:u["c"]},_.options.components||{})},c4c4:function(e,t,i){"use strict";var n=i("604c"),s=i.n(n);s.a}}]);
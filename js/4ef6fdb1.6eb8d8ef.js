(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["4ef6fdb1"],{1211:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading_booking,expression:"loading_booking"}]},[e.isCheckout?o("div",{staticClass:"checkout-wrapper q-pl-lg q-pr-lg bg-white"},[o("div",{staticClass:"q-mt-md"},[o("q-btn",{attrs:{label:"Back",icon:"keyboard_arrow_left",size:"md",color:"primary",dense:"",flat:""},on:{click:function(t){return e.backToProductPage()}}})],1),o("q-separator",{staticClass:"q-mt-md q-mb-md"}),o("div",{staticClass:"row q-mb-lg"},[o("div",{staticClass:"col-8 q-pr-md"},[o("div",{staticClass:"secure-checkout",staticStyle:{"font-size":"28px","font-weight":"500"}},[e._v("Secure Checkout")]),o("div",{staticClass:"sub-secure-checkout",staticStyle:{"font-size":"16px",color:"#55575b"}},[e._v("Checkout securely — it takes only a few minutes\n        ")]),o("div",{staticClass:"info-checkout-wrapper q-mt-lg q-pa-md",staticStyle:{border:"1px solid #e5e5e5"}},[o("div",{staticClass:"info-product-sumary flex"},[o("div",{staticClass:"image-prod w-30-per"},[o("img",{staticClass:"w-100",staticStyle:{height:"120px","object-fit":"cover"},attrs:{src:e.backend_url+e.info_product_detail.photos[0]}})]),o("div",{staticClass:"info-prod w-70-per q-pl-lg"},[o("div",{staticClass:"travel-date",staticStyle:{"font-size":"14px",color:"#55575b"}},[e._v(e._s(e._f("formatDateSystem")(e.convertDate(e.date_picker_traveller)))+"\n              ")]),o("div",{staticClass:"prod-name",staticStyle:{"font-size":"20px",color:"#2A2D32"}},[e._v(e._s(e.info_product_detail.title)+"\n              ")])])]),o("q-separator",{staticClass:"q-mt-md q-mb-md"}),o("div",{staticClass:"traveler-detail"},[o("div",{staticClass:"text-info-detail"},[o("div",{staticStyle:{"font-size":"20px",color:"#2A2D32"}},[e._v("Traveler Details")]),o("div",{staticStyle:{"font-size":"16px",color:"#55575b"}},[e._v("Information we need to confirm your tour or activity\n              ")]),o("div",{staticClass:"q-mt-lg",staticStyle:{"font-size":"16px",color:"#2A2D32"}},[e._v("Lead Traveler (Adult)")]),o("div",{staticClass:"row q-pl-md"},[o("div",{staticClass:"col-6 q-pr-md q-mt-sm"},[o("div",[e._v("First name *")]),o("q-input",{class:{"input-error":e.$v.first_name_lead.$error},attrs:{placeholder:"Input first name",dense:!0,outlined:""},model:{value:e.$v.first_name_lead.$model,callback:function(t){e.$set(e.$v.first_name_lead,"$model",t)},expression:"$v.first_name_lead.$model"}}),e.$v.first_name_lead.$error?o("div",{staticClass:"error-content"},[e._v("First name is required\n                  ")]):e._e()],1),o("div",{staticClass:"col-6 q-mt-sm"},[o("div",[e._v("Last name *")]),o("q-input",{class:{"input-error":e.$v.last_name_lead.$error},attrs:{placeholder:"Input last name",dense:!0,outlined:""},model:{value:e.$v.last_name_lead.$model,callback:function(t){e.$set(e.$v.last_name_lead,"$model",t)},expression:"$v.last_name_lead.$model"}}),e.$v.last_name_lead.$error?o("div",{staticClass:"error-content"},[e._v("Last name is required")]):e._e()],1),o("div",{staticClass:"col-6 q-pr-md q-mt-md"},[o("div",[e._v("Phone *")]),o("q-input",{class:{"input-error":e.$v.phone_lead.$error},attrs:{placeholder:"Input lead phone",dense:!0,outlined:""},model:{value:e.$v.phone_lead.$model,callback:function(t){e.$set(e.$v.phone_lead,"$model",t)},expression:"$v.phone_lead.$model"}}),e.$v.phone_lead.$error?o("div",{staticClass:"error-content"},[e._v("Phone is required")]):e._e()],1),o("div",{staticClass:"col-12 q-mt-md"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-6 q-pr-md"},[o("div",[e._v("Email *")]),o("q-input",{class:{"input-error":e.$v.email_lead.$error},attrs:{placeholder:"Input email",dense:!0,outlined:""},model:{value:e.$v.email_lead.$model,callback:function(t){e.$set(e.$v.email_lead,"$model",t)},expression:"$v.email_lead.$model"}}),e.$v.email_lead.$error?o("div",{staticClass:"error-content"},[e._v("Email is required")]):e._e()],1),o("div",{staticClass:"col-6"},[o("div",[e._v("Confirm Email *")]),o("q-input",{class:{"input-error":e.$v.re_email_lead.$error},attrs:{placeholder:"Input confirm email",dense:!0,outlined:""},model:{value:e.$v.re_email_lead.$model,callback:function(t){e.$set(e.$v.re_email_lead,"$model",t)},expression:"$v.re_email_lead.$model"}}),e.$v.re_email_lead.$error?o("div",{staticClass:"error-content"},[e._v("Confirm email is wrong\n                      ")]):e._e()],1)])])]),o("div",{staticClass:"q-mt-lg",staticStyle:{"font-size":"16px",color:"#2A2D32"}},[e._v("Other Traveler")]),o("div",{staticClass:"row q-pl-md"},[o("el-select",{staticClass:"w-100 input-add-other-traveler",attrs:{multiple:"",filterable:"","allow-create":"",size:"medium","default-first-option":"",placeholder:"Input and enter to add","popper-class":"select-group-new-booking display-none"},model:{value:e.otherTravelerNames,callback:function(t){e.otherTravelerNames=t},expression:"otherTravelerNames"}},e._l(e.options,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),o("div",{staticClass:"q-mt-lg",staticStyle:{"font-size":"16px",color:"#2A2D32"}},[e._v("Pickup Location*")]),o("div",{staticClass:"row q-pl-md"},[o("div",{staticClass:"col-12"},[o("q-input",{class:{"input-error":e.$v.pickup_location.$error},attrs:{placeholder:"Input pickup location",dense:!0,outlined:""},model:{value:e.$v.pickup_location.$model,callback:function(t){e.$set(e.$v.pickup_location,"$model",t)},expression:"$v.pickup_location.$model"}}),e.$v.pickup_location.$error?o("div",{staticClass:"error-content"},[e._v("Pickup Location is required\n                  ")]):e._e()],1)]),o("div",{staticClass:"q-mt-lg",staticStyle:{"font-size":"16px",color:"#2A2D32"}},[e._v("Nationality")]),o("div",{staticClass:"row q-pl-md"},[o("el-select",{attrs:{size:"medium",placeholder:"Choose nationality","popper-class":"select-group-new-booking"},model:{value:e.nationality,callback:function(t){e.nationality=t},expression:"nationality"}},e._l(e.options_country_world,(function(e){return o("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),o("div",{staticClass:"q-mt-lg",staticStyle:{"font-size":"16px",color:"#2A2D32"}},[e._v("Food note")]),o("div",{staticClass:"row q-pl-md"},[o("q-input",{staticClass:"w-100",attrs:{outlined:"",placeholder:"Food note",type:"textarea"},model:{value:e.food_note,callback:function(t){e.food_note=t},expression:"food_note"}})],1),o("div",{staticClass:"q-mt-lg",staticStyle:{"font-size":"16px",color:"#2A2D32"}},[e._v("Other request")]),o("div",{staticClass:"row q-pl-md"},[o("q-input",{staticClass:"w-100",attrs:{outlined:"",placeholder:"Vegetarian or diet foods requirement",type:"textarea"},model:{value:e.other_request,callback:function(t){e.other_request=t},expression:"other_request"}})],1)]),o("div",{staticClass:"agree-tem-wrapper q-mt-lg",staticStyle:{"background-color":"antiquewhite"}},[o("q-checkbox",{attrs:{color:"primary"},model:{value:e.checkbox_agree_terms,callback:function(t){e.checkbox_agree_terms=t},expression:"checkbox_agree_terms"}}),e._v("\n              I’ve read and accept\n              "),o("a",{attrs:{href:"https://fisheyetravel.com/terms-and-conditions/",target:"_blank"}},[e._v("the terms & conditions *")])],1)])],1)]),o("div",{staticClass:"col-4 q-pl-md",staticStyle:{"border-left":"1px solid #d5d5d5","padding-top":"90px"}},[o("div",{staticClass:"review-order-detail-wrapper q-pa-md",staticStyle:{border:"1px solid #e5e5e5","background-color":"#f2f2f2"}},[o("div",{staticStyle:{color:"#2a2d32","font-size":"20px","font-weight":"500"}},[e._v("Review Order Details")]),o("div",{staticClass:"row q-mt-lg"},[o("div",{staticClass:"col-9"},[o("div",{staticStyle:{color:"#2a2d32","font-size":"16px","font-weight":"500"}},[e._v(e._s(e.info_product_detail.title)+"\n              ")]),e.info_product_detail.transportationModes?o("div",{staticStyle:{color:"#2a2d32","font-size":"16px","font-weight":"500","text-transform":"capitalize"}},[e._v(e._s(e.info_product_detail.transportationModes.join(", "))+"\n              ")]):e._e(),o("div",{staticClass:"q-mt-md",staticStyle:{"font-size":"14px",color:"#55575b"}},[o("div",[e._v(e._s(e._f("formatDateSystem")(e.convertDate(e.date_picker_traveller))))]),o("div",{staticClass:"q-mt-sm"},[e._v(e._s(e.order_choosed_to_book.name_option_price))]),o("div",{staticClass:"q-mt-sm"},[e._v("Time start: "+e._s(e._f("getTimeToGo")(e.order_choosed_to_book.time_goto)))]),o("div",{staticClass:"q-mt-sm"},[e._v(e._s(e._f("getDescTraveler")(e.order_choosed_to_book.pricing_tier)))])])]),o("div",{staticClass:"col-3"},[o("div",{staticClass:"text-right",staticStyle:{"font-size":"16px","font-weight":"500"}},[e._v("$"+e._s(e.order_choosed_to_book.total_price.toFixed(2))+"\n              ")])])]),o("q-separator",{staticClass:"q-mt-lg q-mb-lg"}),0!=e.couponValue?o("div",{staticClass:"row"},[o("div",{staticClass:"col-7",staticStyle:{"font-size":"17px","font-weight":"500",color:"#2a2d32"}},[e._v("Discount:")]),0==e.couponType?o("div",{staticClass:"col-5 text-right",staticStyle:{"font-size":"17px","font-weight":"500",color:"#2a2d32"}},[e._v("- $"+e._s(e.couponValue.toFixed(2))+"\n            ")]):o("div",{staticClass:"col-5 text-right",staticStyle:{"font-size":"17px","font-weight":"500",color:"#2a2d32"}},[e._v("- "+e._s(e.couponValue)+" %\n            ")])]):e._e(),o("div",{staticClass:"row"},[o("div",{staticClass:"col-7",staticStyle:{"font-size":"20px","font-weight":"500",color:"#2a2d32"}},[e._v("Total:")]),o("div",{staticClass:"col-5 text-right",staticStyle:{"font-size":"20px","font-weight":"500",color:"#2a2d32"}},[e._v("$"+e._s(e.getTotalPriceOrder())+"\n            ")])]),o("div",{staticClass:"q-mt-md"},[e.is_click_promo_code?o("div",[o("div",[e._v("Promo Code")]),o("div",{staticClass:"flex"},[o("div",{staticClass:"w-80-per"},[o("q-input",{attrs:{square:"",disable:0!=e.couponValue,dense:"",outlined:"",color:"secondary"},model:{value:e.promo_code,callback:function(t){e.promo_code=t},expression:"promo_code"}})],1),o("div",{staticClass:"w-20-per"},[o("q-btn",{staticClass:"btn-apply-promo",attrs:{disable:0!=e.couponValue,label:"Apply",color:"secondary"},on:{click:function(t){return e.applyPromoteCode()}}})],1)])]):o("div",{staticClass:"sub-text-3-custom",on:{click:function(t){e.is_click_promo_code=!e.is_click_promo_code}}},[e._v("Enter Promo Code\n            ")])]),o("div",{staticClass:"q-mt-lg"},[o("q-btn",{staticClass:"w-100",attrs:{label:"Book now",size:"lg",color:"negative"},on:{click:function(t){return e.finalBooking()}}})],1)],1)])])],1):o("div",{staticClass:"tour-detail-wrapper",staticStyle:{"max-width":"1200px",margin:"0px auto"}},[o("div",{staticClass:"image-review-checkout-wrapper"},[o("div",{staticClass:"row q-pa-lg"},[o("div",{staticClass:"col-4"},[o("div",{staticClass:"q-pa-lg",staticStyle:{border:"1px solid #edf0f4","background-color":"#f5f5f5",height:"100%"}},[o("div",{staticClass:"calendar-choosed q-mt-md",staticStyle:{position:"relative"}},[o("q-date",{staticClass:"w-100",attrs:{mask:"DD-MM-YYYY","first-day-of-week":"1",options:e.optionsFn},model:{value:e.date_picker_traveller,callback:function(t){e.date_picker_traveller=t},expression:"date_picker_traveller"}})],1),o("div",{staticClass:"q-mt-md"},[o("div",{staticStyle:{position:"relative"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.input_option_traveller,expression:"input_option_traveller"}],staticClass:"input-option-traveler w-100",attrs:{readonly:""},domProps:{value:e.input_option_traveller},on:{click:function(t){return e.openPopupChooseUser()},input:function(t){t.target.composing||(e.input_option_traveller=t.target.value)}}}),o("div",{staticStyle:{position:"absolute",top:"7px",left:"10px"}},[o("q-icon",{attrs:{name:"far fa-user",size:"sm",color:"primary"}})],1),o("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hidePopUp,expression:"hidePopUp"}],staticClass:"popup-choose-user-wrapper w-100",class:{"popup-show":e.show_popup_travel}},[e.info_product_detail.ageGroup?o("div",[e._v("\n                    You can select up to\n                    "+e._s(e.info_product_detail.ageGroup.maximumTravelers)+"\n                    travelers in total.\n                  ")]):e._e(),e._l(e.list_tier_age_active,(function(t,i){return o("div",{key:i,staticClass:"row q-mt-sm"},[o("div",{staticClass:"col-6"},[o("div",{staticStyle:{"font-size":"15px"}},[e._v("\n                        "+e._s(t.name)+" (age "+e._s(t.minAge)+" -\n                        "+e._s(t.maxAge)+")\n                      ")]),o("div",{staticStyle:{"font-size":"11px"}},[e._v("\n                        Minimum: "+e._s(t.min_booking)+" Maximum:\n                        "+e._s(t.max_booking)+"\n                      ")])]),o("div",{staticClass:"col-6 text-right"},[o("el-input-number",{staticClass:"input-number-custom",attrs:{size:"mini"},model:{value:t.value_user_choosed,callback:function(o){e.$set(t,"value_user_choosed",o)},expression:"item.value_user_choosed"}})],1)])})),o("div",{staticClass:"button-apply-wrapper q-mt-lg"},[o("q-btn",{staticClass:"w-100",attrs:{label:"Apply",color:"primary",size:"md"},on:{click:function(t){return e.updateTravelerBooking()}}})],1)],2)])]),o("div",{staticClass:"q-mt-lg"},[o("q-btn",{staticClass:"w-100",attrs:{size:"md",label:e.label_search,color:"primary"},on:{click:function(t){return e.generateListOrderSuitable()}}})],1),e._m(0)])]),o("div",{staticClass:"col-8",staticStyle:{border:"1px solid #cecece"}},[e.list_order_suitable.length>0?o("div",{staticClass:"list-order-suitable-wrapper"},[o("div",{staticClass:"for-date q-pa-lg"},[o("span",{staticClass:"text-1"},[e._v("Select an option for  ")]),o("span",{staticClass:"text-2"},[e._v(e._s(e._f("formatDateSystem")(e.convertDate(e.date_picker_traveller))))])]),e._l(e.list_order_suitable,(function(t,i){return o("div",{key:i,staticClass:"item-order-suitable q-pa-lg",class:{active:t.active}},[o("div",{staticClass:"common-and-checkbox-wrapper flex items-center"},[o("div",{staticClass:"checkbox-wrapper q-mr-lg"},[o("q-checkbox",{attrs:{dense:"",color:"primary"},nativeOn:{click:function(o){return e.changeCheckbox(t)}},model:{value:t.active,callback:function(o){e.$set(t,"active",o)},expression:"item.active"}})],1),o("div",{staticClass:"common-info-wrapper"},[o("div",{staticClass:"name-price-option"},[e._v(e._s(t.name_option_price))]),o("div",{staticClass:"total-price-order"},[o("span",{staticClass:"text-3"},[e._v("$"+e._s(t.total_price.toFixed(2))+"  ")]),o("span",{staticClass:"text-4"},[e._v("("+e._s(e._f("getPriceAndDesc")(t.pricing_tier))+")")])]),e._m(1,!0),t.active?o("div",{staticClass:"list-time-start flex q-mt-md"},e._l(t.time_goto,(function(i,a){return o("div",{key:a,staticClass:"item-time-start q-mr-md q-pa-sm text-center",class:{active:i.active},on:{click:function(o){return e.chooseTimeStartOrder(t,i)}}},[e._v(e._s(i.name)+"\n                    ")])})),0):e._e()])]),t.active?o("q-separator",{staticClass:"q-mt-lg q-mb-lg"}):e._e(),t.active?o("div",{staticClass:"order-button-wrapper flex items-center justify-end"},[o("div",{staticClass:"detail-price-button w-30-per text-right",domProps:{innerHTML:e._s(e.getPriceAndDesc2(t.pricing_tier))}}),o("div",{staticClass:"total-price text-center q-pl-md q-pr-md"},[e._v("$"+e._s(t.total_price.toFixed(2))+"\n                ")]),o("div",{staticClass:"button-order w-40-per"},[o("q-btn",{staticClass:"w-100",attrs:{label:"Book now",color:"primary",size:"md","no-caps":""},on:{click:function(o){return e.choosedOrder(t)}}})],1)]):e._e()],1)}))],2):o("div",{staticClass:"flex items-center justify-center",staticStyle:{height:"40%","font-size":"20px",color:"#2a2d32","font-weight":"400"}},[o("q-icon",{staticClass:"q-mr-sm",attrs:{name:"arrow_back",color:"primary",size:"md"}}),e._v("\n            Please choose date and number traveler in the left\n          ")],1)])])])])])},a=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"text-center",staticStyle:{"margin-top":"140px"}},[o("div",{staticStyle:{"font-size":"17px","font-weight":"bold"}},[e._v("Free Cancellation")]),o("div",[e._v("up to 24 hours in advance")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"plus-info q-mt-sm"},[o("div",[e._v("Small-Group size join-in minimum of 2 persons and maximum 16 persons in the tour. This\n                      radically different than being herded onto dozens of others and help improve the overall\n                      experience for everyone\n                    ")]),o("div",[e._v("Offered In: English")])])}],r=(o("28a5"),o("6b54"),o("06db"),o("7f7f"),o("c5f6"),o("9c58")),s=o("fa33"),n=o("e67d"),c=o.n(n),l=o("391a"),d=o("b5ae"),p={name:"tour-detail-page",props:{id:{type:Number,default:null}},validations:{first_name_lead:{required:d["required"]},last_name_lead:{required:d["required"]},phone_lead:{required:d["required"]},email_lead:{required:d["required"],email:d["email"]},re_email_lead:{sameAsPassword:Object(d["sameAs"])("email_lead")},pickup_location:{required:d["required"]}},watch:{id:function(e,t){this.product_id=this.id,this.getInfoDetailProduct()}},filters:{getTimeToGo:function(e){var t=e.filter((function(e){return 1==e.active}));return t?t[0].name:""},getDescTraveler:function(e){var t=[];return e.forEach((function(e){if(e.value_user_choosed>0){var o="";o+=e.value_user_choosed+" "+e.name,t.push(o)}})),t.join(", ")},getPriceAndDesc:function(e){var t=[];return e.forEach((function(e){if(e.value_user_choosed>0){var o="";o+="$"+e.pricing.toFixed(2)+" × "+e.value_user_choosed+" "+e.name,t.push(o)}})),t.join(", ")}},computed:{label_search:function(){return 0==this.count_search?"Check Availability":"Update Search"}},data:function(){return{options_country_world:l["a"],activeNames:["1"],date_picker_traveller:null,input_option_traveller:"Number of travelers",backend_url:r["a"],product_id:null,info_product_detail:{},items_image:[],currentId:null,lowest_price_product:99999999,list_tier_age_active:[],show_popup_travel:!1,activetest:!1,list_order_suitable:[],isCheckout:!1,is_click_promo_code:!1,order_choosed_to_book:null,first_name_lead:"",last_name_lead:"",phone_lead:"",email_lead:"",re_email_lead:"",pickup_location:"",nationality:"",other_request:"",promo_code:"",food_note:"",checkbox_agree_terms:!1,otherTravelerNames:[],options:[],couponValue:0,couponType:0,count_search:0,loading_booking:!1}},methods:{optionsFn:function(e){var t=new Date,o=t.getDate(),i=t.getMonth()+1,a=t.getFullYear(),r=a+"/"+this.getTwoDigit(i)+"/"+this.getTwoDigit(o);return e>=r},finalBooking:function(){if(this.checkValidate()){var e=this,t="",o=e.order_choosed_to_book.time_goto.filter((function(e){return 1==e.active}));o.length>0&&(t=o[0].name);var i=0,a=e.convertDate(e.date_picker_traveller),r=a.toISOString(),s=new Date(r);s.setHours(7);var n={productId:e.info_product_detail.id,travelDate:s,startTime:t,endTime:"",leadTravelerFirstName:e.first_name_lead,leadTravelerLastName:e.last_name_lead,leadTravelerLastPhone:e.phone_lead,leadTravelerLastEmail:e.email_lead,otherTravelerNames:e.otherTravelerNames,nationality:e.nationality,hotelName:e.pickup_location,otherNotes:e.other_request,couponCode:e.promo_code,foodNotes:e.food_note,priceOptionName:e.order_choosed_to_book.name_option_price};e.order_choosed_to_book.pricing_tier.forEach((function(e){if(i+=e.value_user_choosed,e.value_user_choosed>0)switch(e.name){case"Senior":n.seniorNumber=e.value_user_choosed,n.seniorPrice=e.pricing;break;case"Adult":n.adultNumber=e.value_user_choosed,n.adultPrice=e.pricing;break;case"Child":n.childNumber=e.value_user_choosed,n.childPrice=e.pricing;break;case"Youth":n.youthNumber=e.value_user_choosed,n.youthPrice=e.pricing;break;case"Infant":n.infantNumber=e.value_user_choosed,n.infantPrice=e.pricing;break;default:break}})),n.guestQuantity=i;var c=localStorage.getItem("user_token_fisheye_client");this.loading_booking=!0,this.$axios.post("/api/Orders/CreateForGuest",JSON.stringify(n),{headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"}}).then((function(t){e.$swal("Success!","Order success. Your order will be confirm with system. Thank you!","success").then((function(t){e.loading_booking=!1,e.isCheckout=!1,e.$set(e,"order_choosed_to_book",{}),e.backToTop()}))})).catch((function(t){e.loading_booking=!1,t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))}},applyPromoteCode:function(){var e=this,t=e.info_product_detail.branchId;if(""!=e.promo_code){var o=localStorage.getItem("user_token_fisheye_client");e.$axios.get("/api/Coupons/CheckValidCoupon?BranchId="+t+"&Code="+e.promo_code,{headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"}}).then((function(t){var o=t.data;if(o.status)if(-1!=o.productIdsApplied.indexOf(e.info_product_detail.id.toString())){var i=new Date(o.startTime),a=new Date(o.endTime),r=new Date;i.setHours(1),a.setHours(23),r>=i&&r<=a?(e.couponValue=o.value,e.couponType=o.type,e.order_choosed_to_book.coupon_value=o.value,e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Coupon apply Successfully"})):(e.item_booking.couponCode="",e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Coupon is invalid"}))}else e.item_booking.couponCode="",e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Coupon is invalid"});else e.item_booking.couponCode="",e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Coupon is invalid"})})).catch((function(t){e.promo_code="",e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Coupon is invalid"})}))}},getTotalPriceOrder:function(){var e=this;if(0==this.couponType){var t=this.order_choosed_to_book.total_price,o=this.couponValue,i=t-o;return i<0?0:e.$options.filters.currency(i,e.option_filter)}var a=this.order_choosed_to_book.total_price,r=(this.couponValue,a-a*(this.couponValue/100));return r<0?0:e.$options.filters.currency(r,e.option_filter)},checkValidate:function(){var e=this;return this.$v.first_name_lead.$touch(),this.$v.last_name_lead.$touch(),this.$v.phone_lead.$touch(),this.$v.email_lead.$touch(),this.$v.re_email_lead.$touch(),this.$v.pickup_location.$touch(),e.$v.first_name_lead.$error||e.$v.last_name_lead.$error||e.$v.phone_lead.$error||e.$v.email_lead.$error||e.$v.re_email_lead.$error||e.$v.pickup_location.$error?(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Please view error in your form!"}),!1):!!this.checkbox_agree_terms||(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Please read term and check the checkbox agree term and condition to continue!"}),!1)},hidePopUp:function(){this.activetest&&(this.show_popup_travel=!1,this.activetest=!1,this.updateTravelerBooking())},backToProductPage:function(){this.isCheckout=!1},chooseTimeStartOrder:function(e,t){e.time_goto.forEach((function(e){e.active=!1})),t.active=!0},choosedOrder:function(e){var t=this;t.$set(this,"order_choosed_to_book",e),t.isCheckout=!0,t.backToTop()},backToTop:function(){window.scrollTo(0,0)},getPriceAndDesc2:function(e){var t=[];e.forEach((function(e){if(e.value_user_choosed>0){var o="";o+="$"+e.pricing.toFixed(2)+" × "+e.value_user_choosed+" "+e.name,t.push(o)}}));var o=t.join("</br>"),i="("+o+")";return i},changeCheckbox:function(e){this.list_order_suitable.forEach((function(e){e.active=!1})),e.active=!0,this.$forceUpdate()},getListDayOfWeekPriceToId:function(e){var t=[];return e.forEach((function(e){switch(e){case"Sun":t.push(0);break;case"Mon":t.push(1);break;case"Tue":t.push(2);break;case"Wed":t.push(3);break;case"Thu":t.push(4);break;case"Fri":t.push(5);break;case"Sat":t.push(6);break;default:break}})),t},convertDate:function(e){var t=e.split("-"),o=parseInt(t[2]),i=parseInt(t[1])-1,a=parseInt(t[0]),r=new Date(o,i,a);return r},generateListOrderSuitable:function(){var e=this;this.count_search+=1;var t=[],o=e.convertDate(e.date_picker_traveller);e.info_product_detail.priceOptions.forEach((function(i){i.prices.forEach((function(a){var r=e.getListDayOfWeekPriceToId(a.daysApply),s=new Date(a.startTime),n=null;if(n=null!=a.endTime?new Date(a.endTime):new Date(3456,1,1),o>=s&&o<=n){var c=o.getDay();if(-1!=r.indexOf(c)){var l=JSON.parse(JSON.stringify(e.list_tier_age_active));l.forEach((function(e){e.pricing=0,a.pricings.forEach((function(t){e.name==t.name&&t.tierPricings.forEach((function(t){t.min<=e.value_user_choosed&&t.max>=e.value_user_choosed&&(e.pricing=t.value)}))}))}));var d=0;l.forEach((function(e){d+=e.pricing*e.value_user_choosed}));var p=[];a.timeApply.forEach((function(e){var t={name:e,active:!1};p.push(t)})),p.length>0&&(p[0].active=!0);var u={name_option_price:i.name,pricing_tier:l,time_goto:p,total_price:d,active:!1};t.push(u)}}}))})),t.length>0&&(t[0].active=!0),0==t.length&&e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"No suitable booking found"}),e.list_order_suitable=t},updateTravelerBooking:function(){var e=this,t=[];e.list_tier_age_active.forEach((function(e){if(0!=e.value_user_choosed){var o=e.value_user_choosed+" "+e.name;t.push(o)}})),t.length>0&&(e.input_option_traveller=t.join(",  ")),e.hidePopUp()},handleChange:function(e){console.log(e)},openPopupChooseUser:function(){var e=this;e.show_popup_travel=!0,e.$forceUpdate(),setTimeout((function(){e.activetest=!0}),300)},routerToAddress:function(e){this.$router.push(e)},initInfoImage:function(){var e=this,t=[];e.info_product_detail.photos.forEach((function(o){var i={src:e.backend_url+o,thumbnail:e.backend_url+o};t.push(i)})),e.items_image=t},getListTierAgeActive:function(){var e=this,t=[],o=JSON.parse(JSON.stringify(e.info_product_detail.ageGroup.ageTiers));o.forEach((function(e){e.isActive&&(e.value_user_choosed=0,t.push(e))})),e.info_product_detail.priceOptions.forEach((function(e){e.prices.forEach((function(e){e.pricings.forEach((function(e){t.forEach((function(t){t.min_booking||(t.min_booking=0),t.max_booking||(t.max_booking=0),t.name==e.name&&e.tierPricings.forEach((function(e){e.min<t.min_booking&&(t.min_booking=e.min),e.max>t.max_booking&&(t.max_booking=e.max)}))}))}))}))})),e.list_tier_age_active=t},initCommonInfo:function(){var e=this;e.initInfoImage(),e.getListTierAgeActive(),e.info_product_detail.priceOptions.forEach((function(t){t.prices.forEach((function(t){t.pricings.forEach((function(t){1==t.isActive&&"Adult"==t.name&&t.tierPricings.forEach((function(t){t.value<e.lowest_price_product&&(e.lowest_price_product=t.value)}))}))}))}))},getInfoDetailProduct:function(){var e=this,t=this.product_id;if(t){var o=localStorage.getItem("user_token_fisheye_client");this.$axios.get("/api/Products/GetProductDetail/"+t,{headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"}}).then((function(t){e.info_product_detail=t.data,e.initCommonInfo()})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))}},getTwoDigit:function(e){return e<10?"0"+e.toString():e},getDefaultDatePicker:function(){var e=new Date,t=e.getFullYear(),o=e.getMonth()+1,i=e.getDate();this.date_picker_traveller=this.getTwoDigit(i)+"-"+this.getTwoDigit(o)+"-"+this.getTwoDigit(t)}},mounted:function(){if(this.getDefaultDatePicker(),this.id)this.product_id=this.id,this.getInfoDetailProduct();else{var e=this.$route.params.id;e&&(this.product_id=e,this.getInfoDetailProduct())}},components:{Datepicker:s["a"]},directives:{ClickOutside:c.a}},u=p,_=(o("e009"),o("2877")),v=o("fe09"),m=Object(_["a"])(u,i,a,!1,null,null,null);t["default"]=m.exports;m.options.components=Object.assign({QDate:v["j"],QIcon:v["n"],QBtn:v["c"],QCheckbox:v["h"],QSeparator:v["C"],QInput:v["p"]},m.options.components||{})},3594:function(e,t,o){},e009:function(e,t,o){"use strict";var i=o("3594"),a=o.n(i);a.a}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d20f538"],{b2c5:function(o,e,t){"use strict";t.r(e);var r=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"flex flex-center h-100vh login-wrapper"},[o.forget_pass?t("div",[o.is_form_1?t("div",{directives:[{name:"loading",rawName:"v-loading",value:o.loading_reset_email,expression:"loading_reset_email"}],staticClass:"form-1 form-login q-pa-lg q-card text-center"},[t("p",{staticClass:"text-login-system"},[o._v("FORGET PASSWORD")]),t("q-input",{attrs:{color:"primary","bottom-slots":"",label:"Your email",dense:o.dense,"error-message":o.error_message,error:!o.isValid},scopedSlots:o._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"email"}})]},proxy:!0},{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(e){return o.clearText()}}})]},proxy:!0},{key:"hint",fn:function(){return[o._v("Input email to get password")]},proxy:!0}],null,!1,2761192281),model:{value:o.email_forget_pass,callback:function(e){o.email_forget_pass=e},expression:"email_forget_pass"}}),t("q-btn",{attrs:{color:"primary q-mt-lg","icon-right":"send",label:"Get password"},on:{click:function(e){return o.getPassword()}}}),t("p",{staticClass:"forget-password-text",on:{click:function(e){return o.backtoLogin()}}},[o._v("back to login")])],1):o._e()]):t("div",{directives:[{name:"loading",rawName:"v-loading",value:o.loading_login,expression:"loading_login"}],staticClass:"form-login-mobile"},[t("div",{staticClass:"form-2 form-login q-pa-lg q-card text-center"},[t("p",{staticClass:"text-login-system"},[o._v("LOGIN ADMIN CLIENT")]),t("q-input",{attrs:{color:"primary","bottom-slots":"",label:"Your email",dense:o.dense,"error-message":o.error_message,error:!o.isValid},scopedSlots:o._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"email"}})]},proxy:!0},{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(e){return o.clearText()}}})]},proxy:!0},{key:"hint",fn:function(){return[o._v("Type your email to login")]},proxy:!0}],null,!1,3998181932),model:{value:o.email,callback:function(e){o.email=e},expression:"email"}}),t("q-input",{attrs:{type:"password",color:"primary","bottom-slots":"",label:"Your password",dense:o.dense,"error-message":o.error_message_password,error:!o.isValidPassword},scopedSlots:o._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"vpn_key"}})]},proxy:!0},{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(e){return o.clearPasword()}}})]},proxy:!0},{key:"hint",fn:function(){return[o._v("Type your password to login")]},proxy:!0}],null,!1,1323624130),model:{value:o.password,callback:function(e){o.password=e},expression:"password"}}),t("q-btn",{attrs:{color:"primary q-mt-lg","icon-right":"send",label:"Login"},on:{click:function(e){return o.login()}}}),t("p",{staticClass:"forget-password-text",on:{click:function(e){return o.forgetPass()}}},[o._v("forget password?")])],1)])])},s=[],n=(t("6b54"),t("06db"),t("a481"),t("28a5"),{name:"PageIndex",data:function(){return{is_form_1:!0,email:"",email_forget_pass:"",password:"",dense:!1,error_message:"",error_message_password:"",isValid:!0,isValidPassword:!0,forget_pass:!1,loading_login:!1,loading_reset_email:!1}},methods:{backtoLogin:function(){this.forget_pass=!1},checkValidateForgetPass:function(){var o=this;return!!this.validateEmail(this.email_forget_pass)||(o.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Format email incorrect!"}),!1)},getPassword:function(){var o=this;this.checkValidateForgetPass()&&(o.loading_reset_email=!0,o.$axios.post("/api/Accounts/ForgotPassword/"+o.email_forget_pass,{}).then((function(e){o.loading_reset_email=!1,o.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"We have send password to your email!"}),o.forget_pass=!1})).catch((function(e){o.loading_reset_email=!1,302==e.response.status?(o.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Your account has been updated by your admin, try to relogin or contact your admin!"}),o.loading_login=!1):303==e.response.status?(o.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Your account has expired!"}),o.loading_login=!1):(o.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Username or password wrong!"}),o.loading_login=!1)})))},forgetPass:function(){this.forget_pass=!0},validateEmail:function(o){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(String(o).toLowerCase())},nextToInputPassword:function(){this.validateEmail(this.email)?this.is_form_1=!1:(this.isValid=!1,this.error_message="Please type correct email type")},clearText:function(){this.email="",this.isValid=!0,this.error_message=""},clearPasword:function(){this.password="",this.isValidPassword=!0,this.error_message=""},parseJwt:function(o){var e=o.split(".")[1],t=e.replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(t).split("").map((function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(r)},setInfoNotification:function(){var o=localStorage.getItem("user_token_fisheye_client"),e=localStorage.getItem("token_notify_fish_eyes"),t={registrationId:e};this.$axios.post("/api/Accounts/ConfigNotifcation",JSON.stringify(t),{headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"}}).then((function(o){console.log("config notification success")})).catch((function(o){console.log("config notification error"+o)}))},login:function(){var o=this;o.loading_login=!0,o.$axios.post("/api/Accounts/Login",{userName:o.email,password:o.password}).then((function(e){o.$store.commit("login/setUserLoggedInfo",e.data),o.loading_login=!1,localStorage.setItem("user_token_fisheye_client",e.data.token),o.setInfoNotification(),o.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Signed in successfully!"});var t=o.parseJwt(e.data.token);-1!=t.role.indexOf("ClientAdmin")?o.$router.push("/choose-branch"):-1!=t.role.indexOf("ClientMod")?t.branchId&&(localStorage.setItem("branch_id_fisheye_client",t.branchId),o.$router.push("/")):-1!=t.role.indexOf("ClientStaff")?t.branchId&&(-1!=t.scope.indexOf("isSales")?o.$router.push("/"):-1!=t.scope.indexOf("isOperator")?o.$router.push("/tour-list"):-1!=t.scope.indexOf("isOperatorCanGroupBk")?o.$router.push("/tour-list"):-1!=t.scope.indexOf("isTourGuide")?o.$router.push("/tour-list"):o.$router.push("/"),localStorage.setItem("branch_id_fisheye_client",t.branchId)):o.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Username or password wrong!"})})).catch((function(e){302==e.response.status?(o.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Your account has been updated by your admin, try to relogin or contact your admin!"}),o.loading_login=!1):303==e.response.status?(o.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Your account has expired!"}),o.loading_login=!1):(o.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Username or password wrong!"}),o.loading_login=!1)}))}}}),i=n,a=t("2877"),l=t("fe09"),c=Object(a["a"])(i,r,s,!1,null,null,null);e["default"]=c.exports;c.options.components=Object.assign({QCard:l["e"],QInput:l["p"],QIcon:l["n"],QBtn:l["c"]},c.options.components||{})}}]);
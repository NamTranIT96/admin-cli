(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["1adfc45e"],{"7a8f":function(e,t,o){"use strict";o.r(t);var i,r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-layout",{staticClass:"app-wrapper",attrs:{view:"hHh lpR fFf"}},[o("q-header",{staticClass:"bg-primary text-white view-on-desk-top",attrs:{elevated:""}},[o("div",{staticClass:"row justify-between flex"},[o("q-toolbar",{staticClass:"flex tool-bar-custom-system",staticStyle:{width:"100%"},attrs:{color:"primary"}},[o("div",{staticClass:"flex logo-wrapper"},[o("div",{staticClass:"flex"},[o("div",{staticClass:"flex items-center q-mr-lg logo-margin"},[e.current_branch_info.logo?o("q-card-media",{staticClass:"thumbnail"},[o("img",{key:"avatar",staticStyle:{height:"30px",width:"auto"},attrs:{src:e.backend_url+e.current_branch_info.logo},on:{click:function(t){return e.routerToHome()}}})]):o("q-card-media",{staticClass:"thumbnail"},[o("img",{key:"avatar",staticStyle:{height:"30px",width:"auto"},attrs:{src:"statics/images/logo.png"},on:{click:function(t){return e.routerToHome()}}})])],1)])]),o("div",{staticClass:"menu-wrapper flex justify-between"},[o("div",{staticClass:"flex main-menu h-100-per"},[e.is_read_booking?o("q-btn-dropdown",{staticClass:"btn-custom-border active",attrs:{flat:"","content-class":"test-class",color:"primary","text-color":"white","menu-anchor":"top left","menu-self":"bottom left","dropdown-icon":"keyboard_arrow_down"},scopedSlots:e._u([{key:"label",fn:function(){return[o("div",{staticClass:"row items-center no-wrap badge-operation"},[o("div",[e._v("Sales")]),e.pending_booking_count>0&&e.pending_booking_count<10?o("div",{staticClass:"badge-content"},[e._v(e._s(e.pending_booking_count))]):e._e(),e.pending_booking_count>=10?o("div",{staticClass:"badge-content"},[e._v("9+")]):e._e()])]},proxy:!0}],null,!1,1534538196)},[o("q-list",{staticClass:"list-menu-header"},[o("q-separator",{attrs:{color:"white"}}),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.routerToAddress("/")}}},[o("q-item-section",[o("q-item-label",[e._v("Bookings list")])],1)],1),o("q-separator",{attrs:{color:"white"}}),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.routerToAddress("/unprocess-booking")}}},[o("q-item-section",[o("q-item-label",{staticStyle:{position:"relative"}},[e._v("\n                      Unprocessed bookings\n                      "),e.pending_booking_count>0&&e.pending_booking_count<10?o("q-badge",{staticClass:"badge-circle",attrs:{color:"red",floating:"",transparent:""}},[e._v(e._s(e.pending_booking_count))]):e._e(),e.pending_booking_count>=10?o("q-badge",{staticClass:"badge-circle",attrs:{color:"red",floating:"",transparent:""}},[e._v("9+")]):e._e()],1)],1)],1),e.is_read_availability?o("q-separator",{attrs:{color:"white"}}):e._e(),e.is_read_availability?o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.routerToAddress("/availability")}}},[o("q-item-section",[o("q-item-label",[e._v("Product availability")])],1)],1):e._e()],1)],1):e._e(),e.is_read_tour?o("q-btn-dropdown",{staticClass:"btn-custom-border",attrs:{flat:"",color:"primary","text-color":"white","menu-anchor":"top left","menu-self":"bottom left","dropdown-icon":"keyboard_arrow_down"},scopedSlots:e._u([{key:"label",fn:function(){return[o("div",{staticClass:"row items-center no-wrap badge-operation"},[o("div",[e._v("Operations")]),e.today_tour_count>0&&e.today_tour_count<10?o("div",{staticClass:"badge-content"},[e._v(e._s(e.today_tour_count))]):e._e(),e.today_tour_count>=10?o("div",{staticClass:"badge-content"},[e._v("9+")]):e._e()])]},proxy:!0}],null,!1,1677832378)},[o("q-list",{staticClass:"list-menu-header"},[o("q-separator",{attrs:{color:"white"}}),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.routerToAddress("/tour-list")}}},[o("q-item-section",[o("q-item-label",[e._v("Tour List")])],1)],1),o("q-separator",{attrs:{color:"white"}}),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.routerToAddress("/today-tour")}}},[o("q-item-section",[o("q-item-label",{staticStyle:{position:"relative"}},[e._v("\n                      Today tour\n                      "),e.today_tour_count>0&&e.today_tour_count<10?o("q-badge",{staticClass:"badge-circle",attrs:{color:"red",floating:"",transparent:""}},[e._v(e._s(e.today_tour_count))]):e._e(),e.today_tour_count>=10?o("q-badge",{staticClass:"badge-circle",attrs:{color:"red",floating:"",transparent:""}},[e._v("9+")]):e._e()],1)],1)],1),o("q-separator",{attrs:{color:"white"}}),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.routerToAddress("/schedule")}}},[o("q-item-section",[o("q-item-label",[e._v("Guide schedule")])],1)],1)],1)],1):e._e(),e.is_read_report?o("q-btn",{staticClass:"btn-custom-border",attrs:{flat:"",color:"primary","text-color":"white",label:"Report"},on:{click:function(t){return e.routerToAddress("/report")}}}):e._e(),e.is_role_admin||e.is_role_mod?o("q-btn",{staticClass:"btn-custom-border",attrs:{flat:"",color:"primary","text-color":"white",label:"Activities"},on:{click:function(t){return e.routerToAddress("/activities")}}}):e._e(),e.is_read_master_list?o("q-btn",{staticClass:"btn-custom-border",attrs:{flat:"",color:"primary","text-color":"white",label:"Master List"},on:{click:function(t){return e.routerToAddress("/master-list")}}}):e._e(),e.is_role_admin||e.is_role_mod||e.is_role_tour_guide||e.is_role_operation||e.is_role_operation_can_group_bk?o("q-btn",{staticClass:"btn-custom-border",attrs:{flat:"",color:"primary","text-color":"white",label:"Notification"},on:{click:function(t){return e.routerToAddress("/notification")}}}):e._e(),o("q-btn-dropdown",{staticClass:"btn-custom-border",attrs:{flat:"",color:"primary","text-color":"white",label:"More","menu-anchor":"top left","menu-self":"bottom left","dropdown-icon":"keyboard_arrow_down"}},[o("q-list",{staticClass:"list-menu-header",staticStyle:{"min-width":"200px"},attrs:{dense:""}},[e.is_read_staff?o("q-separator",{attrs:{color:"white"}}):e._e(),e.is_read_staff?o("q-item",{attrs:{clickable:""},on:{click:function(t){return e.routerToAddress("/user-list")}}},[o("q-item-section",[e._v("User Management")])],1):e._e(),e.is_read_perm?o("q-separator",{attrs:{color:"white"}}):e._e(),e.is_read_perm?o("q-item",{attrs:{clickable:""},on:{click:function(t){return e.routerToAddress("/permission-list")}}},[o("q-item-section",[e._v("Permission Management")])],1):e._e(),e.is_read_expense_field?o("q-separator",{attrs:{color:"white"}}):e._e(),e.is_read_expense_field?o("q-item",{attrs:{clickable:""},on:{click:function(t){return e.routerToAddress("/manage-fields")}}},[o("q-item-section",[e._v("Manage Expense Fields")])],1):e._e(),e.is_role_admin?o("q-separator",{attrs:{color:"white"}}):e._e(),e.is_role_admin?o("q-item",{attrs:{clickable:""},on:{click:function(t){return e.routerToAddress("/plan-billing")}}},[o("q-item-section",[e._v("Plan and Billing")])],1):e._e(),e.is_role_admin||e.is_role_mod?o("q-separator",{attrs:{color:"white"}}):e._e(),e.is_role_admin||e.is_role_mod?o("q-item",{attrs:{clickable:""},on:{click:function(t){return e.routerToAddress("/online-sale")}}},[o("q-item-section",[e._v("Sale Online Tool")])],1):e._e(),e.is_read_product?o("q-separator",{attrs:{color:"white"}}):e._e(),e.is_read_product?o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.routerToAddress("/products")}}},[o("q-item-section",[e._v("Product")])],1):e._e(),o("q-separator",{attrs:{color:"white"}}),o("q-item",{attrs:{clickable:""}},[o("q-item-section",[e._v("Setting")]),o("q-item-section",{attrs:{side:""}},[o("q-icon",{attrs:{name:"keyboard_arrow_right",color:"white"}})],1),o("q-menu",{attrs:{"auto-close":"",anchor:"top right",self:"top left"}},[o("q-list",{staticClass:"list-menu-header"},[o("q-separator",{attrs:{color:"white"}}),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:""},on:{click:function(t){return e.routerToAddress("/setting/account")}}},[o("q-item-section",[e._v("Account")])],1),o("q-separator",{attrs:{color:"white"}}),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:""},on:{click:function(t){return e.routerToAddress("/branch-list")}}},[o("q-item-section",[e._v("Branch Infomation")])],1),e.is_read_regional?o("q-separator",{attrs:{color:"white"}}):e._e(),e.is_read_regional?o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:""},on:{click:function(t){return e.routerToAddress("/setting/regional")}}},[o("q-item-section",[e._v("Regional")])],1):e._e(),e.is_role_tour_guide?e._e():o("q-separator",{attrs:{color:"white"}}),e.is_role_tour_guide?e._e():o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:""},on:{click:function(t){return e.routerToAddress("/setting/booking-status")}}},[o("q-item-section",[e._v("Booking Status")])],1),e.is_read_email_setting?o("q-separator",{attrs:{color:"white"}}):e._e(),e.is_read_email_setting?o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:""},on:{click:function(t){return e.routerToAddress("/setting/email-setting")}}},[o("q-item-section",[e._v("Email Setting")])],1):e._e(),e.is_read_email_template?o("q-separator",{attrs:{color:"white"}}):e._e(),e.is_read_email_template?o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:""},on:{click:function(t){return e.routerToAddress("/setting/my-template")}}},[o("q-item-section",[e._v("My Template")])],1):e._e(),e.is_read_coupon?o("q-separator",{attrs:{color:"white"}}):e._e(),e.is_read_coupon?o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:""},on:{click:function(t){return e.routerToAddress("/setting/coupon")}}},[o("q-item-section",[e._v("Coupon")])],1):e._e()],1)],1)],1),o("q-separator",{attrs:{color:"white"}}),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.logOut()}}},[o("q-item-section",[e._v("Logout")])],1)],1)],1),e.is_read_booking||e.is_read_tour?o("q-btn",{staticClass:"btn-custom-border",attrs:{flat:"",icon:"refresh",color:"primary","text-color":"white",label:""},on:{click:function(t){return e.refreshBookingAndTour()}}}):e._e()],1),o("div",{staticClass:"more-wrapper flex items-center"},[e.is_role_admin?o("q-btn",{staticClass:"custom-button-branch",attrs:{round:"","text-color":"primary",color:"white",size:"sm",label:e.label_button_branch}},[o("q-menu",{attrs:{"content-class":"popup-choose-branch"}},[o("q-list",{staticStyle:{"min-width":"200px"},attrs:{dense:""}},[o("q-item",[o("q-item-section",[o("div",{staticClass:"title-choose-branch"},[e._v("Choose branch manage")])])],1),o("q-separator"),e._l(e.list_branch,(function(t,i){return o("q-item",{key:i,attrs:{clickable:""},on:{click:function(o){return e.chooseBranch(t)}}},[o("q-item-section",{staticClass:"item-branch",class:{active:e.current_branch_id==t.id}},[e._v(e._s(t.name))])],1)})),o("q-item",[o("q-item-section",[o("div",{staticClass:"sub-text-3-custom text-center",on:{click:function(t){return e.goToManageBranch()}}},[e._v("Manage branch")])])],1)],2)],1)],1):e._e()],1)])])],1)]),o("q-page-container",{staticClass:"no-padding-mobile page-content"},[o("router-view")],1),o("q-footer",{staticClass:"footer-for-mobile bg-white text-primary",attrs:{bordered:""}},[o("q-tabs",{staticClass:"text-grey",attrs:{"no-caps":"","active-color":"primary",dense:!0,"indicator-color":"primary"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[e.is_read_booking?o("q-tab",{staticClass:"tab-footer-customer",attrs:{name:"sales",icon:"launch",label:"Sales"},on:{click:function(t){return e.openMenuSales()}}},[e.pending_booking_count>0&&e.pending_booking_count<10?o("q-badge",{staticClass:"badge-circle",attrs:{color:"red",floating:""}},[e._v(e._s(e.pending_booking_count))]):e._e(),e.pending_booking_count>=10?o("q-badge",{staticClass:"badge-circle",attrs:{color:"red",floating:""}},[e._v("9+")]):e._e()],1):e._e(),e.is_read_tour?o("q-tab",{staticClass:"tab-footer-customer",attrs:{name:"operations",icon:"format_indent_increase",label:"Operations"},on:{click:function(t){return e.openMenuOperations()}}},[e.today_tour_count>0&&e.today_tour_count<10?o("q-badge",{staticClass:"badge-circle",attrs:{color:"red",floating:"",transparent:""}},[e._v(e._s(e.today_tour_count))]):e._e(),e.today_tour_count>=10?o("q-badge",{staticClass:"badge-circle",attrs:{color:"red",floating:"",transparent:""}},[e._v("9+")]):e._e()],1):e._e(),e.is_role_sales||e.is_role_operation||e.is_role_operation_can_group_bk?o("q-tab",{staticClass:"tab-footer-customer",attrs:{name:"master-list",icon:"notes",label:"Master list"},on:{click:function(t){return e.routerToAddress("/master-list")}}}):e._e(),e.is_role_tour_guide?o("q-tab",{staticClass:"tab-footer-customer",attrs:{name:"schedule",icon:"event_note",label:"Schedule"},on:{click:function(t){return e.routerToAddress("/schedule")}}}):e._e(),e.is_role_tour_guide||e.is_role_operation||e.is_role_operation_can_group_bk?o("q-tab",{staticClass:"tab-footer-customer",attrs:{name:"Notification",icon:"notifications",label:"Notification"},on:{click:function(t){return e.routerToAddress("/notification")}}}):e._e(),e.is_read_report?o("q-tab",{staticClass:"tab-footer-customer",attrs:{name:"activities",icon:"assessment",label:"Report"},on:{click:function(t){return e.openMenuReport()}}}):e._e(),o("q-tab",{staticClass:"tab-footer-customer",attrs:{name:"more",icon:"menu",label:"More"},on:{click:function(t){return e.openMenuMore()}}})],1)],1),o("q-dialog",{attrs:{position:"bottom"},model:{value:e.triggerMenuMoreMobile,callback:function(t){e.triggerMenuMoreMobile=t},expression:"triggerMenuMoreMobile"}},[o("div",{staticClass:"list-menu bg-white"},[o("div",{staticClass:"q-pl-md q-pr-md text-home flex"},[e.list_menu_show.is_parent?e._e():o("q-icon",{staticClass:"q-mr-md",attrs:{size:"sm",name:"keyboard_backspace"},on:{click:function(t){return e.backToMenuHome()}}}),o("div",[e._v(e._s(e.parent_menu_text))])],1),o("q-separator"),e._l(e.list_menu_show.list_item,(function(t,i){return o("div",{key:i,staticClass:"item-menu",on:{click:function(o){return e.chooseMainMenu(t)}}},[t.is_perm?o("div",[o("div",{staticClass:"text-wrapper flex q-pl-md q-pr-md"},[o("q-icon",{staticClass:"q-mr-md",attrs:{name:t.icon_name,size:"sm"}}),o("div",[e._v(e._s(t.name))]),"Unprocessed bookings"==t.name?o("div",{staticClass:"q-ml-md badge-operation-mobile"},[e.pending_booking_count>0&&e.pending_booking_count<10?o("div",{staticClass:"badge-content"},[e._v(e._s(e.pending_booking_count))]):e._e(),e.pending_booking_count>=10?o("div",{staticClass:"badge-content"},[e._v("9+")]):e._e()]):e._e(),"Today tour"==t.name?o("div",{staticClass:"q-ml-md badge-operation-mobile"},[e.today_tour_count>0&&e.today_tour_count<10?o("div",{staticClass:"badge-content"},[e._v(e._s(e.today_tour_count))]):e._e(),e.today_tour_count>=10?o("div",{staticClass:"badge-content"},[e._v("9+")]):e._e()]):e._e(),o("q-space"),t.child.length>0?o("q-icon",{attrs:{size:"sm",name:"keyboard_arrow_right"}}):e._e()],1),o("q-separator")],1):e._e()])}))],2)])],1)},n=[],s=(o("8e6e"),o("8a81"),o("ac6a"),o("cadf"),o("456d"),o("8993")),a=o.n(s),c=(o("6b54"),o("06db"),o("a481"),o("28a5"),o("7f7f"),o("c47a")),l=o.n(c),u=o("2f62"),_=o("9c58");o("1c16");function m(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?m(o,!0).forEach((function(t){l()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):m(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var p={name:"MyLayout",computed:d({},Object(u["b"])({current_user_logged_info:"login/getUserLoggedInfo",current_branch_id:"login/getCurrentBranchId",current_branch_info:"login/getInfoCurrentBranch",role_perm:"login/getInfoPerm",is_role_admin:"login/getRoleAdmin",is_role_mod:"login/getRoleMod",is_role_sales:"login/getRoleSales",is_role_operation:"login/getRoleOperation",is_role_operation_can_group_bk:"login/getRoleOperationCanGroupBK",is_role_staff:"login/getRoleStaff",is_role_tour_guide:"login/getRoleTourGuide"}),{is_read_booking:function(){return this.getPermRole("order:read")},is_read_tour:function(){return this.getPermRole("tour:read")},is_read_report:function(){return this.getPermRole("report:read")},is_read_master_list:function(){return this.getPermRole("masterlist:read")},is_read_staff:function(){return this.getPermRole("staff:read")},is_read_perm:function(){return this.getPermRole("permissionGroup:read")},is_read_schedule:function(){return this.getPermRole("schedule:read")},is_read_product:function(){return this.getPermRole("product:read")},is_read_availability:function(){return this.getPermRole("availability:add")},is_read_coupon:function(){return this.getPermRole("coupon:read")},is_read_email_template:function(){return this.getPermRole("emailtemplate:read")},is_read_expense_field:function(){return this.getPermRole("companyfields:view")},is_read_regional:function(){return this.getPermRole("regional:get")},is_read_email_setting:function(){return this.getPermRole("emailsetting:get")}}),watch:{over_dropdown_sales:function(e){this.debounceFunc()},over_list_sales:function(e){this.debounceFunc()},over_dropdown_operations:function(e){this.debounceFunc()},over_list_operations:function(e){this.debounceFunc()},over_dropdown_more:function(e){this.debounceFunc()},over_list_more:function(e){this.debounceFunc()},over_list_more_child:function(e){this.debounceFunc()},$route:function(e,t){this.checkIsLogin(),this.getListBranch()},is_read_booking:function(e){e&&this.initSubMenuMobile("read-booking")},is_read_tour:function(e){e&&this.initSubMenuMobile("read-tour")},is_read_report:function(e){e&&this.initSubMenuMobile("read-report")},is_read_master_list:function(e){e&&this.initSubMenuMobile("read-master-list")},is_read_staff:function(e){e&&this.initSubMenuMobile("read-staff")},is_read_perm:function(e){e&&this.initSubMenuMobile("read-perm")},is_read_schedule:function(e){e&&this.initSubMenuMobile("read-schedule")},is_read_product:function(e){e&&this.initSubMenuMobile("read-product")},is_read_availability:function(e){e&&this.initSubMenuMobile("read-availability")},is_read_coupon:function(e){e&&this.initSubMenuMobile("read-coupon")},is_read_email_template:function(e){e&&this.initSubMenuMobile("read-email-template")},is_read_expense_field:function(e){e&&this.initSubMenuMobile("read-expense-field")},is_read_regional:function(e){e&&this.initSubMenuMobile("read-regional")},is_read_email_setting:function(e){e&&this.initSubMenuMobile("read-email-setting")}},data:function(){return{backend_url:_["a"],name_header_mobile:"Bookings List",tab:"sales",leftDrawerOpen:!1,is_sale:!1,is_staff:!1,triggerMenuMoreMobile:!1,parent_menu_text:"Home",current_menu_choosed:[],list_menu_show:{is_parent:!0,list_item:[]},list_menu_sales:{name:"Sales",menu:[{name:"Booking list",icon_name:"format_list_bulleted",is_perm:!1,child:[],router:"/"},{name:"Unprocessed bookings",icon_name:"dashboard",is_perm:!1,child:[],router:"/unprocess-booking"},{name:"Product availability",icon_name:"event_available",is_perm:!1,child:[],router:"/availability"}]},list_menu_operations:{name:"Operations",menu:[{name:"Tours list",icon_name:"format_list_numbered",is_perm:!1,child:[],router:"/tour-list"},{name:"Today tour",icon_name:"playlist_play",is_perm:!1,child:[],router:"/today-tour"},{name:"Guide schedule",icon_name:"event_note",is_perm:!1,child:[],router:"/schedule"}]},list_menu_report:{name:"report",icon_name:"bar_chart",router:"/report"},list_menu_more:{name:"Mores",menu:[{name:"Activities",icon_name:"swap_horiz",is_perm:!1,child:[],router:"/activities"},{name:"Master list",icon_name:"notes",is_perm:!1,child:[],router:"/master-list"},{name:"Notification",icon_name:"notifications",is_perm:!1,child:[],router:"/notification"},{name:"User management",child:[],is_perm:!1,icon_name:"people_outline",router:"/user-list"},{name:"Permission management",child:[],is_perm:!1,icon_name:"security",router:"/permission-list"},{name:"Manage expense fields",child:[],is_perm:!1,icon_name:"toggle_on",router:"/manage-fields"},{name:"Plan and billing",child:[],is_perm:!1,icon_name:"payment",router:"/plan-billing"},{name:"Sales online tool",child:[],is_perm:!1,icon_name:"developer_board",router:"/online-sale"},{name:"Product",child:[],is_perm:!1,icon_name:"local_activity",router:"/products"},{name:"Settings",icon_name:"settings",is_perm:!0,child:[{name:"Account",is_perm:!0,icon_name:"person_outline",child:[],router:"/setting/account"},{name:"Branch Information",icon_name:"business",is_perm:!0,child:[],router:"/branch-list"},{name:"Regional",is_perm:!1,icon_name:"public",child:[],router:"/setting/regional"},{name:"Booking status",icon_name:"info",is_perm:!0,child:[],router:"/setting/booking-status"},{name:"Email Setting",is_perm:!1,icon_name:"mail_outline",child:[],router:"/setting/email-setting"},{name:"My Template",is_perm:!1,icon_name:"insert_drive_file",child:[],router:"/setting/my-template"},{name:"Coupon",is_perm:!1,icon_name:"card_giftcard",child:[],router:"/setting/coupon"},{name:"Logout",is_perm:!0,child:[],icon_name:"exit_to_app",router:"/login"}],router:"/"}]},perm_user_logged:null,info_user_logged:{},is_logged:!1,list_branch:{},label_button_branch:"",today_tour_count:0,pending_booking_count:0,info_jwt_local:{}}},methods:(i={initSubMenuMobile:function(e){switch(e){case"read-booking":this.list_menu_sales.menu[0].is_perm=!0,this.list_menu_sales.menu[1].is_perm=!0;break;case"read-tour":this.list_menu_operations.menu[0].is_perm=!0,this.list_menu_operations.menu[1].is_perm=!0;break;case"read-master-list":this.list_menu_more.menu[1].is_perm=!0;break;case"read-staff":this.list_menu_more.menu[3].is_perm=!0;break;case"read-perm":this.list_menu_more.menu[4].is_perm=!0;break;case"read-schedule":this.list_menu_operations.menu[2].is_perm=!0;break;case"read-product":this.list_menu_more.menu[8].is_perm=!0;break;case"read-availability":this.list_menu_sales.menu[2].is_perm=!0;break;case"read-coupon":this.list_menu_more.menu[9].child[6].is_perm=!0;break;case"read-email-template":this.list_menu_more.menu[9].child[5].is_perm=!0;break;case"read-expense-field":this.list_menu_more.menu[5].is_perm=!0;break;case"read-regional":this.list_menu_more.menu[9].child[2].is_perm=!0;break;case"read-email-setting":this.list_menu_more.menu[9].child[4].is_perm=!0;break;default:break}},refreshBookingAndTour:function(){var e=this;e.getPendingBookingCount(),e.getInfoTodayTour(),e.$root.$emit("refreshBookingList"),e.$root.$emit("refreshTourList")},getPendingBookingCount:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),o=localStorage.getItem("branch_id_fisheye_client");o&&-1!=o&&this.$axios.get("/api/Orders/GetPendingOrders/"+o,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.pending_booking_count=t.data})).catch((function(e){}))},getInfoTodayTour:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),o=localStorage.getItem("branch_id_fisheye_client");if(-1!=o){var i="/api/Tours/Get?BranchId="+e.current_branch_id+"&PageSize=1000",r=new Date,n=new Date;r.setHours(7),n.setHours(30),r&&(i+="&TravelDateFrom="+r.toISOString()),n&&(i+="&TravelDateTo="+n.toISOString()),this.$axios.get(i,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.today_tour_count=t.data.tours.length})).catch((function(e){}))}},getPermRole:function(e){return-1!=this.role_perm.indexOf(e)},logOut:function(){localStorage.removeItem("user_token_fisheye_client"),this.routerToAddress("/login")},goToManageBranch:function(){this.$router.push("/branch-list")},routerToHome:function(){this.is_role_operation||this.is_role_operation_can_group_bk?this.$router.push("/tour-list"):this.$router.push("/")},chooseBranch:function(e){localStorage.setItem("branch_id_fisheye_client",e.id),window.location.reload()},backToMenuHome:function(){this.parent_menu_text=this.current_menu_choosed.name,this.$set(this.list_menu_show,"list_item",this.current_menu_choosed.menu),this.$set(this.list_menu_show,"is_parent",!0),this.$forceUpdate()},routerToAddress:function(e){this.$router.push(e)},chooseMainMenu:function(e){e.child.length>0?(this.parent_menu_text=e.name,this.$set(this.list_menu_show,"list_item",e.child),this.$set(this.list_menu_show,"is_parent",!1),this.$forceUpdate()):(this.triggerMenuMoreMobile=!1,this.$router.push(e.router))},openMenuSales:function(){this.triggerMenuMoreMobile=!0,this.parent_menu_text="Sales",this.list_menu_show.is_parent=!0,this.list_menu_show.list_item=this.list_menu_sales.menu,this.current_menu_choosed=this.list_menu_sales},openMenuOperations:function(){this.triggerMenuMoreMobile=!0,this.parent_menu_text="Operations",this.list_menu_show.is_parent=!0,this.list_menu_show.list_item=this.list_menu_operations.menu,this.current_menu_choosed=this.list_menu_operations},openMenuReport:function(){this.$router.push("/report")},openMenuMore:function(){this.triggerMenuMoreMobile=!0,this.parent_menu_text="More",this.list_menu_show.is_parent=!0,this.list_menu_show.list_item=this.list_menu_more.menu,this.current_menu_choosed=this.list_menu_more},routerToLogin:function(){this.$router.push("/login")},onItemClick:function(){},parseJwt:function(e){var t=e.split(".")[1],o=t.replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(atob(o).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(i)},getInfoCurrentBranch:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),o=localStorage.getItem("branch_id_fisheye_client");e.$axios.get("/api/StaffManagement/GetMyBranch/"+o,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.$store.commit("login/setInfoCurrentBranch",t.data),e.getInfoFirstLetterBranch(t.data)})).catch((function(e){}))},getInfoFirstLetterBranch:function(e){this.label_button_branch=e.name[0].toUpperCase()},getCurrentBranchToManage:function(){var e=this,t=localStorage.getItem("branch_id_fisheye_client");t?(e.$store.commit("login/setCurrentBranchId",t),e.getInfoCurrentBranch()):e.$router.push("/choose-branch")},getPermRoleLocal:function(e){return-1!=this.info_jwt_local.scope.indexOf(e)},checkStaffRole:function(){var e=this;e.$store.commit("login/setRoleStaff",!0),this.getPermRoleLocal("isSales")&&e.$store.commit("login/setRoleSales",!0),this.getPermRoleLocal("isOperator")&&e.$store.commit("login/setRoleOperation",!0),this.getPermRoleLocal("isOperatorCanGroupBk")&&e.$store.commit("login/setRoleOperationCanGroupBK",!0),this.getPermRoleLocal("isTourGuide")&&(e.$store.commit("login/setRoleTourGuide",!0),e.list_menu_more.menu[9].child[3].is_perm=!1)},checkPerm:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");if(t){var o=this.parseJwt(t);this.perm_user_logged=o}else e.$router.push("/login");var i=!1;"string"==typeof this.perm_user_logged.role&&("ClientAdmin"==this.perm_user_logged.role&&(i=!0,e.$store.commit("login/setRoleAdmin",!0)),"ClientMod"==this.perm_user_logged.role&&(i=!0,e.$store.commit("login/setRoleMod",!0)),"ClientStaff"==this.perm_user_logged.role&&(i=!0,e.$store.commit("login/setRoleStaff",!0),e.checkStaffRole())),"object"==a()(this.perm_user_logged.role)&&this.perm_user_logged.role.forEach((function(t){"ClientAdmin"==t&&(i=!0,e.$store.commit("login/setRoleAdmin",!0)),"ClientMod"==t&&(i=!0,e.$store.commit("login/setRoleMod",!0)),"ClientStaff"==t&&(i=!0,e.$store.commit("login/setRoleStaff",!0),e.checkStaffRole())})),i?(e.getCurrentBranchToManage(),e.getPendingBookingCount(),e.getInfoTodayTour()):(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"You do not have permission!"}),e.$router.push("/login"))}},l()(i,"parseJwt",(function(e){var t=e.split(".")[1],o=t.replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(atob(o).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(i)})),l()(i,"getInfoRegional",(function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),o=localStorage.getItem("branch_id_fisheye_client");-1!=o&&this.$axios.get("/api/Settings/GetRegional/"+o,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){""==t.data.timeZone||isNaN(t.data.timeZone)||(t.data.timeZone=parseInt(t.data.timeZone)),e.$store.commit("login/setInfoRegionalBranch",t.data)})).catch((function(e){}))})),l()(i,"checkIsLogin",(function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");this.$axios.get("/api/Accounts/ValidateToken",{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(o){e.$store.commit("login/setUserLoggedInfo",o.data),e.getInfoRegional();var i=e.parseJwt(t);e.info_jwt_local=i,e.$store.commit("login/setInfoJWT",i),e.info_user_logged=o.data,e.is_logged=!0,e.checkPerm()})).catch((function(t){302==t.response.status?(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Your account has been updated by your admin, try to relogin or contact your admin!"}),localStorage.removeItem("user_token_fisheye_client"),e.$router.push("/login")):303==t.response.status?(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Your account has expired!"}),localStorage.removeItem("user_token_fisheye_client"),e.$router.push("/login")):(localStorage.removeItem("user_token_fisheye_client"),e.$router.push("/login"))}))})),l()(i,"getListBranch",(function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");this.$axios.get("/api/StaffManagement/GetBranches?PageSize=1000",{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.list_branch=t.data.branches})).catch((function(e){}))})),i),mounted:function(){this.checkIsLogin(),this.getListBranch()}},g=p,h=o("2877"),b=o("fe09"),f=Object(h["a"])(g,r,n,!1,null,null,null);t["default"]=f.exports;f.options.components=Object.assign({QLayout:b["t"],QHeader:b["m"],QToolbar:b["O"],QCard:b["e"],QBtnDropdown:b["d"],QList:b["v"],QSeparator:b["C"],QItem:b["q"],QItemSection:b["s"],QItemLabel:b["r"],QBadge:b["b"],QBtn:b["c"],QIcon:b["n"],QMenu:b["w"],QPageContainer:b["z"],QFooter:b["l"],QTabs:b["J"],QTab:b["F"],QDialog:b["k"],QSpace:b["D"]},f.options.components||{}),f.options.directives=Object.assign({ClosePopup:b["a"]},f.options.directives||{})},"9c58":function(e,t,o){"use strict";var i="https://appbackend.fisheyetravel.com/";t["a"]=i}}]);
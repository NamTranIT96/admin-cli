(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["15ca0aab"],{"0c22":function(e,t,i){"use strict";var o=i("16e4"),a=i.n(o);a.a},"16e4":function(e,t,i){},"2dca":function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"view-on-desk-top"},[e.is_read?i("div",{staticClass:"list-booking-desktop-wrapper"},[i("div",{staticClass:"q-pa-md"},[i("div",{staticClass:"title-and-controller flex"},[-1==e.status_props_booking?i("div",{staticClass:"text-title"},[e._v("\n            Sales\n            "),i("q-icon",{staticClass:"q-mr-xs q-ml-xs",attrs:{dense:"",name:"keyboard_arrow_right",size:"sm"}}),e._v("\n            Booking list\n          ")],1):e._e(),i("q-space"),e.is_group&&!e.is_processed_booking?i("div",{staticClass:"q-mr-md",staticStyle:{width:"205px"}},[i("el-select",{staticClass:"input-custom-height",attrs:{disabled:0==e.selected_booking.length,size:"medium",placeholder:"Group booking"},on:{change:function(t){return e.changeSelectGroupBooking()}},model:{value:e.group_booking_choosed,callback:function(t){e.group_booking_choosed=t},expression:"group_booking_choosed"}},e._l(e.options_group_booking,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1):e._e(),e.is_add?i("q-btn",{staticClass:"button-custom-height",attrs:{icon:"add",label:"Add",color:"primary"},on:{click:function(t){return e.openDialogAddBooking()}}}):e._e()],1)]),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.loading_list_booking,expression:"loading.loading_list_booking"}],staticClass:"list-booking q-pl-md q-pr-md q-pb-md"},[i("q-table",{staticClass:"table-list-booking",attrs:{data:e.list_booking,columns:e.columns,"row-key":"stt",pagination:e.pagination,separator:"cell","rows-per-page-options":[3,5,7,10,15,20,25,50]},on:{"update:pagination":function(t){e.pagination=t},request:e.onRequest},scopedSlots:e._u([{key:"header-cell",fn:function(t){return[i("q-th",{attrs:{props:t}},["check_select"==t.col.unique?i("div",[e.is_processed_booking?e._e():i("div",[i("q-checkbox",{staticClass:"checkbox-select-list-booking",attrs:{dense:"",disabled:"",color:"primary"},model:{value:e.checkbox_temp,callback:function(t){e.checkbox_temp=t},expression:"checkbox_temp"}})],1)]):"no"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"20px"},domProps:{innerHTML:e._s(e.getNameHeaderCrop(t.col.label))}})]):"status"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"80px"}},[e._v(e._s(t.col.label))]),-1==e.status_props_booking?i("div",[i("el-select",{staticClass:"select-option-filter",attrs:{size:"mini",placeholder:"Choose status"},on:{change:function(t){return e.getListBooking()}},model:{value:e.info_filter_booking.status,callback:function(t){e.$set(e.info_filter_booking,"status",t)},expression:"info_filter_booking.status"}},e._l(e.options_status_booking_filter,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):i("div",{staticClass:"temp-space"})]):"aliasName"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"190px"},domProps:{innerHTML:e._s(e.getNameHeaderCrop(t.col.label))}})]):"productCode"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"120px"},domProps:{innerHTML:e._s(e.getNameHeaderCrop(t.col.label))}})]):"travelDate"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"150px"}},[e._v(e._s(t.col.label))]),i("div",[i("picker-filter",{attrs:{id:"picker-custom",noClearButton:!0,formatted:"l",autoClose:!0,noShortcuts:!0,noHeader:!0,"no-label":!0,range:!0,format:"DD/MM/YYYY",color:"#027BE3"},model:{value:e.info_filter_booking.date_range,callback:function(t){e.$set(e.info_filter_booking,"date_range",t)},expression:"info_filter_booking.date_range"}})],1)]):"refNo"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"95px"}},[e._v(e._s(t.col.label))]),i("div",[i("el-input",{attrs:{placeholder:"Enter ref no",size:"mini"},on:{blur:function(t){return e.getListBooking()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getListBooking()}},model:{value:e.info_filter_booking.refNo,callback:function(t){e.$set(e.info_filter_booking,"refNo",t)},expression:"info_filter_booking.refNo"}})],1)]):"salesInCharge"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"150px"}},[e._v(e._s(t.col.label))]),i("div",[i("el-select",{attrs:{size:"mini",placeholder:"Choose sale in charge",multiple:""},on:{change:function(t){return e.getListBooking()}},model:{value:e.info_filter_booking.salesInCharge,callback:function(t){e.$set(e.info_filter_booking,"salesInCharge",t)},expression:"info_filter_booking.salesInCharge"}},e._l(e.options_sale_in_charge,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]):"startTime"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"65px"},domProps:{innerHTML:e._s(e.getNameHeaderCrop(t.col.label))}})]):"endTime"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"65px"},domProps:{innerHTML:e._s(e.getNameHeaderCrop(t.col.label))}})]):"bookingNumber"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"110px"}},[e._v(e._s(t.col.label))]),i("div",[i("el-input",{attrs:{placeholder:"Enter booking number",size:"mini"},on:{blur:function(t){return e.getListBooking()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getListBooking()}},model:{value:e.info_filter_booking.booking_number,callback:function(t){e.$set(e.info_filter_booking,"booking_number",t)},expression:"info_filter_booking.booking_number"}})],1)]):"productTitle"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header"},[e._v(e._s(t.col.label))]),i("div",[i("el-input",{attrs:{placeholder:"Enter product name",size:"mini"},on:{blur:function(t){return e.getListBooking()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getListBooking()}},model:{value:e.info_filter_booking.product_name,callback:function(t){e.$set(e.info_filter_booking,"product_name",t)},expression:"info_filter_booking.product_name"}})],1)]):"tourType"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"75px"}},[e._v(e._s(t.col.label))]),i("div",[i("el-select",{attrs:{size:"mini",placeholder:"Choose tour type","popper-class":"select-status-new-booking"},on:{change:function(t){return e.getListBooking()}},model:{value:e.info_filter_booking.tour_type,callback:function(t){e.$set(e.info_filter_booking,"tour_type",t)},expression:"info_filter_booking.tour_type"}},e._l(e.option_tour_type_filter,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]):"groupBooking"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header"},[e._v(e._s(t.col.label))]),i("div",[i("el-select",{attrs:{size:"mini",placeholder:"Choose Group booking","popper-class":"select-status-new-booking"},on:{change:function(t){return e.getListBooking()}},model:{value:e.info_filter_booking.group_booking,callback:function(t){e.$set(e.info_filter_booking,"group_booking",t)},expression:"info_filter_booking.group_booking"}},e._l(e.options_group_booking,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]):"transportation"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header"},[e._v(e._s(t.col.label))]),i("div",[i("el-select",{attrs:{size:"mini",placeholder:"Choose transportation","popper-class":"select-status-new-booking"},on:{change:function(t){return e.getListBooking()}},model:{value:e.info_filter_booking.transportation,callback:function(t){e.$set(e.info_filter_booking,"transportation",t)},expression:"info_filter_booking.transportation"}},e._l(e.options_main_transportation_filter,(function(e){return i("el-option",{key:e.id,attrs:{label:e.plateNumber,value:e.plateNumber}})})),1)],1)]):"adultPrice"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"50px"},domProps:{innerHTML:e._s(e.getNameHeaderCrop(t.col.label))}})]):"childPrice"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"50px"},domProps:{innerHTML:e._s(e.getNameHeaderCrop(t.col.label))}})]):"infantPrice"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"50px"},domProps:{innerHTML:e._s(e.getNameHeaderCrop(t.col.label))}})]):"youthPrice"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"50px"},domProps:{innerHTML:e._s(e.getNameHeaderCrop(t.col.label))}})]):"seniorPrice"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"50px"},domProps:{innerHTML:e._s(e.getNameHeaderCrop(t.col.label))}})]):"bookerName"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"140px"}},[e._v(e._s(t.col.label))]),i("div",[i("el-select",{attrs:{size:"mini",placeholder:"Choose booker name","popper-class":"select-status-new-booking",filterable:""},on:{change:function(t){return e.getListBooking()}},model:{value:e.info_filter_booking.booker_name,callback:function(t){e.$set(e.info_filter_booking,"booker_name",t)},expression:"info_filter_booking.booker_name"}},e._l(e.options_bookers_filter,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1)]):"bookerEmail"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"100px"},domProps:{innerHTML:e._s(e.getNameHeaderCrop(t.col.label))}})]):"bookerClient"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"100px"},domProps:{innerHTML:e._s(e.getNameHeaderCrop(t.col.label))}})]):"bookerSaleChannel"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"100px"},domProps:{innerHTML:e._s(e.getNameHeaderCrop(t.col.label))}})]):"leadTravelerFirstName"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header"},[e._v(e._s(t.col.label))]),i("div",[i("el-input",{attrs:{placeholder:"Enter lead first name",size:"mini"},on:{blur:function(t){return e.getListBooking()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getListBooking()}},model:{value:e.info_filter_booking.lead_first_name,callback:function(t){e.$set(e.info_filter_booking,"lead_first_name",t)},expression:"info_filter_booking.lead_first_name"}})],1)]):"leadTravelerLastName"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header"},[e._v(e._s(t.col.label))]),i("div",[i("el-input",{attrs:{placeholder:"Enter lead last name",size:"mini"},on:{blur:function(t){return e.getListBooking()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getListBooking()}},model:{value:e.info_filter_booking.lead_last_name,callback:function(t){e.$set(e.info_filter_booking,"lead_last_name",t)},expression:"info_filter_booking.lead_last_name"}})],1)]):"leadTravelerGender"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header",staticStyle:{"min-width":"100px"},domProps:{innerHTML:e._s(e.getNameHeaderCrop(t.col.label))}})]):"nationalityText"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header"},[e._v(e._s(t.col.label))]),i("div",[i("el-select",{attrs:{filterable:"",size:"mini",placeholder:"Choose nationality","popper-class":"select-group-new-booking"},on:{change:function(t){return e.getListBooking()}},model:{value:e.info_filter_booking.nationality,callback:function(t){e.$set(e.info_filter_booking,"nationality",t)},expression:"info_filter_booking.nationality"}},e._l(e.options_country_world_filter,(function(e){return i("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)]):"leadTravelerLastEmail"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header"},[e._v(e._s(t.col.label))]),i("div",[i("el-input",{attrs:{placeholder:"Enter leader email",size:"mini"},on:{blur:function(t){return e.getListBooking()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getListBooking()}},model:{value:e.info_filter_booking.lead_email,callback:function(t){e.$set(e.info_filter_booking,"lead_email",t)},expression:"info_filter_booking.lead_email"}})],1)]):"foodNotes"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header"},[e._v(e._s(t.col.label))]),i("div",[i("el-input",{attrs:{placeholder:"Enter food note",size:"mini"},on:{blur:function(t){return e.getListBooking()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getListBooking()}},model:{value:e.info_filter_booking.food_note,callback:function(t){e.$set(e.info_filter_booking,"food_note",t)},expression:"info_filter_booking.food_note"}})],1)]):"otherNotes"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header"},[e._v(e._s(t.col.label))]),i("div",[i("el-input",{attrs:{placeholder:"Enter other note",size:"mini"},on:{blur:function(t){return e.getListBooking()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getListBooking()}},model:{value:e.info_filter_booking.other_note,callback:function(t){e.$set(e.info_filter_booking,"other_note",t)},expression:"info_filter_booking.other_note"}})],1)]):"bookingDate"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header"},[e._v(e._s(t.col.label))]),i("div",[i("el-date-picker",{staticClass:"date-picker-filter-date-booking",attrs:{size:"mini",format:"dd-MM-yyyy"},on:{change:function(t){return e.getListBooking()}},model:{value:e.info_filter_booking.booking_date,callback:function(t){e.$set(e.info_filter_booking,"booking_date",t)},expression:"info_filter_booking.booking_date"}})],1)]):"emailSent"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header"},[e._v(e._s(t.col.label))]),i("div",[i("el-select",{attrs:{size:"mini",placeholder:"Choose email send","popper-class":"select-status-new-booking"},on:{change:function(t){return e.getListBooking()}},model:{value:e.info_filter_booking.email_sent,callback:function(t){e.$set(e.info_filter_booking,"email_sent",t)},expression:"info_filter_booking.email_sent"}},e._l(e.options_status_yes_no_filter,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]):"invoiceSent"==t.col.unique?i("div",[i("div",{staticClass:"text-custom-header"},[e._v(e._s(t.col.label))]),i("div",[i("el-select",{attrs:{size:"mini",placeholder:"Choose invoice send","popper-class":"select-status-new-booking"},on:{change:function(t){return e.getListBooking()}},model:{value:e.info_filter_booking.invoice_sent,callback:function(t){e.$set(e.info_filter_booking,"invoice_sent",t)},expression:"info_filter_booking.invoice_sent"}},e._l(e.options_status_yes_no_filter,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]):i("div",[i("div",{staticClass:"text-custom-header",domProps:{innerHTML:e._s(e.getNameHeaderCrop(t.col.label))}})])])]}},{key:"body",fn:function(t){return[i("q-tr",{class:{diff:t.row.stt%2==0},attrs:{props:t}},[t.row.is_grouped?i("q-td",{key:"check_select",staticStyle:{width:"50px"},attrs:{props:t}},[e.is_processed_booking?i("div"):i("div",{staticClass:"text-center"},[i("q-icon",{staticClass:"no-padding",attrs:{name:"check",color:"primary",size:"sm",dense:""},on:{click:function(i){return e.viewTourOfBooking(t.row)}}})],1)]):i("q-td",{key:"check_select",staticStyle:{width:"50px"},attrs:{props:t}},[e.is_processed_booking?i("div"):i("q-checkbox",{staticClass:"checkbox-select-list-booking",attrs:{disable:t.row.disable_selected,color:"primary"},model:{value:t.row.check_select,callback:function(i){e.$set(t.row,"check_select",i)},expression:"props.row.check_select"}})],1),i("q-td",{key:"no",staticStyle:{width:"50px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.stt)+"\n                ")])]),i("q-td",{key:"status",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-status-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[0==t.row.status?i("div",{staticClass:"status-pending"},[e._v("Pending")]):e._e(),1==t.row.status?i("div",{staticClass:"status-waiting"},[e._v("Waiting")]):e._e(),2==t.row.status?i("div",{staticClass:"status-reject"},[e._v("Reject")]):e._e(),3==t.row.status?i("div",{staticClass:"status-cf-unpaid"},[e._v("CF-Unpaid")]):e._e(),4==t.row.status?i("div",{staticClass:"status-cf-deposit"},[e._v("CF-Deposit")]):e._e(),5==t.row.status?i("div",{staticClass:"status-cf-paid"},[e._v("CF-Paid")]):e._e(),6==t.row.status?i("div",{staticClass:"status-dd-paid"},[e._v("DD-Paid")]):e._e(),7==t.row.status?i("div",{staticClass:"status-DD-Due"},[e._v("DD-Due")]):e._e(),8==t.row.status?i("div",{staticClass:"status-cancel"},[e._v("Cancel")]):e._e(),9==t.row.status?i("div",{staticClass:"status-others"},[e._v("Others")]):e._e()])]),i("q-td",{key:"travelDate",staticStyle:{width:"210px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("formatDateSystem")(t.row.travelDate))+"\n                ")])]),i("q-td",{key:"aliasName",staticStyle:{width:"210px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.aliasName)+"\n                ")])]),i("q-td",{key:"priceOptionName",staticStyle:{width:"210px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.priceOptionName)+"\n                ")])]),i("q-td",{key:"groupBooking",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e.getNameGroupBooking(t.row.groupBooking))+"\n                ")])]),i("q-td",{key:"startTime",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.startTime)+"\n                ")])]),i("q-td",{key:"endTime",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.endTime)+"\n                ")])]),i("q-td",{key:"bookingNumber",staticStyle:{width:"210px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.bookingNumber)+"\n                ")])]),i("q-td",{key:"productTitle",staticStyle:{width:"210px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.productTitle)+"\n                ")])]),i("q-td",{key:"productCode",staticStyle:{width:"210px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.productCode)+"\n                ")])]),i("q-td",{key:"refNo",staticStyle:{width:"210px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.refNo)+"\n                ")])]),i("q-td",{key:"salesInCharge",staticStyle:{width:"210px"},attrs:{props:t}},[t.row.salesInCharge&&t.row.salesInCharge.length>0?i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.salesInCharge.join(", "))+"\n                ")]):i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}})]),i("q-td",{key:"transportation",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.transportation)+"\n                ")])]),i("q-td",{key:"dayOfWeek",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.dayOfWeek)+"\n                ")])]),i("q-td",{key:"duration",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.duration)+"\n                ")])]),i("q-td",{key:"guestQuantity",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.guestQuantity)+"\n                ")])]),i("q-td",{key:"adultNumber",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.adultNumber)+"\n                ")])]),i("q-td",{key:"childNumber",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.childNumber)+"\n                ")])]),i("q-td",{key:"infantNumber",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.infantNumber)+"\n                ")])]),i("q-td",{key:"youthNumber",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.youthNumber)+"\n                ")])]),i("q-td",{key:"seniorNumber",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.seniorNumber)+"\n                ")])]),i("q-td",{key:"adultPrice",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.adultPrice,e.option_filter))+"\n                ")])]),i("q-td",{key:"childPrice",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.childPrice,e.option_filter))+"\n                ")])]),i("q-td",{key:"infantPrice",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.infantPrice,e.option_filter))+"\n                ")])]),i("q-td",{key:"youthPrice",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.youthPrice,e.option_filter))+"\n                ")])]),i("q-td",{key:"seniorPrice",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.seniorPrice,e.option_filter))+"\n                ")])]),i("q-td",{key:"bookerName",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.bookerName)+"\n                ")])]),i("q-td",{key:"bookerEmail",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.bookerEmail)+"\n                ")])]),i("q-td",{key:"bookerClient",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.bookerClient)+"\n                ")])]),i("q-td",{key:"bookerSaleChannel",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.bookerSaleChannel)+"\n                ")])]),i("q-td",{key:"leadTravelerFirstName",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.leadTravelerFirstName)+"\n                ")])]),i("q-td",{key:"leadTravelerLastName",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.leadTravelerLastName)+"\n                ")])]),i("q-td",{key:"leadTravelerGender",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.leadTravelerGender)+"\n                ")])]),i("q-td",{key:"otherTravelerNamesText",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.otherTravelerNamesText)+"\n                ")])]),i("q-td",{key:"nationalityText",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e.getNameNationality(t.row.nationality))+"\n                ")])]),i("q-td",{key:"passportNumber",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.passportNumber)+"\n                ")])]),i("q-td",{key:"leadTravelerLastEmail",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.leadTravelerLastEmail)+"\n                ")])]),i("q-td",{key:"leadTravelerLastPhone",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.leadTravelerLastPhone)+"\n                ")])]),i("q-td",{key:"hotelName",staticStyle:{"max-width":"200px","min-width":"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.hotelName)+"\n                ")])]),i("q-td",{key:"hotelAddress",staticStyle:{"max-width":"200px","min-width":"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.hotelAddress)+"\n                ")])]),i("q-td",{key:"pickupOrder",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.pickupOrder)+"\n                ")])]),i("q-td",{key:"foodNotes",staticStyle:{"max-width":"200px","min-width":"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.foodNotes)+"\n                ")])]),i("q-td",{key:"otherNotes",staticStyle:{"max-width":"200px","min-width":"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.otherNotes)+"\n                ")])]),i("q-td",{key:"pickupTimeFrom",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.pickupTimeFrom)+"\n                ")])]),i("q-td",{key:"pickupTimeTo",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.pickupTimeTo)+"\n                ")])]),i("q-td",{key:"bookingDate",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("formatDateSystem")(t.row.bookingDate))+"\n                ")])]),i("q-td",{key:"sales",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.sales,e.option_filter))+"\n                ")])]),i("q-td",{key:"otherSales",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.otherSales,e.option_filter))+"\n                ")])]),i("q-td",{key:"surcharge",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.surcharge,e.option_filter))+"\n                ")])]),i("q-td",{key:"commissionFee",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.commissionFee,e.option_filter))+"\n                ")])]),i("q-td",{key:"cancellationFee",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.cancellationFee,e.option_filter))+"\n                ")])]),i("q-td",{key:"othersIncreaseFee",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.othersIncreaseFee,e.option_filter))+"\n                ")])]),i("q-td",{key:"grossSales",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.grossSales,e.option_filter))+"\n                ")])]),i("q-td",{key:"saleDeduction",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.saleDeduction,e.option_filter))+"\n                ")])]),i("q-td",{key:"discount",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.discount,e.option_filter))+"\n                ")])]),i("q-td",{key:"couponCode",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.couponCode)+"\n                ")])]),i("q-td",{key:"couponValue",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.couponValue,e.option_filter))+"\n                ")])]),i("q-td",{key:"cancellationSales",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.cancellationSales,e.option_filter))+"\n                ")])]),i("q-td",{key:"otherDecreaseFee",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.otherDecreaseFee,e.option_filter))+"\n                ")])]),i("q-td",{key:"netSales",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.netSales,e.option_filter))+"\n                ")])]),i("q-td",{key:"taxRate",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.taxRate)+"\n                ")])]),i("q-td",{key:"taxAmount",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.taxAmount,e.option_filter))+"\n                ")])]),i("q-td",{key:"netSalesBeforeTax",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.netSalesBeforeTax,e.option_filter))+"\n                ")])]),i("q-td",{key:"depositRequested",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.depositRequested,e.option_filter))+"\n                ")])]),i("q-td",{key:"depositReceived",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.depositReceived,e.option_filter))+"\n                ")])]),i("q-td",{key:"remainingAmount",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.remainingAmount,e.option_filter))+"\n                ")])]),i("q-td",{key:"paymentReceived",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.paymentReceived,e.option_filter))+"\n                ")])]),i("q-td",{key:"refundToGuests",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.refundToGuests,e.option_filter))+"\n                ")])]),i("q-td",{key:"balance",staticStyle:{width:"200px"},attrs:{props:t}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(e._f("currency")(t.row.balance,e.option_filter))+"\n                ")])]),i("q-td",{key:"emailSent",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.emailSent)+"\n                ")])]),i("q-td",{key:"invoiceSent",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.invoiceSent)+"\n                ")])]),i("q-td",{key:"reminderText",staticStyle:{width:"200px"},attrs:{props:t}},[i("div",{staticClass:"data-wrapper",on:{click:function(i){return e.openModalViewBooking(t.row)}}},[e._v(e._s(t.row.reminderText)+"\n                ")])])],1)]}},{key:"bottom-row",fn:function(){return[i("q-tr",{staticStyle:{"background-color":"antiquewhite"}},[i("q-td",{attrs:{colspan:"1"}},[i("div",{staticClass:"cell-total"},[e._v("Total")])]),i("q-td",{attrs:{colspan:"1"}},[i("div",{staticClass:"cell-total"})]),i("q-td",{attrs:{colspan:"1"}},[i("div",{staticClass:"cell-total"})]),i("q-td",{attrs:{colspan:"1"}},[i("div",{staticClass:"cell-total"})]),i("q-td",{attrs:{colspan:"1"}},[i("div",{staticClass:"cell-total"})]),i("q-td",{attrs:{colspan:"1"}},[i("div",{staticClass:"cell-total"})]),i("q-td",{attrs:{colspan:"9"}},[i("div",{staticClass:"cell-total"})]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v("\n                  "+e._s(e._f("currency")(e.data_total_row.guest_quantity,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.adult_number,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.child_number,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.infant_number,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.youth_number,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.senior_number,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.adult_price,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.child_price,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.infant_price,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.youth_price,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.senior_price,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"20"}},[i("div",{staticClass:"cell-total"})]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.sales,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.other_sales,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.surcharge,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.commission,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v("\n                  "+e._s(e._f("currency")(e.data_total_row.cancellation_fee,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.other_revenue,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.gross_sales,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v("\n                  "+e._s(e._f("currency")(e.data_total_row.sales_deduction,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.discount,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[i("div",{staticClass:"cell-total"})]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.coupon_value,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v("\n                  "+e._s(e._f("currency")(e.data_total_row.cancellation_sales,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v("\n                  "+e._s(e._f("currency")(e.data_total_row.other_deduction,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.net_sales,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[i("div",{staticClass:"cell-total"})]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.tax_amount,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v("\n                  "+e._s(e._f("currency")(e.data_total_row.net_sale_before_tax,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v("\n                  "+e._s(e._f("currency")(e.data_total_row.deposit_request,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v("\n                  "+e._s(e._f("currency")(e.data_total_row.deposit_receive,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v("\n                  "+e._s(e._f("currency")(e.data_total_row.remaining_amount,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v("\n                  "+e._s(e._f("currency")(e.data_total_row.payment_receive,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v("\n                  "+e._s(e._f("currency")(e.data_total_row.refund_to_guess,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"1"}},[e.is_role_operation_can_group_bk?e._e():i("div",{staticClass:"cell-total"},[e._v(e._s(e._f("currency")(e.data_total_row.balance,e.option_filter))+"\n                ")])]),i("q-td",{attrs:{colspan:"3"}},[i("div",{staticClass:"cell-total"})])],1)]},proxy:!0}],null,!1,3185127191)})],1),i("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale"},model:{value:e.open_modal_add_booking,callback:function(t){e.open_modal_add_booking=t},expression:"open_modal_add_booking"}},[i("q-card",{staticClass:"bg-primary text-white modal-add-edit-booking",staticStyle:{"min-width":"60vw","max-width":"85vw"}},[e.is_view_booking?i("q-card-actions",{staticClass:"section-header-detail-booking"},[i("span",{staticClass:"q-pa-sm"},[e._v("View Detail Booking")])]):i("q-card-actions",{staticClass:"section-header-detail-booking"},[e.is_add_booking?i("span",{staticClass:"q-pa-sm"},[e._v("Add New Booking")]):i("span",{staticClass:"q-pa-sm"},[e._v("Edit Booking")])]),i("q-card-actions",{staticClass:"bg-white text-black"},[i("q-card",{staticClass:"w-100 card-add-edit-booking"},[i("q-tabs",{attrs:{dense:"","active-color":"primary",align:"left"},model:{value:e.tab_add_new_booking,callback:function(t){e.tab_add_new_booking=t},expression:"tab_add_new_booking"}},[e.is_read_tab_1?i("q-tab",{attrs:{name:"booking",label:"Booking"}}):e._e(),e.is_read_tab_2?i("q-tab",{attrs:{name:"traveler",label:"Traveler"}}):e._e(),e.is_read_tab_3?i("q-tab",{attrs:{name:"revenue",label:"Revenue",disable:null==e.item_booking.productId||""==e.item_booking.productId||void 0==e.item_booking.productId}}):e._e(),e.is_read_tab_4?i("q-tab",{attrs:{name:"receivables",label:"Receivables",disable:null==e.item_booking.productId||""==e.item_booking.productId||void 0==e.item_booking.productId}}):e._e()],1),i("q-separator"),i("div",{directives:[{name:"show",rawName:"v-show",value:"booking"==e.tab_add_new_booking&&!e.is_add_booking&&e.is_update_tab_1,expression:"\n                  tab_add_new_booking == 'booking' &&\n                    !is_add_booking &&\n                    is_update_tab_1\n                "}],staticClass:"button-edit-tab-1-wrapper"},[e.is_edit_tab_1?i("div",[i("q-btn",{staticClass:"q-mr-md",attrs:{size:"sm",icon:"cancel",color:"red",label:"Cancel"},on:{click:function(t){return e.cancelEditTabOneBooking()}}}),i("q-btn",{attrs:{size:"sm",icon:"save",color:"primary",label:"Save"},on:{click:function(t){return e.saveEditTabOneBooking()}}})],1):i("div",[i("q-btn",{attrs:{size:"sm",icon:"edit",color:"primary",label:"edit"},on:{click:function(t){return e.triggerEditTabOneBooking()}}})],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:"traveler"==e.tab_add_new_booking&&!e.is_add_booking&&e.is_update_tab_2,expression:"\n                  tab_add_new_booking == 'traveler' &&\n                    !is_add_booking &&\n                    is_update_tab_2\n                "}],staticClass:"button-edit-tab-1-wrapper"},[e.is_edit_tab_2?i("div",[i("q-btn",{staticClass:"q-mr-md",attrs:{size:"sm",icon:"cancel",color:"red",label:"Cancel"},on:{click:function(t){return e.cancelEditTabTwoBooking()}}}),i("q-btn",{attrs:{size:"sm",icon:"save",color:"primary",label:"Save"},on:{click:function(t){return e.saveEditTabTwoBooking()}}})],1):i("div",[i("q-btn",{attrs:{size:"sm",icon:"edit",color:"primary",label:"edit"},on:{click:function(t){return e.triggerEditTabTwoBooking()}}})],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:"revenue"==e.tab_add_new_booking&&!e.is_add_booking&&e.is_update_tab_3,expression:"\n                  tab_add_new_booking == 'revenue' &&\n                    !is_add_booking &&\n                    is_update_tab_3\n                "}],staticClass:"button-edit-tab-1-wrapper"},[e.is_edit_tab_3?i("div",[i("q-btn",{staticClass:"q-mr-md",attrs:{size:"sm",icon:"cancel",label:"Cancel",color:"red"},on:{click:function(t){return e.cancelEditTabThreeBooking()}}}),i("q-btn",{attrs:{size:"sm",icon:"save",color:"primary",label:"Save"},on:{click:function(t){return e.saveEditTabThreeBooking()}}})],1):i("div",[i("q-btn",{attrs:{size:"sm",icon:"edit",color:"primary",label:"edit"},on:{click:function(t){return e.triggerEditTabThreeBooking()}}})],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:"receivables"==e.tab_add_new_booking&&!e.is_add_booking&&e.is_update_tab_4,expression:"\n                  tab_add_new_booking == 'receivables' &&\n                    !is_add_booking &&\n                    is_update_tab_4\n                "}],staticClass:"button-edit-tab-1-wrapper"},[e.is_edit_tab_4?i("div",[i("q-btn",{staticClass:"q-mr-md",attrs:{size:"sm",icon:"cancel",color:"red",label:"Cancel"},on:{click:function(t){return e.cancelEditTabFourBooking()}}}),i("q-btn",{attrs:{size:"sm",icon:"save",color:"primary",label:"Save"},on:{click:function(t){return e.saveEditTabFourBooking()}}})],1):i("div",[i("q-btn",{attrs:{size:"sm",icon:"edit",color:"primary",label:"edit"},on:{click:function(t){return e.triggerEditTabFourBooking()}}})],1)]),i("q-tab-panels",{staticClass:"bg-white text-black tab-1-booking",attrs:{animated:""},model:{value:e.tab_add_new_booking,callback:function(t){e.tab_add_new_booking=t},expression:"tab_add_new_booking"}},[i("q-tab-panel",{attrs:{name:"booking"}},[i("div",{staticClass:"tab-detail-booking-wrapper"},[i("div",{staticClass:"flex items-center"},[4!=e.item_booking.status&&5!=e.item_booking.status&&6!=e.item_booking.status&&7!=e.item_booking.status&&8!=e.item_booking.status?i("div",{staticClass:"q-mr-md"},[i("div",[e._v("Choose Status:")]),i("div",[i("el-select",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_1),size:"mini",placeholder:"Choose status","popper-class":"select-status-new-booking"},model:{value:e.item_booking.status,callback:function(t){e.$set(e.item_booking,"status",t)},expression:"item_booking.status"}},e._l(e.options_status_booking,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]):i("div",{staticClass:"q-mr-md"},[i("div",[e._v("Status")]),i("div",{staticStyle:{"line-height":"28px"}},[i("strong",[e._v(e._s(e._f("getNameStatus")(e.item_booking.status)))])])]),e.is_group?i("div",{staticClass:"q-mr-md"},[i("div",[e._v("Group booking")]),i("div",[i("el-select",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_1)||0==e.item_booking.status||1==e.item_booking.status||2==e.item_booking.status,size:"mini",placeholder:"Group booking","popper-class":"select-group-new-booking"},model:{value:e.item_booking.groupBooking,callback:function(t){e.$set(e.item_booking,"groupBooking",t)},expression:"item_booking.groupBooking"}},e._l(e.options_group_booking,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]):e._e(),i("div",[null!=e.item_booking.tourId?i("q-btn",{attrs:{icon:"remove_red_eye",size:"sm",color:"primary",label:"View tour"},on:{click:function(t){return e.viewTourOfBooking(e.item_booking)}}}):e._e()],1),i("q-space"),e.is_view_booking?i("div",{staticClass:"list-button-control flex items-end"},[i("div",{staticClass:"q-mr-sm"},[i("q-btn",{attrs:{label:"Generate email",size:"sm",color:"primary"},on:{click:function(t){return e.triggerOpenModalGenerateEmail()}}})],1),i("div",{staticClass:"q-mr-sm"},[i("q-btn",{attrs:{label:"Invoice",size:"sm",color:"primary"},on:{click:function(t){return e.triggerOpenModalViewInvoice()}}})],1),i("div",{staticClass:"q-mr-sm"},[i("q-btn",{attrs:{disabled:8==e.item_booking.status,label:"Duplicate",size:"sm",color:"primary"},on:{click:function(t){return e.triggerDuplicateBooking()}}})],1),e.is_cancel?i("div",{staticClass:"q-mr-sm"},[i("q-btn",{attrs:{disabled:8==e.item_booking.status,label:"Cancel booking",size:"sm",color:"primary"},on:{click:function(t){return e.triggerOpenModalCancelBooking()}}})],1):e._e(),e.is_delete?i("div",{staticClass:"q-mr-sm"},[i("q-btn",{attrs:{label:"Delete booking",size:"sm",color:"primary"},on:{click:function(t){return e.deleteBooking()}}})],1):e._e()]):e._e()],1),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.loading_product,expression:"loading.loading_product"}],staticClass:"row q-mb-md"},[i("div",{staticClass:"flex w-100"},[i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Booking number")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{placeholder:"Auto generate after created booking",disabled:!0,size:"mini"},model:{value:e.item_booking.bookingNumber,callback:function(t){e.$set(e.item_booking,"bookingNumber",t)},expression:"item_booking.bookingNumber"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Choose product")]),i("div",{staticClass:"content-item"},[i("el-select",{class:{"input-error":e.$v.item_booking.productId.$error},attrs:{size:"mini",placeholder:"Choose product",filterable:"","popper-class":"select-product-new-booking",disabled:!(!e.is_view_booking&&e.is_edit_tab_1)},on:{change:e.changeSelectProductNewBooking},model:{value:e.$v.item_booking.productId.$model,callback:function(t){e.$set(e.$v.item_booking.productId,"$model",t)},expression:"$v.item_booking.productId.$model"}},e._l(e.list_product,(function(e){return i("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1),e.$v.item_booking.productId.$error?i("div",{staticClass:"error-content"},[e._v("Product is required\n                            ")]):e._e()],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Product code")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{size:"mini",disabled:""},model:{value:e.item_booking.productCode,callback:function(t){e.$set(e.item_booking,"productCode",t)},expression:"item_booking.productCode"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Product name")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{size:"mini",disabled:""},model:{value:e.item_booking.productName,callback:function(t){e.$set(e.item_booking,"productName",t)},expression:"item_booking.productName"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Price options")]),i("div",{staticClass:"content-item"},[i("el-select",{class:{"input-error":e.$v.item_booking.priceOptionName.$error},attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_1),size:"mini",placeholder:"Choose price options",filterable:"","popper-class":"select-tour-type-new-booking"},on:{change:e.changePriceOptionNewBooking},model:{value:e.$v.item_booking.priceOptionName.$model,callback:function(t){e.$set(e.$v.item_booking.priceOptionName,"$model",t)},expression:"$v.item_booking.priceOptionName.$model"}},e._l(e.option_price_options,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1),e.$v.item_booking.priceOptionName.$error?i("div",{staticClass:"error-content"},[e._v("Price Option is required\n                            ")]):e._e()],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Travel date")]),i("div",{staticClass:"content-item"},[i("el-date-picker",{staticClass:"time-picker-w-100",class:{"input-error":e.$v.item_booking.travelDate.$error},attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_1),format:"dd-MM-yyyy","picker-options":e.pickerOptionTravelDate,size:"mini",type:"date",placeholder:"Pick day travel","popper-class":"date-picker-z-index"},on:{change:function(t){return e.changePickerTravelDateNewBooking()}},model:{value:e.$v.item_booking.travelDate.$model,callback:function(t){e.$set(e.$v.item_booking.travelDate,"$model",t)},expression:"$v.item_booking.travelDate.$model"}}),e.$v.item_booking.travelDate.$error?i("div",{staticClass:"error-content"},[e._v("Travel date is required\n                            ")]):e._e()],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Start time")]),i("div",{staticClass:"content-item"},[i("el-select",{class:{"input-error":e.$v.item_booking.startTime.$error},attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_1),size:"mini",placeholder:"Choose start time","popper-class":"select-tour-type-new-booking"},model:{value:e.$v.item_booking.startTime.$model,callback:function(t){e.$set(e.$v.item_booking.startTime,"$model",t)},expression:"$v.item_booking.startTime.$model"}},e._l(e.option_start_time,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e.$v.item_booking.startTime.$error?i("div",{staticClass:"error-content"},[e._v("Start time is required\n                            ")]):e._e()],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("End time")]),i("div",{staticClass:"content-item"},[i("el-select",{attrs:{filterable:"",disabled:!(!e.is_view_booking&&e.is_edit_tab_1),size:"mini",placeholder:"Choose end time","popper-class":"select-tour-type-new-booking"},model:{value:e.item_booking.endTime,callback:function(t){e.$set(e.item_booking,"endTime",t)},expression:"item_booking.endTime"}},e._l(e.options_range_time,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Transportation")]),i("div",{staticClass:"content-item"},[i("el-select",{class:{"input-error":e.$v.item_booking.transportation.$error},attrs:{filterable:"",disabled:!(!e.is_view_booking&&e.is_edit_tab_1),size:"mini",placeholder:"Choose transportation","popper-class":"select-group-new-booking"},model:{value:e.$v.item_booking.transportation.$model,callback:function(t){e.$set(e.$v.item_booking.transportation,"$model",t)},expression:"$v.item_booking.transportation.$model"}},e._l(e.options_main_transportation,(function(e){return i("el-option",{key:e.id,attrs:{label:e.plateNumber,value:e.plateNumber}})})),1),e.$v.item_booking.transportation.$error?i("div",{staticClass:"error-content"},[e._v("Transportation is required\n                            ")]):e._e()],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Booking date")]),i("div",{staticClass:"content-item"},[i("el-date-picker",{staticClass:"time-picker-w-100",class:{"input-error":e.$v.item_booking.bookingDate.$error},attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_1),format:"dd-MM-yyyy",size:"mini",type:"date",placeholder:"Pick booking date","popper-class":"date-picker-z-index"},model:{value:e.$v.item_booking.bookingDate.$model,callback:function(t){e.$set(e.$v.item_booking.bookingDate,"$model",t)},expression:"$v.item_booking.bookingDate.$model"}}),e.$v.item_booking.bookingDate.$error?i("div",{staticClass:"error-content"},[e._v("Booking date is required\n                            ")]):e._e()],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Booker name")]),i("div",{staticClass:"content-item"},[i("el-select",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_1),size:"mini",placeholder:"Choose booker","popper-class":"select-group-new-booking",filterable:""},on:{change:e.changeSelectBookerNewBooking},model:{value:e.item_booking.bookerId,callback:function(t){e.$set(e.item_booking,"bookerId",t)},expression:"item_booking.bookerId"}},e._l(e.options_bookers,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Booker email")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{size:"mini",disabled:""},model:{value:e.item_booking.bookerEmail,callback:function(t){e.$set(e.item_booking,"bookerEmail",t)},expression:"item_booking.bookerEmail"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Client :")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{disabled:"",size:"mini"},model:{value:e.item_booking.bookerClient,callback:function(t){e.$set(e.item_booking,"bookerClient",t)},expression:"item_booking.bookerClient"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Sales channel")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{disabled:"",size:"mini"},model:{value:e.item_booking.bookerSaleChannel,callback:function(t){e.$set(e.item_booking,"bookerSaleChannel",t)},expression:"item_booking.bookerSaleChannel"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Ref No")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_1),size:"mini"},model:{value:e.item_booking.refNo,callback:function(t){e.$set(e.item_booking,"refNo",t)},expression:"item_booking.refNo"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Sales in-charge")]),i("div",{staticClass:"content-item"},[i("el-select",{attrs:{filterable:"",disabled:!(!e.is_view_booking&&e.is_edit_tab_1),size:"mini",placeholder:"Choose sale in charge","popper-class":"select-group-new-booking",multiple:""},model:{value:e.item_booking.salesInCharge,callback:function(t){e.$set(e.item_booking,"salesInCharge",t)},expression:"item_booking.salesInCharge"}},e._l(e.options_sale_in_charge,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Email send")]),i("div",{staticClass:"content-item"},[i("el-select",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_1),size:"mini",placeholder:"Choose have email send","popper-class":"select-group-new-booking"},model:{value:e.item_booking.emailSent,callback:function(t){e.$set(e.item_booking,"emailSent",t)},expression:"item_booking.emailSent"}},e._l(e.options_status_yes_no,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Invoice send")]),i("div",{staticClass:"content-item"},[i("el-select",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_1),size:"mini",placeholder:"Choose have invoice send","popper-class":"select-group-new-booking"},model:{value:e.item_booking.invoiceSent,callback:function(t){e.$set(e.item_booking,"invoiceSent",t)},expression:"item_booking.invoiceSent"}},e._l(e.options_invoice_send_yes_no,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Reminder/ Snooze")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_1),size:"mini"},model:{value:e.item_booking.reminderText,callback:function(t){e.$set(e.item_booking,"reminderText",t)},expression:"item_booking.reminderText"}})],1)])])])])]),i("q-tab-panel",{attrs:{name:"traveler"}},[i("div",{staticClass:"tab-traveler-booking-wrapper"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.loading_list_booker,expression:"loading.loading_list_booker"}],staticClass:"row"},[i("div",{staticClass:"flex w-100"},[i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Guests quantity")]),i("div",{staticClass:"content-item"},[e._v(e._s(e.item_booking.guestQuantity))])]),e.tier_and_price[0].active?i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Adult number")]),i("div",{staticClass:"content-item"},[i("el-input-number",{class:{"input-error":e.$v.item_booking.adultNumber.$error},attrs:{min:0,disabled:!(!e.is_view_booking&&e.is_edit_tab_2),size:"mini"},model:{value:e.$v.item_booking.adultNumber.$model,callback:function(t){e.$set(e.$v.item_booking.adultNumber,"$model",t)},expression:"$v.item_booking.adultNumber.$model"}}),e.$v.item_booking.adultNumber.$error?i("div",{staticClass:"error-content"},[e._v("Adult number is required\n                            ")]):e._e()],1)]):e._e(),e.tier_and_price[1].active?i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Child number")]),i("div",{staticClass:"content-item"},[i("el-input-number",{class:{"input-error":e.$v.item_booking.childNumber.$error},attrs:{min:0,disabled:!(!e.is_view_booking&&e.is_edit_tab_2),size:"mini"},model:{value:e.$v.item_booking.childNumber.$model,callback:function(t){e.$set(e.$v.item_booking.childNumber,"$model",t)},expression:"$v.item_booking.childNumber.$model"}}),e.$v.item_booking.childNumber.$error?i("div",{staticClass:"error-content"},[e._v("Child number is required\n                            ")]):e._e()],1)]):e._e(),e.tier_and_price[2].active?i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Infant number")]),i("div",{staticClass:"content-item"},[i("el-input-number",{class:{"input-error":e.$v.item_booking.infantNumber.$error},attrs:{min:0,disabled:!(!e.is_view_booking&&e.is_edit_tab_2),size:"mini"},model:{value:e.$v.item_booking.infantNumber.$model,callback:function(t){e.$set(e.$v.item_booking.infantNumber,"$model",t)},expression:"$v.item_booking.infantNumber.$model"}}),e.$v.item_booking.infantNumber.$error?i("div",{staticClass:"error-content"},[e._v("Infant number is required\n                            ")]):e._e()],1)]):e._e(),e.tier_and_price[3].active?i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Youth number")]),i("div",{staticClass:"content-item"},[i("el-input-number",{class:{"input-error":e.$v.item_booking.youthNumber.$error},attrs:{min:0,disabled:!(!e.is_view_booking&&e.is_edit_tab_2),size:"mini"},model:{value:e.$v.item_booking.youthNumber.$model,callback:function(t){e.$set(e.$v.item_booking.youthNumber,"$model",t)},expression:"$v.item_booking.youthNumber.$model"}}),e.$v.item_booking.youthNumber.$error?i("div",{staticClass:"error-content"},[e._v("Youth number is required\n                            ")]):e._e()],1)]):e._e(),e.tier_and_price[4].active?i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Senior number")]),i("div",{staticClass:"content-item"},[i("el-input-number",{class:{"input-error":e.$v.item_booking.seniorNumber.$error},attrs:{min:0,disabled:!(!e.is_view_booking&&e.is_edit_tab_2),size:"mini"},model:{value:e.$v.item_booking.seniorNumber.$model,callback:function(t){e.$set(e.$v.item_booking.seniorNumber,"$model",t)},expression:"$v.item_booking.seniorNumber.$model"}}),e.$v.item_booking.seniorNumber.$error?i("div",{staticClass:"error-content"},[e._v("Senior number is required\n                            ")]):e._e()],1)]):e._e(),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Lead traveler First name")]),i("div",{staticClass:"content-item"},[i("el-input",{class:{"input-error":e.$v.item_booking.leadTravelerFirstName.$error},attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_2),size:"mini"},model:{value:e.$v.item_booking.leadTravelerFirstName.$model,callback:function(t){e.$set(e.$v.item_booking.leadTravelerFirstName,"$model",t)},expression:"\n                                $v.item_booking.leadTravelerFirstName.$model\n                              "}}),e.$v.item_booking.leadTravelerFirstName.$error?i("div",{staticClass:"error-content"},[e._v("First name lead is required\n                            ")]):e._e()],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Lead traveler Last name")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_2),size:"mini"},model:{value:e.item_booking.leadTravelerLastName,callback:function(t){e.$set(e.item_booking,"leadTravelerLastName",t)},expression:"item_booking.leadTravelerLastName"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Gender")]),i("div",{staticClass:"content-item"},[i("el-select",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_2),size:"mini",placeholder:"Choose gender","popper-class":"select-group-new-booking"},model:{value:e.item_booking.leadTravelerGender,callback:function(t){e.$set(e.item_booking,"leadTravelerGender",t)},expression:"item_booking.leadTravelerGender"}},e._l(e.options_gender,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Other travelers Name")]),i("div",{staticClass:"content-item"},[i("el-select",{staticClass:"w-100 input-add-other-traveler",attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_2),multiple:"",filterable:"","allow-create":"",size:"mini","default-first-option":"",placeholder:"Input and enter to add","popper-class":"select-group-new-booking display-none"},model:{value:e.item_booking.otherTravelerNames,callback:function(t){e.$set(e.item_booking,"otherTravelerNames",t)},expression:"item_booking.otherTravelerNames"}},e._l(e.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Nationality")]),i("div",{staticClass:"content-item"},[i("el-select",{attrs:{filterable:"",disabled:!(!e.is_view_booking&&e.is_edit_tab_2),size:"mini",placeholder:"Choose nationality","popper-class":"select-group-new-booking"},model:{value:e.item_booking.nationality,callback:function(t){e.$set(e.item_booking,"nationality",t)},expression:"item_booking.nationality"}},e._l(e.options_country_world,(function(e){return i("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Passport number")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_2),size:"mini"},model:{value:e.item_booking.passportNumber,callback:function(t){e.$set(e.item_booking,"passportNumber",t)},expression:"item_booking.passportNumber"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Lead traveler Email")]),i("div",{staticClass:"content-item"},[i("el-input",{class:{"input-error":e.$v.item_booking.leadTravelerLastEmail.$error},attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_2),size:"mini"},model:{value:e.$v.item_booking.leadTravelerLastEmail.$model,callback:function(t){e.$set(e.$v.item_booking.leadTravelerLastEmail,"$model",t)},expression:"\n                                $v.item_booking.leadTravelerLastEmail.$model\n                              "}}),e.$v.item_booking.leadTravelerLastEmail.$error?i("div",{staticClass:"error-content"},[e._v("Format email is wrong\n                            ")]):e._e()],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Lead traveler Phone")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_2),size:"mini"},model:{value:e.item_booking.leadTravelerLastPhone,callback:function(t){e.$set(e.item_booking,"leadTravelerLastPhone",t)},expression:"item_booking.leadTravelerLastPhone"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Hotel name")]),i("div",{staticClass:"content-item flex items-center"},[i("div",{staticStyle:{width:"80%"}},[i("el-select",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_2),filterable:"",size:"mini",placeholder:"Hotel name & address","popper-class":"select-group-new-booking"},on:{change:function(t){return e.changeValueHotel()}},model:{value:e.item_booking.hotelName,callback:function(t){e.$set(e.item_booking,"hotelName",t)},expression:"item_booking.hotelName"}},e._l(e.options_hotel,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),i("div",{staticClass:"text-right",staticStyle:{width:"20%"}},[i("q-icon",{attrs:{name:"add",size:"sm",color:"primary"},on:{click:function(t){return e.routerToAddHotel()}}})],1)])]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Hotel address")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_2),size:"mini"},model:{value:e.item_booking.hotelAddress,callback:function(t){e.$set(e.item_booking,"hotelAddress",t)},expression:"item_booking.hotelAddress"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Pickup order")]),i("div",{staticClass:"content-item"},[i("el-select",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_2),size:"mini",placeholder:"Choose order","popper-class":"select-group-new-booking"},model:{value:e.item_booking.pickupOrder,callback:function(t){e.$set(e.item_booking,"pickupOrder",t)},expression:"item_booking.pickupOrder"}},e._l(e.options_pickup_order,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Food notes")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_2),size:"mini",placeholder:"Foods allergy and dietary (if any)"},model:{value:e.item_booking.foodNotes,callback:function(t){e.$set(e.item_booking,"foodNotes",t)},expression:"item_booking.foodNotes"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Other notes")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_2),size:"mini",placeholder:"Other notes (if any)"},model:{value:e.item_booking.otherNotes,callback:function(t){e.$set(e.item_booking,"otherNotes",t)},expression:"item_booking.otherNotes"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Pickup time from")]),i("div",{staticClass:"content-item"},[i("q-input",{staticClass:"input-pickup-time-from",attrs:{disable:!(!e.is_view_booking&&e.is_edit_tab_2),dense:"",outlined:""},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[i("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[i("q-time",{attrs:{"hour-options":e.hourOptions,mask:"hh[:]mm[ ]A"},model:{value:e.item_booking.pickupTimeFrom,callback:function(t){e.$set(e.item_booking,"pickupTimeFrom",t)},expression:"item_booking.pickupTimeFrom"}})],1)],1)]},proxy:!0}],null,!1,956738165),model:{value:e.item_booking.pickupTimeFrom,callback:function(t){e.$set(e.item_booking,"pickupTimeFrom",t)},expression:"item_booking.pickupTimeFrom"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Pickup time to")]),i("div",{staticClass:"content-item"},[i("q-input",{staticClass:"input-pickup-time-from",attrs:{dense:"",disable:!(!e.is_view_booking&&e.is_edit_tab_2),outlined:""},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[i("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[i("q-time",{attrs:{"hour-options":e.hourOptions,mask:"hh[:]mm[ ]A"},model:{value:e.item_booking.pickupTimeTo,callback:function(t){e.$set(e.item_booking,"pickupTimeTo",t)},expression:"item_booking.pickupTimeTo"}})],1)],1)]},proxy:!0}],null,!1,1864821080),model:{value:e.item_booking.pickupTimeTo,callback:function(t){e.$set(e.item_booking,"pickupTimeTo",t)},expression:"item_booking.pickupTimeTo"}})],1)])])])])]),i("q-tab-panel",{attrs:{name:"revenue"}},[i("div",{staticClass:"tab-revenue-booking-wrapper q-gutter-sm"},[i("div",{staticClass:"number-and-price-wrapper flex items-center"},[i("div",{staticClass:"item-number-price"}),i("div",{staticClass:"item-number-price text-item-number justify-end"},[e._v("Price")]),i("div",{staticClass:"item-number-price text-item-number justify-end"},[e._v("Quantity")]),i("div",{staticClass:"item-number-price text-item-number justify-end"},[e._v("Sales")]),e._l(e.tier_and_price,(function(t,o){return i("div",{key:o,staticClass:"w-100 items-center"},[t.active?i("div",{staticClass:"flex w-100"},[i("div",{staticClass:"item-number-price text-item-number"},[e._v(e._s(t.name))]),i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price text-right",attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_3)},nativeOn:{blur:function(i){return e.refreshTierAndPrice(t)}},model:{value:t.price,callback:function(i){e.$set(t,"price",i)},expression:"item.price"}},"money",e.money_option,!1))],1),i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price text-right",attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_3)},nativeOn:{change:function(i){return e.changeInputQuantityTierAndPrice(t)},blur:function(i){return e.refreshTierAndPrice(t)}},model:{value:t.quantity,callback:function(i){e.$set(t,"quantity",i)},expression:"item.quantity"}},"money",e.money_option,!1))],1),i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price text-right",attrs:{disabled:!0},model:{value:t.sales,callback:function(i){e.$set(t,"sales",i)},expression:"item.sales"}},"money",e.money_option,!1))],1)]):e._e()])})),i("div",{staticClass:"q-mt-md flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"},[i("b",[e._v("Sales")])]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end"},[i("b",[e._v("\n                            "+e._s(e._f("currency")(e.total_sales_new_booking,e.option_filter))+"\n                          ")])])]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"},[e._v("Other sales")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end"},[i("b",[e._v("\n                            "+e._s(e._f("currency")(e.total_other_sales_new_booking,e.option_filter))+"\n                          ")])])]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end"},[e._v("Surcharge")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.$v.item_booking.surcharge.$model?i("div",{staticClass:"item-number-price justify-end"},[i("money",e._b({staticClass:"input-number-table-price text-right",class:{"input-error":e.$v.item_booking.surcharge.$error},attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_3)},nativeOn:{blur:function(t){return e.changeSurcharge(t)}},model:{value:e.$v.item_booking.surcharge.$model,callback:function(t){e.$set(e.$v.item_booking.surcharge,"$model",t)},expression:"$v.item_booking.surcharge.$model"}},"money",e.money_option,!1)),e.$v.item_booking.surcharge.$error?i("div",{staticClass:"error-content"},[e._v("Surcharge is required\n                          ")]):e._e()],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end"},[e._v("Sales commission")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.$v.item_booking.commissionFee.$model?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price text-right",class:{"input-error":e.$v.item_booking.commissionFee.$error},attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_3)},nativeOn:{blur:function(t){return e.changecommissionFee()}},model:{value:e.$v.item_booking.commissionFee.$model,callback:function(t){e.$set(e.$v.item_booking.commissionFee,"$model",t)},expression:"$v.item_booking.commissionFee.$model"}},"money",e.money_option,!1)),e.$v.item_booking.commissionFee.$error?i("div",{staticClass:"error-content"},[e._v("CommissionFee is required\n                          ")]):e._e()],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end",staticStyle:{width:"40%"}},[e._v("Sales from service cancellation\n                        ")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.cancellationFee?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price text-right",attrs:{disabled:!0},model:{value:e.item_booking.cancellationFee,callback:function(t){e.$set(e.item_booking,"cancellationFee",t)},expression:"item_booking.cancellationFee"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end"},[e._v("Other sales")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.$v.item_booking.othersIncreaseFee.$model?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price text-right",class:{"input-error":e.$v.item_booking.othersIncreaseFee.$error},attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_3)},nativeOn:{blur:function(t){return e.changeOtherIncreaseFee()}},model:{value:e.$v.item_booking.othersIncreaseFee.$model,callback:function(t){e.$set(e.$v.item_booking.othersIncreaseFee,"$model",t)},expression:"$v.item_booking.othersIncreaseFee.$model"}},"money",e.money_option,!1)),e.$v.item_booking.othersIncreaseFee.$error?i("div",{staticClass:"error-content"},[e._v("Other sales is required\n                          ")]):e._e()],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"},[e._v("Gross sales")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.grossSales?i("div",{staticClass:"item-number-price-trans justify-end"},[i("strong",[e._v("\n                            "+e._s(e._f("currency")(e.item_booking.grossSales,e.option_filter))+"\n                          ")])]):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"},[e._v("Sales deducttion")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"})]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end"},[e._v("Coupon Code")]),i("div",{staticClass:"item-number-price-trans"},[e.is_view_booking||e.is_add_booking?e._e():i("q-icon",{attrs:{name:"info",color:"primary",size:"sm"}},[i("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle"}},[i("span",{staticStyle:{"font-size":"13px"}},[e._v("\n                                When update 'Gross sales', please retype\n                                'Coupon Code' to recalculate coupon\n                                value\n                              ")])])],1)],1),i("div",{staticClass:"item-number-price"},[i("el-input",{staticClass:"input-number-table-price",attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_3)||""==e.item_booking.couponCode&&null==e.item_booking.couponCode,size:"mini"},on:{blur:function(t){return e.checkCouponCode()}},model:{value:e.item_booking.couponCode,callback:function(t){e.$set(e.item_booking,"couponCode",t)},expression:"item_booking.couponCode"}})],1)]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end"},[e._v("Coupon value")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.couponValue?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price text-right",attrs:{disabled:!0},model:{value:e.item_booking.couponValue,callback:function(t){e.$set(e.item_booking,"couponValue",t)},expression:"item_booking.couponValue"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end"},[e._v("Discount")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.$v.item_booking.discount.$model?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price text-right",class:{"input-error":e.$v.item_booking.discount.$error},attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_3)},model:{value:e.$v.item_booking.discount.$model,callback:function(t){e.$set(e.$v.item_booking.discount,"$model",t)},expression:"$v.item_booking.discount.$model"}},"money",e.money_option,!1)),e.$v.item_booking.discount.$error?i("div",{staticClass:"error-content"},[e._v("Discount is required\n                          ")]):e._e()],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end"},[e._v("Service cancellation")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.cancellationSales?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price text-right",attrs:{disabled:!0},model:{value:e.item_booking.cancellationSales,callback:function(t){e.$set(e.item_booking,"cancellationSales",t)},expression:"item_booking.cancellationSales"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end"},[e._v("Other deductions")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.$v.item_booking.otherDecreaseFee.$model?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price text-right",class:{"input-error":e.$v.item_booking.otherDecreaseFee.$error},attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_3)},model:{value:e.$v.item_booking.otherDecreaseFee.$model,callback:function(t){e.$set(e.$v.item_booking.otherDecreaseFee,"$model",t)},expression:"$v.item_booking.otherDecreaseFee.$model"}},"money",e.money_option,!1)),e.$v.item_booking.otherDecreaseFee.$error?i("div",{staticClass:"error-content"},[e._v("Others is required\n                          ")]):e._e()],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"},[e._v("Net Sales")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end"},[i("strong",[e._v("\n                            "+e._s(e._f("currency")(e.total_net_sales_new_booking,e.option_filter))+"\n                          ")])])]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"},[e._v("Tax rate (%)")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price"},[i("el-input-number",{staticClass:"input-number-table-price text-right",class:{"input-error":e.$v.item_booking.taxRate.$error},attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_3),max:100,min:0,size:"mini",controls:!1},model:{value:e.$v.item_booking.taxRate.$model,callback:function(t){e.$set(e.$v.item_booking.taxRate,"$model",t)},expression:"$v.item_booking.taxRate.$model"}}),e.$v.item_booking.taxRate.$error?i("div",{staticClass:"error-content"},[e._v("Tax rate is required\n                          ")]):e._e()],1)]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"},[e._v("Tax amount")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.taxAmount?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price text-right",attrs:{disabled:!0},model:{value:e.item_booking.taxAmount,callback:function(t){e.$set(e.item_booking,"taxAmount",t)},expression:"item_booking.taxAmount"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"},[e._v("Net Sales excluded Tax")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.netSalesBeforeTax?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price text-right",attrs:{disabled:!0},model:{value:e.item_booking.netSalesBeforeTax,callback:function(t){e.$set(e.item_booking,"netSalesBeforeTax",t)},expression:"item_booking.netSalesBeforeTax"}},"money",e.money_option,!1))],1):e._e()])],2)])]),i("q-tab-panel",{attrs:{name:"receivables"}},[i("div",{staticClass:"tab-receivables-booking-wrapper"},[i("div",{staticClass:"number-and-price-wrapper flex items-center"},[i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"},[e._v("Receivables")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.receivables?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price text-right",attrs:{disabled:!0},model:{value:e.item_booking.receivables,callback:function(t){e.$set(e.item_booking,"receivables",t)},expression:"item_booking.receivables"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"},[e._v("Deposit requested")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.depositRequested?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price text-right",attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_4)},model:{value:e.item_booking.depositRequested,callback:function(t){e.$set(e.item_booking,"depositRequested",t)},expression:"item_booking.depositRequested"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"},[e._v("Deposit received")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.depositReceived?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price text-right",attrs:{disabled:!0},model:{value:e.item_booking.depositReceived,callback:function(t){e.$set(e.item_booking,"depositReceived",t)},expression:"item_booking.depositReceived"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"},[e._v("Remaining amount")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.remainingAmount?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price text-right",attrs:{disabled:!0},model:{value:e.item_booking.remainingAmount,callback:function(t){e.$set(e.item_booking,"remainingAmount",t)},expression:"item_booking.remainingAmount"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"},[e._v("Final payment received")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.paymentReceived?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price text-right",attrs:{disabled:!0},model:{value:e.item_booking.paymentReceived,callback:function(t){e.$set(e.item_booking,"paymentReceived",t)},expression:"item_booking.paymentReceived"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"},[e._v("Refund to guests")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.refundToGuests?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price text-right",attrs:{disabled:!0},model:{value:e.item_booking.refundToGuests,callback:function(t){e.$set(e.item_booking,"refundToGuests",t)},expression:"item_booking.refundToGuests"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"},[e._v("Balance")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.balance?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price text-right",attrs:{disabled:!0},model:{value:e.item_booking.balance,callback:function(t){e.$set(e.item_booking,"balance",t)},expression:"item_booking.balance"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-lg w-100"},[i("el-tabs",{attrs:{type:"border-card"}},[i("el-tab-pane",{attrs:{label:"Money receive"}},[i("div",{staticClass:"no-money-receive q-mb-lg"},[i("q-btn",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_4)||!e.is_view_booking&&e.is_edit_tab_4&&-1!=e.item_booking.status&&3!=e.item_booking.status&&4!=e.item_booking.status&&5!=e.item_booking.status&&6!=e.item_booking.status&&7!=e.item_booking.status&&8!=e.item_booking.status&&9!=e.item_booking.status,icon:"add",label:"Add money receive",size:"sm",color:"primary"},on:{click:function(t){return e.triggerOpenModalAddMoneyReceive()}}})],1),i("div",{staticClass:"list-money-receive"},e._l(e.list_money_receive_temp,(function(t,o){return i("div",{key:o,staticClass:"item-money-receive"},[i("div",{staticClass:"flex items-center w-100"},[t.created?i("div",{staticClass:"item-money-receive-trans"},[e._v("Payment time :\n                                  ")]):i("div",{staticClass:"item-money-receive-trans"}),i("div",{staticClass:"item-money-receive-trans"},[t.lastModified?i("span",[e._v("\n                                      "+e._s(e._f("formatDateSystem")(t.lastModified))+"\n                                    ")]):t.created?i("span",[e._v(e._s(e._f("formatDateSystem")(t.created)))]):e._e()]),i("div",{staticClass:"item-money-receive-trans justify-center"},[i("q-btn",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_4),icon:"edit",color:"primary",size:"sm"},on:{click:function(i){return e.triggerEditMoneyReceive(t,o)}}})],1)]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"item-money-receive-trans"},[e._v("Amount :")]),i("div",{staticClass:"item-money-receive-trans"},[e._v("\n                                    "+e._s(e._f("currency")(t.amount,e.option_filter))+"\n                                  ")]),i("div",{staticClass:"item-money-receive-trans"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"item-money-receive-trans"},[e._v("From :")]),i("div",{staticClass:"item-money-receive-trans"},[e._v(e._s(e.getPaymentTypeName(t.paymentType))+"\n                                  ")]),i("div",{staticClass:"item-money-receive-trans"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"item-money-receive-trans"},[e._v("Classify :")]),i("div",{staticClass:"item-money-receive-trans"},[e._v(e._s(e.getClassifyName(t.classify))+"\n                                  ")]),i("div",{staticClass:"item-money-receive-trans"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"item-money-receive-trans"},[e._v("Bank fee :")]),i("div",{staticClass:"item-money-receive-trans"},[e._v(e._s(e._f("currency")(t.fee,e.option_filter))+"\n                                  ")]),i("div",{staticClass:"item-money-receive-trans"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"item-money-receive-trans"},[e._v("Notes :")]),i("div",{staticClass:"item-money-receive-trans"},[e._v(e._s(t.notes))]),i("div",{staticClass:"item-money-receive-trans"})]),e.is_view_booking?e._e():i("div",{staticClass:"text-center q-mt-md"},[i("q-btn",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_4),icon:"delete",color:"negative",label:"Delete",size:"sm"},on:{click:function(i){return e.deleteMoneyReceive(t)}}})],1)])})),0)]),i("el-tab-pane",{attrs:{label:"Refund"}},[i("div",{staticClass:"no-money-receive q-mb-lg"},[i("q-btn",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_4)||e.item_booking.balance>=0||!e.is_view_booking&&e.is_edit_tab_4&&-1!=e.item_booking.status&&3!=e.item_booking.status&&4!=e.item_booking.status&&5!=e.item_booking.status&&6!=e.item_booking.status&&7!=e.item_booking.status&&8!=e.item_booking.status&&9!=e.item_booking.status,icon:"add",label:"Add refund",size:"sm",color:"primary"},on:{click:function(t){return e.triggerOpenModalAddRefund()}}})],1),i("div",{staticClass:"list-money-receive"},e._l(e.list_refund_temp,(function(t,o){return i("div",{key:o,staticClass:"item-money-receive"},[i("div",{staticClass:"flex items-center w-100"},[t.created?i("div",{staticClass:"item-money-receive-trans"},[e._v("Refund :\n                                  ")]):i("div",{staticClass:"item-money-receive-trans"}),i("div",{staticClass:"item-money-receive-trans"},[t.lastModified?i("span",[e._v("\n                                      "+e._s(e._f("formatDateSystem")(t.lastModified))+"\n                                    ")]):t.created?i("span",[e._v(e._s(e._f("formatDateSystem")(t.created)))]):e._e()]),i("div",{staticClass:"item-money-receive-trans justify-center"},[i("q-btn",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_4),icon:"edit",color:"primary",size:"sm"},on:{click:function(i){return e.triggerEditRefund(t,o)}}})],1)]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"item-money-receive-trans"},[e._v("Amount :")]),i("div",{staticClass:"item-money-receive-trans"},[e._v("\n                                    "+e._s(e._f("currency")(t.amount,e.option_filter))+"\n                                  ")]),i("div",{staticClass:"item-money-receive-trans"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"item-money-receive-trans"},[e._v("From :")]),i("div",{staticClass:"item-money-receive-trans"},[e._v(e._s(e.getPaymentTypeName(t.paymentType))+"\n                                  ")]),i("div",{staticClass:"item-money-receive-trans"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"item-money-receive-trans"},[e._v("Bank fee :")]),i("div",{staticClass:"item-money-receive-trans"},[e._v(e._s(e._f("currency")(t.fee,e.option_filter))+"\n                                  ")]),i("div",{staticClass:"item-money-receive-trans"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"item-money-receive-trans"},[e._v("Notes :")]),i("div",{staticClass:"item-money-receive-trans"},[e._v(e._s(t.notes))]),i("div",{staticClass:"item-money-receive-trans"})]),e.is_view_booking?e._e():i("div",{staticClass:"text-center q-mt-md"},[i("q-btn",{attrs:{disabled:!(!e.is_view_booking&&e.is_edit_tab_4),icon:"delete",color:"negative",label:"Delete",size:"sm"},on:{click:function(i){return e.deleteRefund(t)}}})],1)])})),0)])],1)],1)])])])],1)],1)],1),i("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[i("div",{staticClass:"q-pa-sm"},[e.is_add_booking?i("div",[i("div",{staticClass:"w-100"},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{label:"cancel",color:"white",size:"sm","text-color":"black",icon:"cancel"},on:{click:function(t){e.list_will_deleted_receivable=[]}}}),i("q-btn",{attrs:{label:"Add booking",color:"primary",size:"sm",icon:"add"},on:{click:function(t){return e.addBookingFinal()}}})],1)]):i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{label:"Close",size:"sm",color:"red",icon:"cancel"}})],1)])])],1)],1),i("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale"},model:{value:e.open_modal_add_refund,callback:function(t){e.open_modal_add_refund=t},expression:"open_modal_add_refund"}},[i("q-card",{staticClass:"bg-primary text-white",staticStyle:{width:"400px"}},[e.is_edit_refund?i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("Edit refund")]):i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("Add refund")]),i("q-card-actions",{staticClass:"bg-white text-black"},[i("div",{staticClass:"add-money-receive-wrapper"},[i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Amount :")]),i("div",{staticClass:"content"},[i("money",e._b({staticClass:"input-number-custom-1",class:{"input-error":e.$v.obj_refund_temp.amount.$error},model:{value:e.$v.obj_refund_temp.amount.$model,callback:function(t){e.$set(e.$v.obj_refund_temp.amount,"$model",t)},expression:"$v.obj_refund_temp.amount.$model"}},"money",e.money_option,!1)),e.$v.obj_refund_temp.amount.$error?i("div",{staticClass:"error-content"},[e._v("Amount is required\n                  ")]):e._e()],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("From :")]),i("div",{staticClass:"content"},[i("el-select",{attrs:{size:"mini",placeholder:"Choose from","popper-class":"select-group-new-booking"},model:{value:e.obj_refund_temp.paymentType,callback:function(t){e.$set(e.obj_refund_temp,"paymentType",t)},expression:"obj_refund_temp.paymentType"}},e._l(e.option_type_of_payment,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Bank fee :")]),i("div",{staticClass:"content"},[i("money",e._b({staticClass:"input-number-custom-1",class:{"input-error":e.$v.obj_refund_temp.fee.$error},model:{value:e.$v.obj_refund_temp.fee.$model,callback:function(t){e.$set(e.$v.obj_refund_temp.fee,"$model",t)},expression:"$v.obj_refund_temp.fee.$model"}},"money",e.money_option,!1)),e.$v.obj_refund_temp.fee.$error?i("div",{staticClass:"error-content"},[e._v("Bank fee is required\n                  ")]):e._e()],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Notes :")]),i("div",{staticClass:"content"},[i("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:e.obj_refund_temp.notes,callback:function(t){e.$set(e.obj_refund_temp,"notes",t)},expression:"obj_refund_temp.notes"}})],1)])])]),i("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[e.is_edit_refund?i("div",[i("q-btn",{attrs:{label:"Save",color:"primary",size:"sm",icon:"check"},on:{click:function(t){return e.editRefund()}}})],1):i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{label:"cancel",color:"white",size:"sm","text-color":"black",icon:"cancel"}}),i("q-btn",{attrs:{label:"Add",color:"primary",size:"sm",icon:"add"},on:{click:function(t){return e.addRefund()}}})],1)])],1)],1),i("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale"},model:{value:e.open_modal_add_money_receive,callback:function(t){e.open_modal_add_money_receive=t},expression:"open_modal_add_money_receive"}},[i("q-card",{staticClass:"bg-primary text-white",staticStyle:{width:"400px"}},[e.is_edit_money_receive?i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("Edit money receive")]):i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("Add money receive\n          ")]),i("q-card-actions",{staticClass:"bg-white text-black"},[i("div",{staticClass:"add-money-receive-wrapper"},[i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Amount :")]),i("div",{staticClass:"content"},[i("money",e._b({staticClass:"input-number-custom-1",class:{"input-error":e.$v.obj_money_receive_temp.amount.$error},model:{value:e.$v.obj_money_receive_temp.amount.$model,callback:function(t){e.$set(e.$v.obj_money_receive_temp.amount,"$model",t)},expression:"$v.obj_money_receive_temp.amount.$model"}},"money",e.money_option,!1)),e.$v.obj_money_receive_temp.amount.$error?i("div",{staticClass:"error-content"},[e._v("Amount is required\n                  ")]):e._e()],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("From :")]),i("div",{staticClass:"content"},[i("el-select",{attrs:{size:"mini",placeholder:"Choose from","popper-class":"select-group-new-booking"},model:{value:e.obj_money_receive_temp.paymentType,callback:function(t){e.$set(e.obj_money_receive_temp,"paymentType",t)},expression:"obj_money_receive_temp.paymentType"}},e._l(e.option_type_of_payment,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Classify :")]),i("div",{staticClass:"content"},[i("el-select",{attrs:{size:"mini",placeholder:"Choose classify","popper-class":"select-group-new-booking"},model:{value:e.obj_money_receive_temp.classify,callback:function(t){e.$set(e.obj_money_receive_temp,"classify",t)},expression:"obj_money_receive_temp.classify"}},e._l(e.options_classify_new_payment,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Bank fee :")]),i("div",{staticClass:"content"},[i("money",e._b({staticClass:"input-number-custom-1",class:{"input-error":e.$v.obj_money_receive_temp.fee.$error},model:{value:e.$v.obj_money_receive_temp.fee.$model,callback:function(t){e.$set(e.$v.obj_money_receive_temp.fee,"$model",t)},expression:"$v.obj_money_receive_temp.fee.$model"}},"money",e.money_option,!1)),e.$v.obj_money_receive_temp.fee.$error?i("div",{staticClass:"error-content"},[e._v("Bank fee is required\n                  ")]):e._e()],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Notes :")]),i("div",{staticClass:"content"},[i("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:e.obj_money_receive_temp.notes,callback:function(t){e.$set(e.obj_money_receive_temp,"notes",t)},expression:"obj_money_receive_temp.notes"}})],1)])])]),i("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[e.is_edit_money_receive?i("div",[i("q-btn",{attrs:{label:"Save",color:"primary",size:"sm",icon:"check"},on:{click:function(t){return e.editMoneyReceive()}}})],1):i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{label:"cancel",color:"white",size:"sm","text-color":"black",icon:"cancel"}}),i("q-btn",{attrs:{label:"Add",color:"primary",size:"sm",icon:"add"},on:{click:function(t){return e.addMoneyReceive()}}})],1)])],1)],1),i("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale"},model:{value:e.open_modal_choose_email_template,callback:function(t){e.open_modal_choose_email_template=t},expression:"open_modal_choose_email_template"}},[i("q-card",{staticClass:"bg-primary text-white",staticStyle:{width:"400px"}},[i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("Choose email template")]),i("q-card-actions",{staticClass:"bg-white text-black"},[i("div",{staticClass:"choose-email-template-wrapper w-100 q-pt-md q-pb-md q-pl-sm q-pr-sm"},[i("el-select",{staticClass:"w-100",attrs:{size:"medium",placeholder:"Choose email template","popper-class":"select-group-new-booking"},model:{value:e.value_email_template,callback:function(t){e.value_email_template=t},expression:"value_email_template"}},e._l(e.list_email_template,(function(e){return i("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)],1)]),i("q-separator"),i("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[i("div",[i("q-btn",{staticClass:"q-mr-md",attrs:{label:"View email",color:"white",size:"sm","text-color":"black",icon:"pageview"},on:{click:function(t){return e.routerToViewEmail()}}})],1)])],1)],1),i("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale"},model:{value:e.open_modal_cancel_booking,callback:function(t){e.open_modal_cancel_booking=t},expression:"open_modal_cancel_booking"}},[i("q-card",{staticClass:"bg-primary text-white",staticStyle:{width:"400px"}},[i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("Cancel booking")]),i("q-card-actions",{staticClass:"bg-white text-black"},[i("div",{staticClass:"add-money-receive-wrapper"},[i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Cancellation sales :")]),i("div",{staticClass:"content"},[i("el-input-number",{staticClass:"input-number-custom",attrs:{disabled:!0,size:"mini",controls:!1},model:{value:e.item_booking.cancellationSales,callback:function(t){e.$set(e.item_booking,"cancellationSales",t)},expression:"item_booking.cancellationSales"}})],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Cancellation fee :")]),i("div",{staticClass:"content"},[i("el-input-number",{staticClass:"input-number-custom",attrs:{size:"mini",controls:!1},model:{value:e.item_booking.cancellationFee,callback:function(t){e.$set(e.item_booking,"cancellationFee",t)},expression:"item_booking.cancellationFee"}})],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Notes :")]),i("div",{staticClass:"content"},[i("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:e.item_booking.cancellationNotes,callback:function(t){e.$set(e.item_booking,"cancellationNotes",t)},expression:"item_booking.cancellationNotes"}})],1)])])]),i("q-separator"),i("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{label:"Cancel",color:"white",size:"sm","text-color":"black",icon:"cancel"}}),i("q-btn",{attrs:{label:"Update",color:"primary",size:"sm",icon:"edit"},on:{click:function(t){return e.updateCancelBooking()}}})],1)])],1)],1),i("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale"},model:{value:e.open_modal_view_invoice_booking,callback:function(t){e.open_modal_view_invoice_booking=t},expression:"open_modal_view_invoice_booking"}},[i("q-card",{staticClass:"bg-primary text-white",staticStyle:{width:"1100px","max-width":"1100px"}},[i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("View invoice booking")]),i("q-card-actions",{staticClass:"bg-white text-black"},[i("view-invoice-booking",{attrs:{info_booking:e.info_booking_view_invoice}})],1),i("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{label:"Cancel",color:"white",size:"sm","text-color":"black",icon:"cancel"}})],1)])],1)],1),i("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale"},model:{value:e.open_modal_view_detail_tour,callback:function(t){e.open_modal_view_detail_tour=t},expression:"open_modal_view_detail_tour"}},[i("q-card",{staticClass:"bg-primary text-white",staticStyle:{width:"1100px","max-width":"1100px"}},[i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("View detail tour")]),i("q-card-actions",{staticClass:"bg-white text-black",staticStyle:{padding:"0px!important"}},[i("iframe",{attrs:{src:e.tour_detail.src,id:"frame_view_detail_tour"}})]),i("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{label:"Cancel",color:"white",size:"sm","text-color":"black",icon:"cancel"}})],1)])],1)],1)],1):e._e()]),i("div",{staticClass:"view-on-mobile"},[i("list-bookings-mobile",{ref:"listBookingMobile",attrs:{options_hotel:e.options_hotel,list_hotel:e.list_hotel,list_product:e.list_product,list_booking:e.list_booking,options_status_booking:e.options_status_booking,option_tour_type:e.option_tour_type,option_tour_type_filter:e.option_tour_type_filter,options_main_transportation:e.options_main_transportation,options_main_transportation_filter:e.options_main_transportation_filter,options_bookers:e.options_bookers,options_bookers_filter:e.options_bookers_filter,options_sale_in_charge:e.options_sale_in_charge,loading_list_booking:e.loading.loading_list_booking,item_booking:e.item_booking,tier_and_price:e.tier_and_price,option_filter:e.option_filter,option_type_of_payment:e.option_type_of_payment,options_classify_new_payment:e.options_classify_new_payment,options_country_world_filter:e.options_country_world_filter,is_done_add_booking_mobile:e.is_done_add_booking_mobile,is_read:e.is_read,is_add:e.is_add,is_delete:e.is_delete,is_group:e.is_group,is_cancel:e.is_cancel,is_read_tab_1:e.is_read_tab_1,is_read_tab_2:e.is_read_tab_2,is_read_tab_3:e.is_read_tab_3,is_read_tab_4:e.is_read_tab_4,is_update_tab_1:e.is_update_tab_1,is_update_tab_2:e.is_update_tab_2,is_update_tab_3:e.is_update_tab_3,is_update_tab_4:e.is_update_tab_4,is_processed_booking:e.is_processed_booking,pagination:e.pagination,option_price_options:e.option_price_options},on:{doFilterBooking:e.doFilterBooking,viewDetailBookingFromMobile:e.viewDetailBookingFromMobile,doSaveAddBookingMobile:e.doSaveAddBookingMobile,editBookingDone:e.editBookingDoneMobile,hideHeaderUnprocessedTab:e.hideHeaderUnprocessedTab,groupBookingsFromMobile:e.groupBookingsFromMobile,reloadListBooking:e.reloadListBooking,changePaginationMobile:e.changePaginationMobile}})],1)])},a=[],n=(i("8e6e"),i("8a81"),i("ac6a"),i("cadf"),i("456d"),i("55dd"),i("8993")),s=i.n(n),r=(i("6b54"),i("06db"),i("28a5"),i("f751"),i("7f7f"),i("c47a")),l=i.n(r),c=(i("c5f6"),i("e30a")),_=i.n(c),d=(i("b40d"),i("2f62")),u=i("b5ae"),m=i("391a"),p=i("ab2a"),b=i("d5b7"),g=i("a0d5"),v=i("e71f"),k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("header-mobile",{ref:"headerBooking",attrs:{name_header_mobile:e.nameHeader,view_detail:!e.is_view_list_booking,add_booking:e.is_add_booking,is_edit_booking:e.trigger_edit_booking,list_choosed_booking:e.listChoosedBooking,choosed_change_group:e.is_holding_booking,booking_change_group:e.booking_change_group,option_tour_type_filter:e.option_tour_type_filter,options_main_transportation_filter:e.options_main_transportation_filter,options_bookers_filter:e.options_bookers_filter,is_processed_booking:e.is_processed_booking,options_sale_in_charge:e.options_sale_in_charge,options_country_world_filter:e.options_country_world_filter},on:{backToList:e.backToListBooking,clearALlBookingChoosed:e.resetChoosedBooking,clearBookingChoosedToChangeGroup:e.clearBookingChoosedChangeGroup,doFilterBooking:e.doFilterBooking,addBookingMobile:e.doAddBookingMobile,doTriggerSaveAddNewBookingMobile:e.doTriggerSaveAddNewBookingMobile,doTriggerSaveEditBookingMobile:e.doTriggerSaveEditBookingMobile,triggerEditBooking:function(t){return e.triggerEditBooking()},triggerControlBooking:e.triggerControlBooking,groupBookingFromMobile:e.groupBookingFromMobile}}),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading_list_booking,expression:"loading_list_booking"}],staticClass:"list-booking-mobile-wrapper",attrs:{id:"example-content"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.is_view_list_booking&&!e.is_add_booking,expression:"is_view_list_booking && !is_add_booking"}],staticClass:"body-list-booking-mobile",class:{"unprocessed-booking":e.is_processed_booking}},[e.list_booking_grouped.length>0?i("div",[e._l(e.list_booking_grouped,(function(t,o){return i("div",{key:o,staticClass:"group-list-booking",attrs:{id:"affix-test-"+o}},[e.is_processed_booking?i("div",[i("affix",{staticClass:"sidebar-menu",attrs:{"relative-element-selector":"#affix-test-"+o,offset:{top:86,bottom:0}}},[i("div",{staticClass:"date-travel"},[e._v(e._s(e._f("formatDateSystem")(t.date_travel)))])]),i("div",{staticClass:"date-travel-temp"},[e._v(e._s(e._f("formatDateSystem")(t.date_travel)))]),i("div",{staticClass:"list-booking"},e._l(t.list_booking,(function(t,o){return i("div",{directives:[{name:"touch-hold",rawName:"v-touch-hold.mouse",value:e.handleHold,expression:"handleHold",modifiers:{mouse:!0}}],key:o,staticClass:"booking",class:{"dark-background":e.is_holding_booking,"choosed-change-group":t.choosed_change_group},attrs:{id:t.id},on:{click:function(i){return e.viewDetailBookingMobile(t)}}},[i("div",{staticClass:"name-booking-wrapper"},[i("div",{staticClass:"content-name"},[i("div",{staticClass:"status-and-tour flex justify-between w-100"},[i("div",{staticClass:"status-booking-wrapper",staticStyle:{width:"80%"}},[0==t.status?i("div",{staticClass:"status-booking custom-color-2"},[e._v("Pending\n                        ")]):e._e(),1==t.status?i("div",{staticClass:"status-booking custom-color-3"},[e._v("Waiting\n                        ")]):e._e(),2==t.status?i("div",{staticClass:"status-booking custom-color-4"},[e._v("Reject\n                        ")]):e._e(),3==t.status?i("div",{staticClass:"status-booking custom-color-5"},[e._v("CF-Unpaid\n                        ")]):e._e(),4==t.status?i("div",{staticClass:"status-booking custom-color-6"},[e._v("CF-Deposit\n                        ")]):e._e(),5==t.status?i("div",{staticClass:"status-booking custom-color-7"},[e._v("CF-Paid\n                        ")]):e._e(),6==t.status?i("div",{staticClass:"status-booking custom-color-8"},[e._v("DD-Paid\n                        ")]):e._e(),7==t.status?i("div",{staticClass:"status-booking custom-color-9"},[e._v("DD-Due\n                        ")]):e._e(),8==t.status?i("div",{staticClass:"status-booking custom-color-10"},[e._v("Cancel\n                        ")]):e._e(),9==t.status?i("div",{staticClass:"status-booking custom-color-11"},[e._v("Others\n                        ")]):e._e()]),i("div",{staticClass:"name-tour"},[e._v(e._s(e.getNamegGroupBooking(t.groupBooking)))])]),i("div",{staticClass:"text-booking w-100"},[e._v(e._s(e.formatNameBooking(t)))])])]),i("q-separator",{attrs:{color:"custom-color-1"}})],1)})),0)],1):i("div",[i("affix",{staticClass:"sidebar-menu",attrs:{"relative-element-selector":"#affix-test-"+o,offset:{top:50,bottom:0}}},[i("div",{staticClass:"date-travel"},[i("div",{class:{"text-detail":e.isCurrentDate(t.date_travel)}},[e._v(e._s(e._f("formatDateSystem")(t.date_travel))+"\n                ")])])]),i("div",{staticClass:"date-travel-temp"},[i("div",[e._v(e._s(e._f("formatDateSystem")(t.date_travel)))])]),i("div",{staticClass:"list-booking"},e._l(t.list_booking,(function(t,o){return i("div",{directives:[{name:"touch-hold",rawName:"v-touch-hold.mouse",value:e.handleHold,expression:"handleHold",modifiers:{mouse:!0}}],key:o,staticClass:"booking",class:{"dark-background":e.is_holding_booking,"choosed-change-group":t.choosed_change_group},attrs:{id:t.id},on:{click:function(i){return e.viewDetailBookingMobile(t)}}},[i("div",{staticClass:"name-booking-wrapper"},[t.is_grouped?i("div",[i("q-icon",{staticClass:"q-mr-sm",attrs:{name:"check",size:"xs",color:"primary"}})],1):i("q-checkbox",{staticClass:"q-mr-sm",attrs:{color:"primary",dense:""},model:{value:t.check_select,callback:function(i){e.$set(t,"check_select",i)},expression:"item_booking.check_select"}}),i("div",{staticClass:"content-name"},[i("div",{staticClass:"status-and-tour flex justify-between w-100"},[i("div",{staticClass:"status-booking-wrapper",staticStyle:{width:"80%"}},[0==t.status?i("div",{staticClass:"status-booking custom-color-2"},[e._v("Pending\n                        ")]):e._e(),1==t.status?i("div",{staticClass:"status-booking custom-color-3"},[e._v("Waiting\n                        ")]):e._e(),2==t.status?i("div",{staticClass:"status-booking custom-color-4"},[e._v("Reject\n                        ")]):e._e(),3==t.status?i("div",{staticClass:"status-booking custom-color-5"},[e._v("CF-Unpaid\n                        ")]):e._e(),4==t.status?i("div",{staticClass:"status-booking custom-color-6"},[e._v("CF-Deposit\n                        ")]):e._e(),5==t.status?i("div",{staticClass:"status-booking custom-color-7"},[e._v("CF-Paid\n                        ")]):e._e(),6==t.status?i("div",{staticClass:"status-booking custom-color-8"},[e._v("DD-Paid\n                        ")]):e._e(),7==t.status?i("div",{staticClass:"status-booking custom-color-9"},[e._v("DD-Due\n                        ")]):e._e(),8==t.status?i("div",{staticClass:"status-booking custom-color-10"},[e._v("Cancel\n                        ")]):e._e(),9==t.status?i("div",{staticClass:"status-booking custom-color-11"},[e._v("Others\n                        ")]):e._e()]),i("div",{staticClass:"name-tour"},[e._v(e._s(e.getNamegGroupBooking(t.groupBooking)))])]),i("div",{staticClass:"text-booking w-100"},[e._v(e._s(e.formatNameBooking(t)))])])],1),i("q-separator",{attrs:{color:"custom-color-1"}})],1)})),0)],1)])})),i("div",{staticClass:"flex flex-center q-mt-lg q-mb-md"},[i("q-pagination",{attrs:{color:"primary",max:e.total_page_mobile,"direction-links":!0},on:{input:function(t){return e.changePagePagination()}},model:{value:e.pagination_mobile.page,callback:function(t){e.$set(e.pagination_mobile,"page",t)},expression:"pagination_mobile.page"}})],1)],2):i("div",{staticClass:"q-mt-lg text-center"},[e._v("Do not have booking")])]),i("transition",{attrs:{name:"slide-fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.is_add_booking||e.is_view_detail_booking,expression:"is_add_booking || is_view_detail_booking"}]},[i("add-booking-mobile",{attrs:{options_hotel:e.options_hotel,list_hotel:e.list_hotel,list_product:e.list_product,options_status_booking:e.options_status_booking,option_tour_type:e.option_tour_type,option_tour_type_filter:e.option_tour_type_filter,options_main_transportation:e.options_main_transportation,options_main_transportation_filter:e.options_main_transportation_filter,options_bookers:e.options_bookers,options_bookers_filter:e.options_bookers_filter,loading_list_booking:e.loading_list_booking,option_filter:e.option_filter,option_type_of_payment:e.option_type_of_payment,options_classify_new_payment:e.options_classify_new_payment,is_read:e.is_read,is_add:e.is_add,is_delete:e.is_delete,is_group:e.is_group,is_cancel:e.is_cancel,is_read_tab_1:e.is_read_tab_1,is_read_tab_2:e.is_read_tab_2,is_read_tab_3:e.is_read_tab_3,is_read_tab_4:e.is_read_tab_4,is_update_tab_1:e.is_update_tab_1,is_update_tab_2:e.is_update_tab_2,is_update_tab_3:e.is_update_tab_3,is_update_tab_4:e.is_update_tab_4,is_do_add_booking_mobile:e.is_do_add_booking_mobile,is_do_edit_booking_mobile:e.is_do_edit_booking_mobile,item_booking_to_view:e.item_booking_to_view,is_view_detal_booking:e.is_view_detail_booking,is_add_booking:e.is_add_booking,trigger_edit_booking:e.trigger_edit_booking,trigger_control_booking:e.trigger_control_booking,is_processed_booking:e.is_processed_booking,goto_view_list_bk:e.is_view_list_booking,options_sale_in_charge:e.options_sale_in_charge},on:{"update:trigger_control_booking":function(t){e.trigger_control_booking=t},doSaveAddBookingMobile:e.doSaveAddBookingMobile,failAddBookingMobile:e.failAddBookingMobile,editBookingDone:e.editBookingDone,reloadListBooking:e.reloadListBooking,backToList:e.backToListBooking,duplicateBooking:e.duplicateBooking}})],1)])],1)],1)},f=[],h=(i("7514"),i("118e")),y=i.n(h),C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"w-100 header-mobile-wrapper"},[e.add_booking?i("div",{staticClass:"h-100-per"},[i("div",{staticClass:"h-100-per"},[i("div",{staticClass:"text-header flex justify-between items-center"},[i("div",{staticClass:"flex items-center",staticStyle:{width:"75%"}},[i("q-icon",{staticClass:"q-ml-xs q-mr-xs",attrs:{dense:"",name:"keyboard_arrow_left",size:"md"},on:{click:function(t){return e.backToList()}}}),i("div",{staticClass:"name-product"},[e._v(e._s(e.name_header_mobile))]),i("q-space")],1),i("div",{staticClass:"text-right",staticStyle:{width:"25%"}},[i("q-icon",{staticClass:"q-mr-sm",attrs:{name:"save",size:"sm"},on:{click:function(t){return e.doTriggerSaveAddNewBookingMobile()}}})],1)])])]):i("div",{staticClass:"h-100-per"},[e.view_detail?i("div",{staticClass:"text-header flex justify-between items-center"},[i("div",{staticClass:"flex items-center",staticStyle:{width:"75%"}},[i("q-icon",{staticClass:"q-ml-xs q-mr-xs",attrs:{dense:"",name:"keyboard_arrow_left",size:"md"},on:{click:function(t){return e.backToList()}}}),i("div",{staticClass:"name-product"},[e._v(e._s(e.name_header_mobile))])],1),e.is_edit_booking?i("div",{staticClass:"q-pr-md"},[i("q-icon",{staticClass:"q-mr-sm",attrs:{name:"save",size:"sm"},on:{click:function(t){return e.doTriggerSaveEditBookingMobile()}}})],1):i("div",[i("q-icon",{attrs:{name:"edit",size:"sm"},on:{click:function(t){return e.triggerEditBooking()}}})],1),e.is_edit_booking?e._e():i("div",{staticClass:"q-pr-md"},[i("q-icon",{staticClass:"q-mr-sm",attrs:{name:"more_vert",size:"sm"},on:{click:function(t){return e.triggerControlBooking()}}})],1)]):i("div",{staticClass:"h-100-per"},[e.choosed_change_group?i("div",{staticClass:"h-100-per flex justify-between",staticStyle:{"align-items":"center"}},[i("div",{staticClass:"q-pa-sm q-pr-lg",staticStyle:{width:"13%"}},[i("q-icon",{staticClass:"q-ml-xs q-mr-xs",attrs:{color:"primary",dense:"",name:"keyboard_arrow_left",size:"md"},on:{click:function(t){return e.clearBookingChoosedToChangeGroup()}}})],1),i("div",{staticClass:"text-right q-pr-md",staticStyle:{width:"87%"}},[i("el-select",{attrs:{size:"mini",placeholder:"Group booking"},model:{value:e.input_group_booking,callback:function(t){e.input_group_booking=t},expression:"input_group_booking"}},e._l(e.options_group_booking_rechoose,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]):i("div",{staticClass:"h-100-per"},[0==e.list_choosed_booking.length?i("div",{staticClass:"text-header flex justify-between"},[e.is_processed_booking?i("div",{staticClass:"q-pl-md"},[e._v("Unproceesed Booking List")]):i("div",{staticClass:"q-pl-md"},[e._v("Booking List")]),i("div",{staticClass:"q-pr-lg"},[i("q-icon",{staticClass:"q-mr-md",attrs:{name:"filter_list",size:"sm"},on:{click:function(t){return e.openMenuFilter()}}}),i("q-icon",{attrs:{name:"add",size:"sm"},on:{click:function(t){return e.openTabAddBooking()}}})],1)]):i("div",{staticClass:"text-header flex justify-between"},[i("div",{staticClass:"q-pa-sm q-pr-lg",staticStyle:{width:"13%"}},[i("q-icon",{staticClass:"q-ml-xs q-mr-xs",attrs:{dense:"",color:"primary",name:"keyboard_arrow_left",size:"md"},on:{click:function(t){return e.clearListBookingChoosed()}}})],1),i("div",{staticClass:"text-number-booking-choosed",staticStyle:{width:"4%"}},[e._v(e._s(e.list_choosed_booking.length))]),i("div",{staticClass:"text-right q-pr-sm",staticStyle:{width:"43%","font-size":"13px"}},[e._v("Group booking")]),i("div",{staticClass:"text-right q-pr-md",staticStyle:{width:"40%"}},[i("el-select",{attrs:{size:"mini",placeholder:"Choosed"},on:{change:e.groupBookingFromMobile},model:{value:e.input_group_booking,callback:function(t){e.input_group_booking=t},expression:"input_group_booking"}},e._l(e.options_group_booking,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)])])])]),i("q-dialog",{attrs:{position:"right","content-class":"dialog-filter-booking"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("div",{staticClass:"body-filter-wrapper",staticStyle:{position:"relative"}},[i("div",{staticClass:"text-center header-filter-mobile"},[i("div",{staticClass:"q-pa-sm q-pr-lg",staticStyle:{width:"13%"}},[i("q-icon",{attrs:{color:"primary",name:"keyboard_arrow_left",size:"md"},on:{click:function(t){return e.closePopupFilter()}}})],1),i("div",{staticClass:"q-pt-sm q-pb-sm",staticStyle:{width:"74%"}},[e._v("Search Filter")]),i("div",{staticClass:"q-pa-sm q-pr-lg",staticStyle:{width:"13%"}})]),i("div",{staticClass:"q-pa-md content-filter-mobile"},[i("div",{staticClass:"row-filter justify-between q-mb-md"},[i("div",{staticClass:"text-filter"},[e._v("Status :")]),i("div",{staticClass:"content-filter"},[i("el-select",{attrs:{size:"mini","popper-class":"popper-filter-status",placeholder:"Choose status"},model:{value:e.info_filter_booking.status,callback:function(t){e.$set(e.info_filter_booking,"status",t)},expression:"info_filter_booking.status"}},e._l(e.options_status,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),i("div",{staticClass:"row-filter justify-between q-mb-md"},[i("div",{staticClass:"text-filter"},[e._v("Travel date")]),i("div",{staticClass:"content-filter"},[i("picker-filter",{attrs:{id:"picker-custom",noClearButton:!0,formatted:"l",autoClose:!0,noShortcuts:!0,noHeader:!0,"no-label":!0,range:!0,format:"DD/MM/YYYY",color:"#027BE3"},model:{value:e.info_filter_booking.date_range,callback:function(t){e.$set(e.info_filter_booking,"date_range",t)},expression:"info_filter_booking.date_range"}})],1)]),i("div",{staticClass:"row-filter justify-between q-mb-md"},[i("div",{staticClass:"text-filter"},[e._v("Tour type")]),i("div",{staticClass:"content-filter"},[i("el-select",{attrs:{size:"mini","popper-class":"popper-filter-status",placeholder:"Day of week"},model:{value:e.info_filter_booking.tour_type,callback:function(t){e.$set(e.info_filter_booking,"tour_type",t)},expression:"info_filter_booking.tour_type"}},e._l(e.option_tour_type_filter,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),i("div",{staticClass:"row-filter justify-between q-mb-md"},[i("div",{staticClass:"text-filter"},[e._v("Group booking")]),i("div",{staticClass:"content-filter"},[i("el-select",{attrs:{size:"mini","popper-class":"popper-filter-status",placeholder:"Choose Group booking"},model:{value:e.info_filter_booking.group_booking,callback:function(t){e.$set(e.info_filter_booking,"group_booking",t)},expression:"info_filter_booking.group_booking"}},e._l(e.options_group_booking,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),i("div",{staticClass:"row-filter justify-between q-mb-md"},[i("div",{staticClass:"text-filter"},[e._v("Booking number")]),i("div",{staticClass:"content-filter"},[i("el-input",{attrs:{placeholder:"Enter booking number",size:"mini"},model:{value:e.info_filter_booking.booking_number,callback:function(t){e.$set(e.info_filter_booking,"booking_number",t)},expression:"info_filter_booking.booking_number"}})],1)]),i("div",{staticClass:"row-filter justify-between q-mb-md"},[i("div",{staticClass:"text-filter"},[e._v("Product name")]),i("div",{staticClass:"content-filter"},[i("el-input",{attrs:{placeholder:"Enter product name",size:"mini"},model:{value:e.info_filter_booking.product_name,callback:function(t){e.$set(e.info_filter_booking,"product_name",t)},expression:"info_filter_booking.product_name"}})],1)]),i("div",{staticClass:"row-filter justify-between q-mb-md"},[i("div",{staticClass:"text-filter"},[e._v("#Ref no")]),i("div",{staticClass:"content-filter"},[i("el-input",{attrs:{placeholder:"Enter ref no",size:"mini"},model:{value:e.info_filter_booking.refNo,callback:function(t){e.$set(e.info_filter_booking,"refNo",t)},expression:"info_filter_booking.refNo"}})],1)]),i("div",{staticClass:"row-filter justify-between q-mb-md"},[i("div",{staticClass:"text-filter"},[e._v("Sales in charge")]),i("div",{staticClass:"content-filter"},[i("el-select",{attrs:{size:"mini",placeholder:"Choose sale in charge",multiple:""},model:{value:e.info_filter_booking.salesInCharge,callback:function(t){e.$set(e.info_filter_booking,"salesInCharge",t)},expression:"info_filter_booking.salesInCharge"}},e._l(e.options_sale_in_charge,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),i("div",{staticClass:"row-filter justify-between q-mb-md"},[i("div",{staticClass:"text-filter"},[e._v("Transportation")]),i("div",{staticClass:"content-filter"},[i("el-select",{attrs:{size:"mini","popper-class":"popper-filter-status",placeholder:"Choose transportation"},model:{value:e.info_filter_booking.transportation,callback:function(t){e.$set(e.info_filter_booking,"transportation",t)},expression:"info_filter_booking.transportation"}},e._l(e.options_main_transportation_filter,(function(e){return i("el-option",{key:e.id,attrs:{label:e.plateNumber,value:e.plateNumber}})})),1)],1)]),i("div",{staticClass:"row-filter justify-between q-mb-md"},[i("div",{staticClass:"text-filter"},[e._v("Booker name")]),i("div",{staticClass:"content-filter"},[i("el-select",{attrs:{size:"mini","popper-class":"popper-filter-status",placeholder:"Choose booker name"},model:{value:e.info_filter_booking.booker_name,callback:function(t){e.$set(e.info_filter_booking,"booker_name",t)},expression:"info_filter_booking.booker_name"}},e._l(e.options_bookers_filter,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1)]),i("div",{staticClass:"row-filter justify-between q-mb-md"},[i("div",{staticClass:"text-filter"},[e._v("Lead traveller first name")]),i("div",{staticClass:"content-filter"},[i("el-input",{attrs:{placeholder:"Enter lead first name",size:"mini"},model:{value:e.info_filter_booking.lead_first_name,callback:function(t){e.$set(e.info_filter_booking,"lead_first_name",t)},expression:"info_filter_booking.lead_first_name"}})],1)]),i("div",{staticClass:"row-filter justify-between q-mb-md"},[i("div",{staticClass:"text-filter"},[e._v("Lead traveller last name")]),i("div",{staticClass:"content-filter"},[i("el-input",{attrs:{placeholder:"Enter lead last name",size:"mini"},model:{value:e.info_filter_booking.lead_last_name,callback:function(t){e.$set(e.info_filter_booking,"lead_last_name",t)},expression:"info_filter_booking.lead_last_name"}})],1)]),i("div",{staticClass:"row-filter justify-between q-mb-md"},[i("div",{staticClass:"text-filter"},[e._v("Lead traveller Email")]),i("div",{staticClass:"content-filter"},[i("el-input",{attrs:{placeholder:"Enter lead email",size:"mini"},model:{value:e.info_filter_booking.lead_email,callback:function(t){e.$set(e.info_filter_booking,"lead_email",t)},expression:"info_filter_booking.lead_email"}})],1)]),i("div",{staticClass:"row-filter justify-between q-mb-md"},[i("div",{staticClass:"text-filter"},[e._v("Nationality")]),i("div",{staticClass:"content-filter"},[i("el-select",{attrs:{filterable:"",size:"mini",placeholder:"Choose nationality","popper-class":"select-group-new-booking"},model:{value:e.info_filter_booking.nationality,callback:function(t){e.$set(e.info_filter_booking,"nationality",t)},expression:"info_filter_booking.nationality"}},e._l(e.options_country_world_filter,(function(e){return i("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)]),i("div",{staticClass:"row-filter justify-between q-mb-md"},[i("div",{staticClass:"text-filter"},[e._v("Food notes")]),i("div",{staticClass:"content-filter"},[i("el-input",{attrs:{placeholder:"Enter food notes",size:"mini"},model:{value:e.info_filter_booking.food_note,callback:function(t){e.$set(e.info_filter_booking,"food_note",t)},expression:"info_filter_booking.food_note"}})],1)]),i("div",{staticClass:"row-filter justify-between q-mb-md"},[i("div",{staticClass:"text-filter"},[e._v("Other notes")]),i("div",{staticClass:"content-filter"},[i("el-input",{attrs:{placeholder:"Enter other notes",size:"mini"},model:{value:e.info_filter_booking.other_note,callback:function(t){e.$set(e.info_filter_booking,"other_note",t)},expression:"info_filter_booking.other_note"}})],1)]),i("div",{staticClass:"row-filter justify-between q-mb-md"},[i("div",{staticClass:"text-filter"},[e._v("Booking date")]),i("div",{staticClass:"content-filter"},[i("el-date-picker",{staticClass:"q-mb-sm",attrs:{clearable:!1,size:"mini",type:"date","popper-class":"popper-filter-date-booking-mobile",placeholder:"Booking date"},model:{value:e.info_filter_booking.booking_date,callback:function(t){e.$set(e.info_filter_booking,"booking_date",t)},expression:"info_filter_booking.booking_date"}})],1)]),i("div",{staticClass:"row-filter justify-between q-mb-md"},[i("div",{staticClass:"text-filter"},[e._v("Email send")]),i("div",{staticClass:"content-filter"},[i("el-select",{attrs:{size:"mini","popper-class":"popper-filter-status",placeholder:"Choose email send"},model:{value:e.info_filter_booking.email_sent,callback:function(t){e.$set(e.info_filter_booking,"email_sent",t)},expression:"info_filter_booking.email_sent"}},e._l(e.options_status_yes_no_filter,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),i("div",{staticClass:"row-filter justify-between q-mb-md"},[i("div",{staticClass:"text-filter"},[e._v("Invoice send")]),i("div",{staticClass:"content-filter"},[i("el-select",{attrs:{size:"mini","popper-class":"popper-filter-status",placeholder:"Choose invoice send"},model:{value:e.info_filter_booking.invoice_sent,callback:function(t){e.$set(e.info_filter_booking,"invoice_sent",t)},expression:"info_filter_booking.invoice_sent"}},e._l(e.options_status_yes_no_filter,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),i("div",{staticClass:"button-confirm-wrapper q-pl-md q-pr-md q-pt-sm q-pb-sm"},[i("div",{staticClass:"text-center"},[i("q-btn",{staticClass:"q-mr-md",attrs:{icon:"clear",size:"sm",label:"Clear",outline:"",color:"primary"},on:{click:function(t){return e.resetFilterBooking()}}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"filter_list",size:"sm",label:"Apply",color:"primary"},on:{click:function(t){return e.applyFilterBooking()}}})],1)])])])],1)},w=[],$={name:"HeaderMobile",props:{name_header_mobile:{type:String,default:""},add_booking:{type:Boolean,default:!1},view_detail:{type:Boolean,default:!1},is_edit_booking:{type:Boolean,default:!1},choosed_change_group:{type:Boolean,default:!1},list_choosed_booking:{type:Array,default:[]},booking_change_group:{type:Object,default:null},option_tour_type_filter:{type:Array,default:[]},options_country_world_filter:{type:Array,default:[]},options_main_transportation_filter:{type:Array,default:[]},options_bookers_filter:{type:Array,default:[]},options_sale_in_charge:{type:Array,default:[]},is_processed_booking:{type:Boolean,default:!1}},data:function(){return{dialog:!1,input_status_filter:"",info_filter_booking:{status:-1,booking_number:"",product_name:"",date_range:{},day_of_week:-1,tour_type:-1,start_time:-1,group_booking:"",transportation:"Not selected",booker_name:"Not selected",booker_client:-1,booker_sale_channel:"",lead_first_name:"",lead_last_name:"",nationality:"",lead_email:"",food_note:"",other_note:"",booking_date:"",email_sent:-1,invoice_sent:-1,salesInCharge:[],refNo:""},options_status_yes_no_filter:[{label:"Not selected",value:-1},{label:"Yes",value:!0},{label:"No",value:!1}],options_invoice_send_yes_no:[{label:"Yes",value:!0},{label:"No",value:!1}],options_status:[{value:-1,label:"Not selected"},{value:0,label:"Pending"},{value:1,label:"Waiting"},{value:2,label:"Reject"},{value:3,label:"CF-Unpaid"},{value:4,label:"CF-Deposit"},{value:5,label:"CF-Paid"},{value:6,label:"DD-Paid"},{value:7,label:"DD-Due"},{value:8,label:"Cancel"},{value:9,label:"Others"}],options_group_booking:[{name:"No choose",value:""},{name:"Tour #1",value:"tour1"},{name:"Tour #2",value:"tour2"},{name:"Tour #3",value:"tour3"},{name:"Tour #4",value:"tour4"},{name:"Tour #5",value:"tour5"},{name:"Tour #6",value:"tour6"},{name:"Tour #7",value:"tour7"},{name:"Tour #8",value:"tour8"},{name:"Tour #9",value:"tour9"}],input_booking_code_filter:"",options_group_booking_rechoose:[{value:"not-select",label:"Not selected"},{value:"tour1",label:"Tour 1"},{value:"tour2",label:"Tour 2"},{value:"tour3",label:"Tour 3"},{value:"tour4",label:"Tour 4"},{value:"tour5",label:"Tour 5"}],input_group_booking:""}},methods:{groupBookingFail:function(){this.input_group_booking=""},groupBookingFromMobile:function(){this.$emit("groupBookingFromMobile",this.input_group_booking)},triggerControlBooking:function(){this.$emit("triggerControlBooking")},triggerEditBooking:function(){this.$emit("triggerEditBooking")},doTriggerSaveAddNewBookingMobile:function(){this.$emit("doTriggerSaveAddNewBookingMobile")},doTriggerSaveEditBookingMobile:function(){this.$emit("doTriggerSaveEditBookingMobile")},applyFilterBooking:function(){this.$emit("doFilterBooking",this.info_filter_booking)},resetFilterBooking:function(){this.info_filter_booking={status:-1,booking_number:"",product_name:"",date_range:{},day_of_week:-1,tour_type:-1,start_time:-1,group_booking:"",transportation:"Not selected",booker_name:"Not selected",booker_client:-1,booker_sale_channel:"",lead_first_name:"",lead_last_name:"",nationality:"",lead_email:"",food_note:"",other_note:"",booking_date:"",email_sent:-1,invoice_sent:-1,salesInCharge:[],refNo:""}},backToList:function(){this.$emit("backToList")},openMenuFilter:function(){this.dialog=!0},openTabAddBooking:function(){this.$emit("addBookingMobile",!0,!0),this.is_processed_booking?this.$emit("addBookingMobile",!0,!0):this.$emit("addBookingMobile",!0)},clearListBookingChoosed:function(){this.$emit("clearALlBookingChoosed")},clearBookingChoosedToChangeGroup:function(){this.$emit("clearBookingChoosedToChangeGroup")},closePopupFilter:function(){this.dialog=!1},getStartDateFilter:function(){var e=new Date,t=e.getDate().toString(),i=(e.getMonth()+1).toString(),o=e.getFullYear().toString();return t+"/"+i+"/"+o},getEndDateFilter:function(){var e=new Date;e.setDate(e.getDate()+7);var t=e.getDate().toString(),i=(e.getMonth()+1).toString(),o=e.getFullYear().toString();return t+"/"+i+"/"+o}},components:{"picker-filter":_.a},mounted:function(){var e={start:this.getStartDateFilter(),end:this.getEndDateFilter()};this.info_filter_booking.date_range=e}},x=$,T=i("2877"),q=i("fe09"),N=Object(T["a"])(x,C,w,!1,null,null,null),S=N.exports;N.options.components=Object.assign({QIcon:q["n"],QSpace:q["D"],QDialog:q["k"],QBtn:q["c"]},N.options.components||{}),N.options.directives=Object.assign({ClosePopup:q["a"]},N.options.directives||{});var B=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{"padding-top":"50px"}},[i("q-tabs",{staticClass:"tab-header-detail-booking-mobile",attrs:{dense:"","active-color":"primary",align:"left"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[e.is_read_tab_1?i("q-tab",{attrs:{name:"booking",label:"Booking"}}):e._e(),e.is_read_tab_2?i("q-tab",{attrs:{name:"traveller",label:"Traveller"}}):e._e(),e.is_read_tab_3?i("q-tab",{attrs:{name:"revenue",label:"Revenue",disable:null==e.item_booking.productId||""==e.item_booking.productId||void 0==e.item_booking.productId}}):e._e(),e.is_read_tab_4?i("q-tab",{attrs:{name:"receivables",label:"Receivables",disable:null==e.item_booking.productId||""==e.item_booking.productId||void 0==e.item_booking.productId}}):e._e()],1),i("q-separator"),i("q-tab-panels",{staticClass:"bg-white text-black tab-panel-detail-booking-mobile",attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[i("q-tab-panel",{attrs:{name:"booking"}},[i("div",[i("div",{staticClass:"col"},[4!=e.item_booking.status&&5!=e.item_booking.status&&6!=e.item_booking.status&&7!=e.item_booking.status&&8!=e.item_booking.status?i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Choose status")]),i("div",{staticClass:"value-text"},[i("el-select",{attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Choose status","popper-class":"select-status-new-booking"},model:{value:e.item_booking.status,callback:function(t){e.$set(e.item_booking,"status",t)},expression:"item_booking.status"}},e._l(e.options_status_booking,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]):i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Status")]),i("div",{staticClass:"value-text"},[i("strong",[e._v(e._s(e._f("getNameStatus")(e.item_booking.status)))])])]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Group booking")]),i("div",{staticClass:"value-text"},[i("el-select",{attrs:{disabled:e.is_view_booking||0==e.item_booking.status||1==e.item_booking.status||2==e.item_booking.status,size:"mini",placeholder:"Group booking","popper-class":"select-group-new-booking"},model:{value:e.item_booking.groupBooking,callback:function(t){e.$set(e.item_booking,"groupBooking",t)},expression:"item_booking.groupBooking"}},e._l(e.options_group_booking,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Booking number")]),i("div",{staticClass:"value-text"},[i("el-input",{attrs:{placeholder:"Auto generate after created booking",disabled:!0,size:"mini"},model:{value:e.item_booking.bookingNumber,callback:function(t){e.$set(e.item_booking,"bookingNumber",t)},expression:"item_booking.bookingNumber"}})],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Choose product")]),i("div",{staticClass:"value-text"},[i("el-select",{class:{"input-error":e.$v.item_booking.productId.$error},attrs:{size:"mini",placeholder:"Choose product","popper-class":"select-product-new-booking",filterable:"",disabled:e.is_view_booking},on:{change:e.changeSelectProductNewBooking},model:{value:e.$v.item_booking.productId.$model,callback:function(t){e.$set(e.$v.item_booking.productId,"$model",t)},expression:"$v.item_booking.productId.$model"}},e._l(e.list_product,(function(e){return i("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1),e.$v.item_booking.productId.$error?i("div",{staticClass:"error-content"},[e._v("Product is required\n                ")]):e._e()],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Product code")]),i("div",{staticClass:"value-text"},[i("el-input",{attrs:{size:"mini",disabled:""},model:{value:e.item_booking.productCode,callback:function(t){e.$set(e.item_booking,"productCode",t)},expression:"item_booking.productCode"}})],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Product Name")]),i("div",{staticClass:"value-text"},[i("el-input",{attrs:{size:"mini",disabled:""},model:{value:e.item_booking.productName,callback:function(t){e.$set(e.item_booking,"productName",t)},expression:"item_booking.productName"}})],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Price Option")]),i("div",{staticClass:"value-text"},[i("el-select",{class:{"input-error":e.$v.item_booking.priceOptionName.$error},attrs:{filterable:"",disabled:e.is_view_booking,size:"mini",placeholder:"Choose price options","popper-class":"select-tour-type-new-booking"},on:{change:e.changePriceOptionNewBooking},model:{value:e.$v.item_booking.priceOptionName.$model,callback:function(t){e.$set(e.$v.item_booking.priceOptionName,"$model",t)},expression:"$v.item_booking.priceOptionName.$model"}},e._l(e.option_price_options,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1),e.$v.item_booking.priceOptionName.$error?i("div",{staticClass:"error-content"},[e._v("Price Option is required\n                ")]):e._e()],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Travel date")]),i("div",{staticClass:"value-text"},[i("el-date-picker",{staticClass:"time-picker-w-100",class:{"input-error":e.$v.item_booking.travelDate.$error},attrs:{disabled:e.is_view_booking,format:"dd-MM-yyyy","picker-options":e.pickerOptionTravelDate,size:"mini",type:"date",placeholder:"Pick day travel","popper-class":"date-picker-z-index"},on:{change:function(t){return e.changePickerTravelDateNewBooking()}},model:{value:e.$v.item_booking.travelDate.$model,callback:function(t){e.$set(e.$v.item_booking.travelDate,"$model",t)},expression:"$v.item_booking.travelDate.$model"}}),e.$v.item_booking.travelDate.$error?i("div",{staticClass:"error-content"},[e._v("Travel date is required\n                ")]):e._e()],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Start time")]),i("div",{staticClass:"value-text"},[i("el-select",{class:{"input-error":e.$v.item_booking.startTime.$error},attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Choose start time","popper-class":"select-tour-type-new-booking"},model:{value:e.$v.item_booking.startTime.$model,callback:function(t){e.$set(e.$v.item_booking.startTime,"$model",t)},expression:"$v.item_booking.startTime.$model"}},e._l(e.option_start_time,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e.$v.item_booking.startTime.$error?i("div",{staticClass:"error-content"},[e._v("Start time is required\n                ")]):e._e()],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("End time")]),i("div",{staticClass:"value-text"},[i("el-select",{attrs:{filterable:"",disabled:e.is_view_booking,size:"mini",placeholder:"Choose end time","popper-class":"select-tour-type-new-booking"},model:{value:e.item_booking.endTime,callback:function(t){e.$set(e.item_booking,"endTime",t)},expression:"item_booking.endTime"}},e._l(e.options_range_time,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Transportation")]),i("div",{staticClass:"value-text"},[i("el-select",{class:{"input-error":e.$v.item_booking.transportation.$error},attrs:{filterable:"",disabled:e.is_view_booking,size:"mini",placeholder:"Choose transportation","popper-class":"select-group-new-booking"},model:{value:e.$v.item_booking.transportation.$model,callback:function(t){e.$set(e.$v.item_booking.transportation,"$model",t)},expression:"$v.item_booking.transportation.$model"}},e._l(e.options_main_transportation,(function(e){return i("el-option",{key:e.id,attrs:{label:e.plateNumber,value:e.plateNumber}})})),1),e.$v.item_booking.transportation.$error?i("div",{staticClass:"error-content"},[e._v("Transportation is required\n                ")]):e._e()],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Booking date")]),i("div",{staticClass:"value-text"},[i("el-date-picker",{staticClass:"time-picker-w-100",class:{"input-error":e.$v.item_booking.bookingDate.$error},attrs:{disabled:e.is_view_booking,format:"dd-MM-yyyy",size:"mini",type:"date",placeholder:"Pick booking date","popper-class":"date-picker-z-index"},model:{value:e.$v.item_booking.bookingDate.$model,callback:function(t){e.$set(e.$v.item_booking.bookingDate,"$model",t)},expression:"$v.item_booking.bookingDate.$model"}}),e.$v.item_booking.bookingDate.$error?i("div",{staticClass:"error-content"},[e._v("Booking date is required\n                ")]):e._e()],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Booker name")]),i("div",{staticClass:"value-text"},[i("el-select",{attrs:{filterable:"",disabled:e.is_view_booking,size:"mini",placeholder:"Choose booker","popper-class":"select-group-new-booking"},on:{change:e.changeSelectBookerNewBooking},model:{value:e.item_booking.bookerId,callback:function(t){e.$set(e.item_booking,"bookerId",t)},expression:"item_booking.bookerId"}},e._l(e.options_bookers,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Booker email")]),i("div",{staticClass:"value-text"},[i("el-input",{attrs:{size:"mini",disabled:""},model:{value:e.item_booking.bookerEmail,callback:function(t){e.$set(e.item_booking,"bookerEmail",t)},expression:"item_booking.bookerEmail"}})],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Client")]),i("div",{staticClass:"value-text"},[i("el-input",{attrs:{disabled:"",size:"mini"},model:{value:e.item_booking.bookerClient,callback:function(t){e.$set(e.item_booking,"bookerClient",t)},expression:"item_booking.bookerClient"}})],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Sales channel")]),i("div",{staticClass:"value-text"},[i("el-input",{attrs:{disabled:"",size:"mini"},model:{value:e.item_booking.bookerSaleChannel,callback:function(t){e.$set(e.item_booking,"bookerSaleChannel",t)},expression:"item_booking.bookerSaleChannel"}})],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Ref no")]),i("div",{staticClass:"value-text"},[i("el-input",{attrs:{disabled:"",size:"mini"},model:{value:e.item_booking.refNo,callback:function(t){e.$set(e.item_booking,"refNo",t)},expression:"item_booking.refNo"}})],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Sales in-charge")]),i("div",{staticClass:"value-text"},[i("el-select",{attrs:{filterable:"",disabled:e.is_view_booking,size:"mini",placeholder:"Choose sale in charge","popper-class":"select-group-new-booking",multiple:""},model:{value:e.item_booking.salesInCharge,callback:function(t){e.$set(e.item_booking,"salesInCharge",t)},expression:"item_booking.salesInCharge"}},e._l(e.options_sale_in_charge,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Email send")]),i("div",{staticClass:"value-text"},[i("el-select",{attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Choose have email send","popper-class":"select-group-new-booking"},model:{value:e.item_booking.emailSent,callback:function(t){e.$set(e.item_booking,"emailSent",t)},expression:"item_booking.emailSent"}},e._l(e.options_status_yes_no,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Invoice send")]),i("div",{staticClass:"value-text"},[i("el-select",{attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Choose have invoice send","popper-class":"select-group-new-booking"},model:{value:e.item_booking.invoiceSent,callback:function(t){e.$set(e.item_booking,"invoiceSent",t)},expression:"item_booking.invoiceSent"}},e._l(e.options_invoice_send_yes_no,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Reminder/ Snooze")]),i("div",{staticClass:"value-text"},[i("el-input",{attrs:{disabled:e.is_view_booking,size:"mini"},model:{value:e.item_booking.reminderText,callback:function(t){e.$set(e.item_booking,"reminderText",t)},expression:"item_booking.reminderText"}})],1)])])])]),i("q-tab-panel",{attrs:{name:"traveller"}},[i("div",[i("div",{staticClass:"col"},[i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Guests quantity")]),i("div",{staticClass:"value-text"},[e._v(e._s(e.item_booking.guestQuantity))])]),e.tier_and_price[0].active?i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Adult number")]),i("div",{staticClass:"value-text"},[i("el-input-number",{class:{"input-error":e.$v.item_booking.adultNumber.$error},attrs:{min:0,disabled:e.is_view_booking,size:"mini"},model:{value:e.$v.item_booking.adultNumber.$model,callback:function(t){e.$set(e.$v.item_booking.adultNumber,"$model",t)},expression:"$v.item_booking.adultNumber.$model"}}),e.$v.item_booking.adultNumber.$error?i("div",{staticClass:"error-content"},[e._v("Adult number is required\n                ")]):e._e()],1)]):e._e(),e.tier_and_price[1].active?i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Child number")]),i("div",{staticClass:"value-text"},[i("el-input-number",{class:{"input-error":e.$v.item_booking.childNumber.$error},attrs:{min:0,disabled:e.is_view_booking,size:"mini"},model:{value:e.$v.item_booking.childNumber.$model,callback:function(t){e.$set(e.$v.item_booking.childNumber,"$model",t)},expression:"$v.item_booking.childNumber.$model"}}),e.$v.item_booking.childNumber.$error?i("div",{staticClass:"error-content"},[e._v("Child number is required\n                ")]):e._e()],1)]):e._e(),e.tier_and_price[3].active?i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Youth number")]),i("div",{staticClass:"value-text"},[i("el-input-number",{class:{"input-error":e.$v.item_booking.youthNumber.$error},attrs:{min:0,disabled:e.is_view_booking,size:"mini"},model:{value:e.$v.item_booking.youthNumber.$model,callback:function(t){e.$set(e.$v.item_booking.youthNumber,"$model",t)},expression:"$v.item_booking.youthNumber.$model"}}),e.$v.item_booking.youthNumber.$error?i("div",{staticClass:"error-content"},[e._v("Youth number is required\n                ")]):e._e()],1)]):e._e(),e.tier_and_price[2].active?i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Infant number")]),i("div",{staticClass:"value-text"},[i("el-input-number",{class:{"input-error":e.$v.item_booking.infantNumber.$error},attrs:{min:0,disabled:e.is_view_booking,size:"mini"},model:{value:e.$v.item_booking.infantNumber.$model,callback:function(t){e.$set(e.$v.item_booking.infantNumber,"$model",t)},expression:"$v.item_booking.infantNumber.$model"}}),e.$v.item_booking.infantNumber.$error?i("div",{staticClass:"error-content"},[e._v("Infant number is required\n                ")]):e._e()],1)]):e._e(),e.tier_and_price[4].active?i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Senior number")]),i("div",{staticClass:"value-text"},[i("el-input-number",{class:{"input-error":e.$v.item_booking.seniorNumber.$error},attrs:{min:0,disabled:e.is_view_booking,size:"mini"},model:{value:e.$v.item_booking.seniorNumber.$model,callback:function(t){e.$set(e.$v.item_booking.seniorNumber,"$model",t)},expression:"$v.item_booking.seniorNumber.$model"}}),e.$v.item_booking.seniorNumber.$error?i("div",{staticClass:"error-content"},[e._v("Senior number is required\n                ")]):e._e()],1)]):e._e(),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Lead traveler First name")]),i("div",{staticClass:"value-text"},[i("el-input",{class:{"input-error":e.$v.item_booking.leadTravelerFirstName.$error},attrs:{disabled:e.is_view_booking,size:"mini"},model:{value:e.$v.item_booking.leadTravelerFirstName.$model,callback:function(t){e.$set(e.$v.item_booking.leadTravelerFirstName,"$model",t)},expression:"$v.item_booking.leadTravelerFirstName.$model"}}),e.$v.item_booking.leadTravelerFirstName.$error?i("div",{staticClass:"error-content"},[e._v("First name lead is required\n                ")]):e._e()],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Lead traveler Last name")]),i("div",{staticClass:"value-text"},[i("el-input",{attrs:{disabled:e.is_view_booking,size:"mini"},model:{value:e.item_booking.leadTravelerLastName,callback:function(t){e.$set(e.item_booking,"leadTravelerLastName",t)},expression:"item_booking.leadTravelerLastName"}})],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Gender")]),i("div",{staticClass:"value-text"},[i("el-select",{attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Choose gender","popper-class":"select-group-new-booking"},model:{value:e.item_booking.leadTravelerGender,callback:function(t){e.$set(e.item_booking,"leadTravelerGender",t)},expression:"item_booking.leadTravelerGender"}},e._l(e.options_gender,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),e.item_booking.otherTravelerNames?i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Other travelers Name")]),i("div",{staticClass:"value-text"},[i("el-select",{staticClass:"w-100 input-add-other-traveler",attrs:{disabled:e.is_view_booking,multiple:"",filterable:"","allow-create":"",size:"mini","default-first-option":"",placeholder:"Input and enter to add","popper-class":"select-group-new-booking display-none"},model:{value:e.item_booking.otherTravelerNames,callback:function(t){e.$set(e.item_booking,"otherTravelerNames",t)},expression:"item_booking.otherTravelerNames"}},e._l(e.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]):e._e(),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Nationality")]),i("div",{staticClass:"value-text"},[i("el-select",{attrs:{filterable:"",disabled:e.is_view_booking,size:"mini",placeholder:"Choose nationality","popper-class":"select-group-new-booking"},model:{value:e.item_booking.nationality,callback:function(t){e.$set(e.item_booking,"nationality",t)},expression:"item_booking.nationality"}},e._l(e.options_country_world,(function(e){return i("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Passport number")]),i("div",{staticClass:"value-text"},[i("el-input",{attrs:{disabled:e.is_view_booking,size:"mini"},model:{value:e.item_booking.passportNumber,callback:function(t){e.$set(e.item_booking,"passportNumber",t)},expression:"item_booking.passportNumber"}})],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Lead traveler Email")]),i("div",{staticClass:"value-text"},[i("el-input",{class:{"input-error":e.$v.item_booking.leadTravelerLastEmail.$error},attrs:{disabled:e.is_view_booking,size:"mini"},model:{value:e.$v.item_booking.leadTravelerLastEmail.$model,callback:function(t){e.$set(e.$v.item_booking.leadTravelerLastEmail,"$model",t)},expression:"$v.item_booking.leadTravelerLastEmail.$model"}}),e.$v.item_booking.leadTravelerLastEmail.$error?i("div",{staticClass:"error-content"},[e._v("Format email is wrong\n                ")]):e._e()],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Lead traveler Phone")]),i("div",{staticClass:"value-text"},[i("el-input",{attrs:{disabled:e.is_view_booking,size:"mini"},model:{value:e.item_booking.leadTravelerLastPhone,callback:function(t){e.$set(e.item_booking,"leadTravelerLastPhone",t)},expression:"item_booking.leadTravelerLastPhone"}})],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Hotel name")]),i("div",{staticClass:"value-text"},[i("el-select",{attrs:{disabled:e.is_view_booking,filterable:"",size:"mini",placeholder:"Hotel name & address","popper-class":"select-group-new-booking"},on:{change:function(t){return e.changeValueHotel()}},model:{value:e.item_booking.hotelName,callback:function(t){e.$set(e.item_booking,"hotelName",t)},expression:"item_booking.hotelName"}},e._l(e.options_hotel,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Hotel address")]),i("div",{staticClass:"value-text"},[i("el-input",{attrs:{disabled:e.is_view_booking,size:"mini"},model:{value:e.item_booking.hotelAddress,callback:function(t){e.$set(e.item_booking,"hotelAddress",t)},expression:"item_booking.hotelAddress"}})],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Pickup order")]),i("div",{staticClass:"value-text"},[i("el-select",{attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Choose order","popper-class":"select-group-new-booking"},model:{value:e.item_booking.pickupOrder,callback:function(t){e.$set(e.item_booking,"pickupOrder",t)},expression:"item_booking.pickupOrder"}},e._l(e.options_pickup_order,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Food notes")]),i("div",{staticClass:"value-text"},[i("el-input",{attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Foods allergy and dietary (if any)"},model:{value:e.item_booking.foodNotes,callback:function(t){e.$set(e.item_booking,"foodNotes",t)},expression:"item_booking.foodNotes"}})],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Other notes")]),i("div",{staticClass:"value-text"},[i("el-input",{attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Other notes (if any)"},model:{value:e.item_booking.otherNotes,callback:function(t){e.$set(e.item_booking,"otherNotes",t)},expression:"item_booking.otherNotes"}})],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Pickup time from")]),i("div",{staticClass:"value-text"},[i("q-input",{staticClass:"input-pickup-time-from",attrs:{disable:e.is_view_booking,dense:"",outlined:""},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[i("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[i("q-time",{attrs:{"hour-options":e.hourOptions,mask:"hh[:]mm[ ]A"},model:{value:e.item_booking.pickupTimeFrom,callback:function(t){e.$set(e.item_booking,"pickupTimeFrom",t)},expression:"item_booking.pickupTimeFrom"}})],1)],1)]},proxy:!0}]),model:{value:e.item_booking.pickupTimeFrom,callback:function(t){e.$set(e.item_booking,"pickupTimeFrom",t)},expression:"item_booking.pickupTimeFrom"}})],1)]),i("div",{staticClass:"row-info"},[i("div",{staticClass:"pre-text"},[e._v("Pickup time to")]),i("div",{staticClass:"value-text"},[i("q-input",{staticClass:"input-pickup-time-from",attrs:{dense:"",disable:e.is_view_booking,outlined:""},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[i("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[i("q-time",{attrs:{"hour-options":e.hourOptions,mask:"hh[:]mm[ ]A"},model:{value:e.item_booking.pickupTimeTo,callback:function(t){e.$set(e.item_booking,"pickupTimeTo",t)},expression:"item_booking.pickupTimeTo"}})],1)],1)]},proxy:!0}]),model:{value:e.item_booking.pickupTimeTo,callback:function(t){e.$set(e.item_booking,"pickupTimeTo",t)},expression:"item_booking.pickupTimeTo"}})],1)])])])]),i("q-tab-panel",{attrs:{name:"revenue"}},[i("div",[i("div",{staticClass:"row adult-number"},[i("div",{staticClass:"col"}),i("div",{staticClass:"col text-bold"},[e._v("Price")]),i("div",{staticClass:"col text-bold"},[e._v("Quantity")]),i("div",{staticClass:"col text-bold"},[e._v("Sales")])]),e._l(e.tier_and_price,(function(t,o){return i("div",{key:o,staticClass:"row adult-number "},[t.active?i("div",{staticClass:"row w-100 q-mt-sm"},[i("div",{staticClass:"col text-bold",staticStyle:{"line-height":"1.2"},domProps:{innerHTML:e._s(t.name)}}),i("div",{staticClass:"col"},[i("money",e._b({staticClass:"input-number-table-price-mobile",attrs:{disabled:e.is_view_booking},nativeOn:{blur:function(i){return e.refreshTierAndPrice(t)}},model:{value:t.price,callback:function(i){e.$set(t,"price",i)},expression:"item.price"}},"money",e.money_option,!1))],1),i("div",{staticClass:"col"},[i("money",e._b({staticClass:"input-number-table-price-mobile",attrs:{disabled:e.is_view_booking},nativeOn:{change:function(i){return e.changeInputQuantityTierAndPrice(t)},blur:function(i){return e.refreshTierAndPrice(t)}},model:{value:t.quantity,callback:function(i){e.$set(t,"quantity",i)},expression:"item.quantity"}},"money",e.money_option,!1))],1),i("div",{staticClass:"col"},[i("money",e._b({staticClass:"input-number-table-price-mobile",attrs:{disabled:!0},model:{value:t.sales,callback:function(i){e.$set(t,"sales",i)},expression:"item.sales"}},"money",e.money_option,!1))],1)]):e._e()])})),i("q-separator",{staticClass:"q-mt-md q-mb-md"}),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col text-bold"},[e._v("Sales")]),i("div",{staticClass:"col"}),i("div",{staticClass:"col"}),i("div",{staticClass:"col text-bold text-right"},[e._v(e._s(e._f("currency")(e.total_sales_new_booking,e.option_filter)))])]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col"},[e._v("Other sales")]),i("div",{staticClass:"col"}),i("div",{staticClass:"col"}),i("div",{staticClass:"col text-right"},[e._v(e._s(e._f("currency")(e.total_other_sales_new_booking,e.option_filter)))])]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col-9 text-right q-pr-md"},[e._v("Surcharge")]),null!=e.$v.item_booking.surcharge.$model?i("div",{staticClass:"col-3"},[i("money",e._b({staticClass:"input-number-table-price-mobile",class:{"input-error":e.$v.item_booking.surcharge.$error},attrs:{disabled:e.is_view_booking},nativeOn:{blur:function(t){return e.changeSurcharge(t)}},model:{value:e.$v.item_booking.surcharge.$model,callback:function(t){e.$set(e.$v.item_booking.surcharge,"$model",t)},expression:"$v.item_booking.surcharge.$model"}},"money",e.money_option,!1)),e.$v.item_booking.surcharge.$error?i("div",{staticClass:"error-content"},[e._v("Surcharge is required\n              ")]):e._e()],1):e._e()]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col-9 text-right q-pr-md"},[e._v("Sales commission")]),null!=e.$v.item_booking.commissionFee.$model?i("div",{staticClass:"col-3"},[i("money",e._b({staticClass:"input-number-table-price-mobile",class:{"input-error":e.$v.item_booking.commissionFee.$error},attrs:{disabled:e.is_view_booking},nativeOn:{blur:function(t){return e.changecommissionFee()}},model:{value:e.$v.item_booking.commissionFee.$model,callback:function(t){e.$set(e.$v.item_booking.commissionFee,"$model",t)},expression:"$v.item_booking.commissionFee.$model"}},"money",e.money_option,!1)),e.$v.item_booking.commissionFee.$error?i("div",{staticClass:"error-content"},[e._v("CommissionFee is required\n              ")]):e._e()],1):e._e()]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col-9 text-right q-pr-md"},[e._v("Sales from service cancellation")]),null!=e.item_booking.cancellationFee?i("div",{staticClass:"col-3"},[i("money",e._b({staticClass:"input-number-table-price-mobile",attrs:{disabled:!0},model:{value:e.item_booking.cancellationFee,callback:function(t){e.$set(e.item_booking,"cancellationFee",t)},expression:"item_booking.cancellationFee"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col-9 text-right q-pr-md"},[e._v("Other sales")]),null!=e.$v.item_booking.othersIncreaseFee.$model?i("div",{staticClass:"col-3"},[i("money",e._b({staticClass:"input-number-table-price-mobile",class:{"input-error":e.$v.item_booking.othersIncreaseFee.$error},attrs:{disabled:e.is_view_booking},nativeOn:{blur:function(t){return e.changeOtherIncreaseFee()}},model:{value:e.$v.item_booking.othersIncreaseFee.$model,callback:function(t){e.$set(e.$v.item_booking.othersIncreaseFee,"$model",t)},expression:"$v.item_booking.othersIncreaseFee.$model"}},"money",e.money_option,!1)),e.$v.item_booking.othersIncreaseFee.$error?i("div",{staticClass:"error-content"},[e._v("Other sales is required\n              ")]):e._e()],1):e._e()]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col"},[e._v("Gross sales")]),i("div",{staticClass:"col"}),i("div",{staticClass:"col"}),null!=e.item_booking.grossSales?i("div",{staticClass:"col text-bold text-right"},[e._v(e._s(e._f("currency")(e.item_booking.grossSales,e.option_filter))+"\n            ")]):e._e()]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col-12"},[e._v("Sales deducttion")])]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col-9 text-right q-pr-md"},[e._v("Coupon Code")]),i("div",{staticClass:"col-3"},[i("el-input",{staticClass:"input-number-table-price-mobile",attrs:{disabled:e.is_view_booking||""==e.item_booking.couponCode&&null==e.item_booking.couponCode,size:"mini"},on:{blur:function(t){return e.checkCouponCode()}},model:{value:e.item_booking.couponCode,callback:function(t){e.$set(e.item_booking,"couponCode",t)},expression:"item_booking.couponCode"}})],1)]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col-9 text-right q-pr-md"},[e._v("Coupon value")]),null!=e.item_booking.couponValue?i("div",{staticClass:"col-3"},[i("money",e._b({staticClass:"input-number-table-price-mobile",attrs:{disabled:!0},model:{value:e.item_booking.couponValue,callback:function(t){e.$set(e.item_booking,"couponValue",t)},expression:"item_booking.couponValue"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col-9 text-right q-pr-md"},[e._v("Discount")]),null!=e.$v.item_booking.discount.$model?i("div",{staticClass:"col-3"},[i("money",e._b({staticClass:"input-number-table-price-mobile",class:{"input-error":e.$v.item_booking.discount.$error},attrs:{disabled:e.is_view_booking},model:{value:e.$v.item_booking.discount.$model,callback:function(t){e.$set(e.$v.item_booking.discount,"$model",t)},expression:"$v.item_booking.discount.$model"}},"money",e.money_option,!1)),e.$v.item_booking.discount.$error?i("div",{staticClass:"error-content"},[e._v("Discount is required\n              ")]):e._e()],1):e._e()]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col-9 text-right q-pr-md"},[e._v("Service cancellation")]),null!=e.item_booking.cancellationSales?i("div",{staticClass:"col-3"},[i("money",e._b({staticClass:"input-number-table-price-mobile",attrs:{disabled:!0},model:{value:e.item_booking.cancellationSales,callback:function(t){e.$set(e.item_booking,"cancellationSales",t)},expression:"item_booking.cancellationSales"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col-9 text-right q-pr-md"},[e._v("Other deductions")]),null!=e.$v.item_booking.otherDecreaseFee.$model?i("div",{staticClass:"col-3"},[i("money",e._b({staticClass:"input-number-table-price-mobile",class:{"input-error":e.$v.item_booking.otherDecreaseFee.$error},attrs:{disabled:e.is_view_booking},model:{value:e.$v.item_booking.otherDecreaseFee.$model,callback:function(t){e.$set(e.$v.item_booking.otherDecreaseFee,"$model",t)},expression:"$v.item_booking.otherDecreaseFee.$model"}},"money",e.money_option,!1)),e.$v.item_booking.otherDecreaseFee.$error?i("div",{staticClass:"error-content"},[e._v("Others is required\n              ")]):e._e()],1):e._e()]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col"},[e._v("Net sales")]),i("div",{staticClass:"col"}),i("div",{staticClass:"col"}),i("div",{staticClass:"col text-bold text-right"},[e._v(e._s(e._f("currency")(e.total_net_sales_new_booking,e.option_filter)))])]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col"},[e._v("Tax rate (%)")]),i("div",{staticClass:"col"}),i("div",{staticClass:"col"}),i("div",{staticClass:"col text-bold"},[i("el-input-number",{staticClass:"v-money input-number-table-price-mobile-el",class:{"input-error":e.$v.item_booking.taxRate.$error},attrs:{disabled:e.is_view_booking,max:100,min:0,size:"mini",controls:!1},model:{value:e.$v.item_booking.taxRate.$model,callback:function(t){e.$set(e.$v.item_booking.taxRate,"$model",t)},expression:"$v.item_booking.taxRate.$model"}}),e.$v.item_booking.taxRate.$error?i("div",{staticClass:"error-content"},[e._v("Tax rate is required\n              ")]):e._e()],1)]),i("div",{staticClass:"row row-data"},[null!=e.item_booking.taxAmount?i("div",{staticClass:"col"},[e._v("Tax amount")]):e._e(),i("div",{staticClass:"col"}),i("div",{staticClass:"col"}),i("div",{staticClass:"col text-bold"},[i("money",e._b({staticClass:"input-number-table-price-mobile",attrs:{disabled:!0},model:{value:e.item_booking.taxAmount,callback:function(t){e.$set(e.item_booking,"taxAmount",t)},expression:"item_booking.taxAmount"}},"money",e.money_option,!1))],1)]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col-9"},[e._v("Net Sales excluded Tax")]),null!=e.item_booking.netSalesBeforeTax?i("div",{staticClass:"col-3 text-bold"},[i("money",e._b({staticClass:"input-number-table-price-mobile",attrs:{disabled:!0},model:{value:e.item_booking.netSalesBeforeTax,callback:function(t){e.$set(e.item_booking,"netSalesBeforeTax",t)},expression:"item_booking.netSalesBeforeTax"}},"money",e.money_option,!1))],1):e._e()])],2)]),i("q-tab-panel",{attrs:{name:"receivables"}},[i("div",[i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col-9"},[e._v("Receivables")]),null!=e.item_booking.receivables?i("div",{staticClass:"col-3"},[i("money",e._b({staticClass:"input-number-table-price-mobile",attrs:{disabled:!0},model:{value:e.item_booking.receivables,callback:function(t){e.$set(e.item_booking,"receivables",t)},expression:"item_booking.receivables"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col-9"},[e._v("Deposit requested")]),null!=e.item_booking.depositRequested?i("div",{staticClass:"col-3"},[i("money",e._b({staticClass:"input-number-table-price-mobile",attrs:{disabled:e.is_view_booking},model:{value:e.item_booking.depositRequested,callback:function(t){e.$set(e.item_booking,"depositRequested",t)},expression:"item_booking.depositRequested"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col-9"},[e._v("Deposit received")]),null!=e.item_booking.depositReceived?i("div",{staticClass:"col-3"},[i("money",e._b({staticClass:"input-number-table-price-mobile",attrs:{disabled:!0},model:{value:e.item_booking.depositReceived,callback:function(t){e.$set(e.item_booking,"depositReceived",t)},expression:"item_booking.depositReceived"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col-9"},[e._v("Remaining amount")]),null!=e.item_booking.remainingAmount?i("div",{staticClass:"col-3"},[i("money",e._b({staticClass:"input-number-table-price-mobile",attrs:{disabled:!0},model:{value:e.item_booking.remainingAmount,callback:function(t){e.$set(e.item_booking,"remainingAmount",t)},expression:"item_booking.remainingAmount"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col-9"},[e._v("Final payment received")]),null!=e.item_booking.paymentReceived?i("div",{staticClass:"col-3"},[i("money",e._b({staticClass:"input-number-table-price-mobile",attrs:{disabled:!0},model:{value:e.item_booking.paymentReceived,callback:function(t){e.$set(e.item_booking,"paymentReceived",t)},expression:"item_booking.paymentReceived"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col-9"},[e._v("Refund to guests")]),null!=e.item_booking.refundToGuests?i("div",{staticClass:"col-3"},[i("money",e._b({staticClass:"input-number-table-price-mobile",attrs:{disabled:!0},model:{value:e.item_booking.refundToGuests,callback:function(t){e.$set(e.item_booking,"refundToGuests",t)},expression:"item_booking.refundToGuests"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"row row-data"},[i("div",{staticClass:"col-9"},[e._v("Balance")]),null!=e.item_booking.balance?i("div",{staticClass:"col-3"},[i("money",e._b({staticClass:"input-number-table-price-mobile",attrs:{disabled:!0},model:{value:e.item_booking.balance,callback:function(t){e.$set(e.item_booking,"balance",t)},expression:"item_booking.balance"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"receivable-info-wrapper q-pb-md"},[i("el-tabs",{attrs:{type:"border-card"}},[i("el-tab-pane",{attrs:{label:"Money receive"}},[i("div",{staticClass:"no-money-receive q-mb-lg"},[i("q-btn",{attrs:{disabled:e.is_view_booking||!e.is_view_booking&&-1!=e.item_booking.status&&3!=e.item_booking.status&&4!=e.item_booking.status&&5!=e.item_booking.status&&6!=e.item_booking.status&&7!=e.item_booking.status,icon:"add",label:"Add money receive",size:"sm",color:"primary"},on:{click:function(t){return e.triggerOpenModalAddMoneyReceive()}}})],1),e.list_money_receive_temp.length>0?i("div",{staticClass:"list-money-receive"},e._l(e.list_money_receive_temp,(function(t,o){return i("div",{key:o,staticClass:"item-money-receive"},[i("div",{staticClass:"flex items-center w-100"},[t.created?i("div",{staticClass:"w-50"},[e._v("Payment time :")]):i("div",{staticClass:"w-50"}),i("div",{staticClass:"w-50"},[t.lastModified?i("span",[e._v(e._s(e._f("formatDateSystem")(t.lastModified)))]):t.created?i("span",[e._v(e._s(e._f("formatDateSystem")(t.created)))]):e._e()]),i("div",{staticClass:"w-50 justify-center"},[i("q-btn",{attrs:{disabled:e.is_view_booking,icon:"edit",color:"primary",size:"sm"},on:{click:function(i){return e.triggerEditMoneyReceive(t,o)}}})],1)]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"w-50"},[e._v("Amount :")]),i("div",{staticClass:"w-50"},[e._v(e._s(e._f("currency")(t.amount,e.option_filter)))]),i("div",{staticClass:"w-50"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"w-50"},[e._v("From :")]),i("div",{staticClass:"w-50"},[e._v(e._s(e.getPaymentTypeName(t.paymentType)))]),i("div",{staticClass:"w-50"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"w-50"},[e._v("Classify :")]),i("div",{staticClass:"w-50"},[e._v(e._s(e.getClassifyName(t.classify)))]),i("div",{staticClass:"w-50"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"w-50"},[e._v("Bank fee :")]),i("div",{staticClass:"w-50"},[e._v(e._s(e._f("currency")(t.fee,e.option_filter)))]),i("div",{staticClass:"w-50"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"w-50"},[e._v("Notes :")]),i("div",{staticClass:"w-50"},[e._v(e._s(t.notes))]),i("div",{staticClass:"w-50"})]),e.is_view_booking?e._e():i("div",{staticClass:"text-center q-mt-md"},[i("q-btn",{attrs:{disabled:e.is_view_booking,icon:"delete",color:"negative",label:"Delete",size:"sm"},on:{click:function(i){return e.deleteMoneyReceive(t)}}})],1)])})),0):i("div",[e._v("Do not have money receive")])]),i("el-tab-pane",{attrs:{label:"Refund"}},[i("div",{staticClass:"no-money-receive q-mb-lg"},[i("q-btn",{attrs:{disabled:e.is_view_booking||e.item_booking.balance>=0||!e.is_view_booking&&-1!=e.item_booking.status&&3!=e.item_booking.status&&4!=e.item_booking.status&&5!=e.item_booking.status&&6!=e.item_booking.status&&7!=e.item_booking.status,icon:"add",label:"Add refund",size:"sm",color:"primary"},on:{click:function(t){return e.triggerOpenModalAddRefund()}}})],1),e.list_refund_temp.length>0?i("div",{staticClass:"list-money-receive"},e._l(e.list_refund_temp,(function(t,o){return i("div",{key:o,staticClass:"item-money-receive"},[i("div",{staticClass:"flex items-center w-100"},[t.created?i("div",{staticClass:"w-50"},[e._v("Refund :")]):i("div",{staticClass:"w-50"}),i("div",{staticClass:"w-50"},[t.lastModified?i("span",[e._v(e._s(e._f("formatDateSystem")(t.lastModified)))]):t.created?i("span",[e._v(e._s(e._f("formatDateSystem")(t.created)))]):e._e()]),i("div",{staticClass:"w-50 justify-center"},[i("q-btn",{attrs:{disabled:e.is_view_booking,icon:"edit",color:"primary",size:"sm"},on:{click:function(i){return e.triggerEditRefund(t,o)}}})],1)]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"w-50"},[e._v("Amount :")]),i("div",{staticClass:"w-50"},[e._v(e._s(e._f("currency")(t.amount,e.option_filter)))]),i("div",{staticClass:"w-50"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"w-50"},[e._v("From :")]),i("div",{staticClass:"w-50"},[e._v(e._s(e.getPaymentTypeName(t.paymentType)))]),i("div",{staticClass:"w-50"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"w-50"},[e._v("Bank fee :")]),i("div",{staticClass:"w-50"},[e._v(e._s(e._f("currency")(t.fee,e.option_filter)))]),i("div",{staticClass:"w-50"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"w-50"},[e._v("Notes :")]),i("div",{staticClass:"w-50"},[e._v(e._s(t.notes))]),i("div",{staticClass:"w-50"})]),e.is_view_booking?e._e():i("div",{staticClass:"text-center q-mt-md"},[i("q-btn",{attrs:{disabled:e.is_view_booking,icon:"delete",color:"negative",label:"Delete",size:"sm"},on:{click:function(i){return e.deleteRefund(t)}}})],1)])})),0):i("div",[e._v("Do not have refund")])])],1)],1)])])],1)],1),i("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale"},model:{value:e.open_modal_add_money_receive,callback:function(t){e.open_modal_add_money_receive=t},expression:"open_modal_add_money_receive"}},[i("q-card",{staticClass:"bg-primary text-white",staticStyle:{width:"80%"}},[e.is_edit_money_receive?i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("Edit money receive")]):i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("Add money receive\n      ")]),i("q-card-actions",{staticClass:"bg-white text-black"},[i("div",{staticClass:"add-money-receive-wrapper",staticStyle:{padding:"0px"}},[i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Amount :")]),i("div",{staticClass:"content"},[i("money",e._b({staticClass:"input-number-custom-1",class:{"input-error":e.$v.obj_money_receive_temp.amount.$error},model:{value:e.$v.obj_money_receive_temp.amount.$model,callback:function(t){e.$set(e.$v.obj_money_receive_temp.amount,"$model",t)},expression:"$v.obj_money_receive_temp.amount.$model"}},"money",e.money_option,!1)),e.$v.obj_money_receive_temp.amount.$error?i("div",{staticClass:"error-content"},[e._v("Amount is required\n              ")]):e._e()],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("From :")]),i("div",{staticClass:"content"},[i("el-select",{attrs:{size:"mini",placeholder:"Choose from","popper-class":"select-group-new-booking"},model:{value:e.obj_money_receive_temp.paymentType,callback:function(t){e.$set(e.obj_money_receive_temp,"paymentType",t)},expression:"obj_money_receive_temp.paymentType"}},e._l(e.option_type_of_payment,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Classify :")]),i("div",{staticClass:"content"},[i("el-select",{attrs:{size:"mini",placeholder:"Choose classify","popper-class":"select-group-new-booking"},model:{value:e.obj_money_receive_temp.classify,callback:function(t){e.$set(e.obj_money_receive_temp,"classify",t)},expression:"obj_money_receive_temp.classify"}},e._l(e.options_classify_new_payment,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Bank fee :")]),i("div",{staticClass:"content"},[i("money",e._b({staticClass:"input-number-custom-1",class:{"input-error":e.$v.obj_money_receive_temp.fee.$error},model:{value:e.$v.obj_money_receive_temp.fee.$model,callback:function(t){e.$set(e.$v.obj_money_receive_temp.fee,"$model",t)},expression:"$v.obj_money_receive_temp.fee.$model"}},"money",e.money_option,!1)),e.$v.obj_money_receive_temp.fee.$error?i("div",{staticClass:"error-content"},[e._v("Bank fee is required\n              ")]):e._e()],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Notes :")]),i("div",{staticClass:"content"},[i("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:e.obj_money_receive_temp.notes,callback:function(t){e.$set(e.obj_money_receive_temp,"notes",t)},expression:"obj_money_receive_temp.notes"}})],1)])])]),i("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[e.is_edit_money_receive?i("div",[i("q-btn",{attrs:{label:"Save",color:"primary",size:"sm",icon:"check"},on:{click:function(t){return e.editMoneyReceive()}}})],1):i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{label:"cancel",color:"white",size:"sm","text-color":"black",icon:"cancel"}}),i("q-btn",{attrs:{label:"Add",color:"primary",size:"sm",icon:"add"},on:{click:function(t){return e.addMoneyReceive()}}})],1)])],1)],1),i("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale"},model:{value:e.open_modal_add_refund,callback:function(t){e.open_modal_add_refund=t},expression:"open_modal_add_refund"}},[i("q-card",{staticClass:"bg-primary text-white",staticStyle:{width:"80%"}},[e.is_edit_refund?i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("Edit refund")]):i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("Add refund")]),i("q-card-actions",{staticClass:"bg-white text-black"},[i("div",{staticClass:"add-money-receive-wrapper",staticStyle:{padding:"0px"}},[i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Amount :")]),i("div",{staticClass:"content"},[i("money",e._b({staticClass:"input-number-custom-1",class:{"input-error":e.$v.obj_refund_temp.amount.$error},model:{value:e.$v.obj_refund_temp.amount.$model,callback:function(t){e.$set(e.$v.obj_refund_temp.amount,"$model",t)},expression:"$v.obj_refund_temp.amount.$model"}},"money",e.money_option,!1)),e.$v.obj_refund_temp.amount.$error?i("div",{staticClass:"error-content"},[e._v("Amount is required\n              ")]):e._e()],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("From :")]),i("div",{staticClass:"content"},[i("el-select",{attrs:{size:"mini",placeholder:"Choose from","popper-class":"select-group-new-booking"},model:{value:e.obj_refund_temp.paymentType,callback:function(t){e.$set(e.obj_refund_temp,"paymentType",t)},expression:"obj_refund_temp.paymentType"}},e._l(e.option_type_of_payment,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Bank fee :")]),i("div",{staticClass:"content"},[i("money",e._b({staticClass:"input-number-custom-1",class:{"input-error":e.$v.obj_refund_temp.fee.$error},model:{value:e.$v.obj_refund_temp.fee.$model,callback:function(t){e.$set(e.$v.obj_refund_temp.fee,"$model",t)},expression:"$v.obj_refund_temp.fee.$model"}},"money",e.money_option,!1)),e.$v.obj_refund_temp.fee.$error?i("div",{staticClass:"error-content"},[e._v("Bank fee is required")]):e._e()],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Notes :")]),i("div",{staticClass:"content"},[i("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:e.obj_refund_temp.notes,callback:function(t){e.$set(e.obj_refund_temp,"notes",t)},expression:"obj_refund_temp.notes"}})],1)])])]),i("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[e.is_edit_refund?i("div",[i("q-btn",{attrs:{label:"Save",color:"primary",size:"sm",icon:"check"},on:{click:function(t){return e.editRefund()}}})],1):i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{label:"cancel",color:"white",size:"sm","text-color":"black",icon:"cancel"}}),i("q-btn",{attrs:{label:"Add",color:"primary",size:"sm",icon:"add"},on:{click:function(t){return e.addRefund()}}})],1)])],1)],1),i("q-dialog",{attrs:{position:"right","content-class":"dialog-filter-booking"},on:{hide:e.onDialogHideControlBooking},model:{value:e.trigger_control_booking,callback:function(t){e.trigger_control_booking=t},expression:"trigger_control_booking"}},[i("div",{staticClass:"body-control-booking",staticStyle:{position:"relative"}},[i("div",{staticClass:"text-center header-filter-mobile"},[i("div",{staticClass:"q-pa-sm q-pr-lg",staticStyle:{width:"13%"}},[i("q-icon",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",name:"keyboard_arrow_left",size:"md"}})],1),i("div",{staticClass:"q-pt-sm q-pb-sm",staticStyle:{width:"74%"}},[e._v("Functional of booking")]),i("div",{staticClass:"q-pa-sm q-pr-lg",staticStyle:{width:"13%"}})]),i("div",{staticClass:"q-pa-md content-filter-mobile"},[i("div",{staticClass:"row-filter justify-between q-mb-md text-center"},[e.is_view_booking?i("div",[i("div",{staticClass:"q-mt-md"},[i("q-btn",{staticStyle:{width:"150px"},attrs:{label:"View tour",size:"md",color:"primary"},on:{click:function(t){return e.viewTourOfBooking()}}})],1),i("div",{staticClass:"q-mt-md"},[i("q-btn",{staticStyle:{width:"150px"},attrs:{label:"Generate email",size:"md",color:"primary"},on:{click:function(t){return e.triggerOpenModalGenerateEmail()}}})],1),i("div",{staticClass:"q-mt-md"},[i("q-btn",{staticStyle:{width:"150px"},attrs:{label:"Invoice",size:"md",color:"primary"},on:{click:function(t){return e.triggerOpenModalViewInvoice()}}})],1),i("div",{staticClass:"q-mt-md"},[i("q-btn",{staticStyle:{width:"150px"},attrs:{label:"Duplicate",disabled:8==e.item_booking.status,size:"md",color:"primary"},on:{click:function(t){return e.triggerDuplicateBooking()}}})],1),e.is_cancel?i("div",{staticClass:"q-mt-md"},[i("q-btn",{staticStyle:{width:"150px"},attrs:{disabled:8==e.item_booking.status,label:"Cancel booking",size:"md",color:"primary"},on:{click:function(t){return e.triggerOpenModalCancelBooking()}}})],1):e._e(),e.is_delete?i("div",{staticClass:"q-mt-md"},[i("q-btn",{staticStyle:{width:"150px"},attrs:{label:"Delete booking",size:"md",color:"primary"},on:{click:function(t){return e.deleteBooking()}}})],1):e._e()]):e._e()])])])]),i("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale"},model:{value:e.open_modal_choose_email_template,callback:function(t){e.open_modal_choose_email_template=t},expression:"open_modal_choose_email_template"}},[i("q-card",{staticClass:"bg-primary text-white",staticStyle:{width:"90vw"}},[i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("Choose email template")]),i("q-card-actions",{staticClass:"bg-white text-black"},[i("div",{staticClass:"choose-email-template-wrapper w-100 q-pt-md q-pb-md q-pl-sm q-pr-sm"},[i("el-select",{staticClass:"w-100",attrs:{size:"medium",placeholder:"Choose email template","popper-class":"select-group-new-booking"},model:{value:e.value_email_template,callback:function(t){e.value_email_template=t},expression:"value_email_template"}},e._l(e.list_email_template,(function(e){return i("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)],1)]),i("q-separator"),i("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[i("div",[i("q-btn",{staticClass:"q-mr-md",attrs:{label:"View email",color:"white",size:"sm","text-color":"black",icon:"pageview"},on:{click:function(t){return e.routerToViewEmail()}}})],1)])],1)],1),i("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale"},model:{value:e.open_modal_view_invoice_booking,callback:function(t){e.open_modal_view_invoice_booking=t},expression:"open_modal_view_invoice_booking"}},[i("q-card",{staticClass:"bg-primary text-white",staticStyle:{width:"95vw"}},[i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("View invoice booking")]),i("q-card-actions",{staticClass:"bg-white text-black"},[i("view-invoice-booking",{attrs:{info_booking:e.info_booking_view_invoice}})],1),i("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{label:"Cancel",color:"white",size:"sm","text-color":"black",icon:"cancel"}})],1)])],1)],1),i("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale"},model:{value:e.open_modal_cancel_booking,callback:function(t){e.open_modal_cancel_booking=t},expression:"open_modal_cancel_booking"}},[i("q-card",{staticClass:"bg-primary text-white",staticStyle:{width:"90vw"}},[i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("Cancel booking")]),i("q-card-actions",{staticClass:"bg-white text-black"},[i("div",{staticClass:"add-money-receive-wrapper"},[i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Cancellation sales :")]),i("div",{staticClass:"content"},[i("el-input-number",{staticClass:"input-number-custom",attrs:{disabled:!0,size:"mini",controls:!1},model:{value:e.item_booking.cancellationSales,callback:function(t){e.$set(e.item_booking,"cancellationSales",t)},expression:"item_booking.cancellationSales"}})],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Cancellation fee :")]),i("div",{staticClass:"content"},[i("el-input-number",{staticClass:"input-number-custom",attrs:{size:"mini",controls:!1},model:{value:e.item_booking.cancellationFee,callback:function(t){e.$set(e.item_booking,"cancellationFee",t)},expression:"item_booking.cancellationFee"}})],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Notes :")]),i("div",{staticClass:"content"},[i("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:e.item_booking.cancellationNotes,callback:function(t){e.$set(e.item_booking,"cancellationNotes",t)},expression:"item_booking.cancellationNotes"}})],1)])])]),i("q-separator"),i("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{label:"Cancel",color:"white",size:"sm","text-color":"black",icon:"cancel"}}),i("q-btn",{attrs:{label:"Update",color:"primary",size:"sm",icon:"edit"},on:{click:function(t){return e.updateCancelBooking()}}})],1)])],1)],1)],1)},O=[];function A(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function D(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?A(i,!0).forEach((function(t){l()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):A(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var P={name:"Add-booking-mobile-page",props:{list_product:{type:Array,default:[]},options_status_booking:{type:Array,default:[]},option_tour_type:{type:Array,default:[]},option_tour_type_filter:{type:Array,default:[]},options_main_transportation:{type:Array,default:[]},options_main_transportation_filter:{type:Array,default:[]},options_bookers:{type:Array,default:[]},options_bookers_filter:{type:Array,default:[]},loading_list_booking:{type:Boolean,default:!1},option_filter:{type:Object,default:{}},option_type_of_payment:{type:Array,default:[]},options_classify_new_payment:{type:Array,default:[]},is_read:{type:Boolean,default:!1},is_add:{type:Boolean,default:!1},is_delete:{type:Boolean,default:!1},is_group:{type:Boolean,default:!1},is_cancel:{type:Boolean,default:!1},is_read_tab_1:{type:Boolean,default:!1},is_read_tab_2:{type:Boolean,default:!1},is_read_tab_3:{type:Boolean,default:!1},is_read_tab_4:{type:Boolean,default:!1},is_update_tab_1:{type:Boolean,default:!1},is_update_tab_2:{type:Boolean,default:!1},is_update_tab_3:{type:Boolean,default:!1},is_update_tab_4:{type:Boolean,default:!1},is_do_add_booking_mobile:{type:Boolean,default:!1},is_do_edit_booking_mobile:{type:Boolean,default:!1},item_booking_to_view:{type:Object,defautl:{}},is_view_detal_booking:{type:Boolean,default:!1},is_add_booking:{type:Boolean,default:!1},goto_view_list_bk:{type:Boolean,default:!1},trigger_edit_booking:{type:Boolean,default:!1},trigger_control_booking:{type:Boolean,default:!1},is_processed_booking:{type:Boolean,default:!1},options_sale_in_charge:{type:Array,default:[]},options_hotel:{type:Array,default:[]},list_hotel:{type:Array,default:[]}},validations:{item_booking:{productId:{required:u["required"]},travelDate:{required:u["required"]},startTime:{required:u["required"]},bookingDate:{required:u["required"]},transportation:{required:u["required"]},adultNumber:{required:u["required"]},childNumber:{required:u["required"]},infantNumber:{required:u["required"]},youthNumber:{required:u["required"]},seniorNumber:{required:u["required"]},leadTravelerFirstName:{required:u["required"]},leadTravelerLastEmail:{required:u["required"],email:u["email"]},surcharge:{required:u["required"]},commissionFee:{required:u["required"]},othersIncreaseFee:{required:u["required"]},discount:{required:u["required"]},otherDecreaseFee:{required:u["required"]},taxRate:{required:u["required"]},priceOptionName:{required:u["required"]}},obj_money_receive_temp:{amount:{required:u["required"]},fee:{required:u["required"]}},obj_refund_temp:{amount:{required:u["required"]},fee:{required:u["required"]}}},filters:{getNameStatus:function(e){var t=[{value:0,label:"Pending"},{value:1,label:"Waiting"},{value:2,label:"Reject"},{value:3,label:"CF-Unpaid"},{value:4,label:"CF-Deposit"},{value:5,label:"CF-Paid"},{value:6,label:"DD-Paid"},{value:7,label:"DD-Due"},{value:8,label:"Cancel"},{value:9,label:"Others"}],i="";return t.forEach((function(t){t.value==e&&(i=t.label)})),i}},computed:D({},Object(d["b"])({current_user_logged_info:"login/getUserLoggedInfo",current_branch_id:"login/getCurrentBranchId",role_perm:"login/getInfoPerm"}),{pickerOptionTravelDate:function(){return{disabledDate:function(e){var t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),e.getTime()<t.getTime()}}},total_sales_new_booking:function(){var e=this,t=0;return e.tier_and_price.forEach((function(e){e.active&&(t+=e.sales)})),t},total_other_sales_new_booking:function(){var e=this.item_booking.surcharge+this.item_booking.commissionFee+this.item_booking.cancellationFee+this.item_booking.othersIncreaseFee;return e},total_net_sales_new_booking:function(){var e=this.getRightNumber(this.item_booking.grossSales),t=this.getRightNumber(this.item_booking.couponValue),i=this.getRightNumber(this.item_booking.discount),o=this.getRightNumber(this.item_booking.cancellationSales),a=this.getRightNumber(this.item_booking.otherDecreaseFee),n=e-(t+i+o+a);return n},total_tax_amount:function(){var e=this.item_booking.netSales/(1+this.item_booking.taxRate/100)*(this.item_booking.taxRate/100);return e},total_net_sale_before_tax:function(){var e=this.item_booking.netSales-this.item_booking.taxAmount;return e},total_remaining_amount:function(){var e=this.item_booking.netSales-this.item_booking.depositReceived;return e},total_balance:function(){var e=this.item_booking.netSales-this.item_booking.depositReceived-this.item_booking.paymentReceived-this.item_booking.refundToGuests;return e},total_money_receive_deposit_amount:function(){var e=this,t=0;return e.list_money_receive_temp.forEach((function(e){0==e.classify&&(t+=e.amount)})),t},total_refund:function(){var e=this,t=0;return e.list_refund_temp.forEach((function(e){t+=e.amount})),t},total_money_additional_payment_amount:function(){var e=this,t=0;return e.list_money_receive_temp.forEach((function(e){1==e.classify&&(t+=e.amount)})),t},total_guest_quantity:function(){var e=this.item_booking.adultNumber+this.item_booking.childNumber+this.item_booking.infantNumber+this.item_booking.youthNumber+this.item_booking.seniorNumber;return e}}),watch:{goto_view_list_bk:function(e){e&&(this.is_duplicating_booking=!1)},trigger_edit_booking:function(e){e&&(this.is_view_booking=!1)},is_add_booking:function(e){this.is_duplicating_booking||(e?(this.$v.item_booking.$reset(),this.list_money_receive_temp=[],this.list_refund_temp=[],this.tab="booking",this.item_booking={bookingNumber:"",productId:"",productCode:"",productName:"",travelDate:"",groupBooking:"",startTime:"",endTime:"",bookerId:"",bookerName:"",bookerEmail:"",bookerSaleChannel:"",bookerClient:"",duration:"",tourType:"",priceOptionName:"",transportation:"",guestQuantity:0,adultNumber:0,infantNumber:0,youthNumber:0,childNumber:0,seniorNumber:0,adultPrice:0,childPrice:0,infantPrice:0,youthPrice:0,seniorPrice:0,leadTravelerFirstName:"",leadTravelerLastName:"",leadTravelerLastPhone:"",leadTravelerLastEmail:"",leadTravelerGender:"",otherTravelerNames:[],nationality:"",passportNumber:"",bookingDate:"",foodNotes:"",otherNotes:"",pickupOrder:"",pickupTimeFrom:"",pickupTimeTo:"",hotelName:"",hotelAddress:"",sales:0,otherSales:0,surcharge:0,commissionFee:0,othersIncreaseFee:0,grossSales:0,saleDeduction:0,discount:0,couponCode:"",couponValue:"",otherDecreaseFee:0,netSales:0,taxRate:0,taxAmount:0,netSalesBeforeTax:0,depositRequested:0,depositReceived:0,remainingAmount:0,paymentReceived:0,refundToGuests:0,balance:0,emailSent:!0,invoiceSent:!0,reminderText:"",status:-1,cancellationFee:0,cancellationSales:0,receivables:0},this.is_view_booking=!1):this.is_view_booking=!0)},is_do_add_booking_mobile:function(e){1==e&&this.doSaveAddNewBookingMobile()},is_do_edit_booking_mobile:function(e){1==e&&this.doSaveEditBookingMobile()},is_view_detal_booking:function(e){1==e&&(this.openModalViewBooking(this.item_booking_to_view),this.tab="booking",this.is_view_booking=!0)},current_branch_id:function(e){!isNaN(e)&&parseInt(e)},regional_branch:function(e){e&&e.mainCurrency&&(this.money_option=Object(v["a"])(parseInt(e.mainCurrency)),1==parseInt(e.mainCurrency)&&(this.option_filter={symbol:"",thousandsSeparator:",",fractionCount:0,fractionSeparator:".",display_symbol:"VND"}),2==parseInt(e.mainCurrency)&&(this.option_filter={symbol:"",thousandsSeparator:",",fractionCount:2,fractionSeparator:".",display_symbol:"$"}),this.$forceUpdate())},total_net_sales_new_booking:function(e){this.item_booking.netSales=e,this.item_booking.receivables=e},total_tax_amount:function(e){this.item_booking.taxAmount=e},total_net_sale_before_tax:function(e){this.item_booking.netSalesBeforeTax=e},total_remaining_amount:function(e){this.item_booking.remainingAmount=e},total_balance:function(e){this.item_booking.balance=e},total_money_receive_deposit_amount:function(e){this.item_booking.depositReceived=e},total_refund:function(e){this.item_booking.refundToGuests=e},total_money_additional_payment_amount:function(e){this.item_booking.paymentReceived=e},total_guest_quantity:function(e){this.item_booking.guestQuantity=e},"item_booking.adultNumber":function(e){this.tier_and_price[0].quantity=e,this.refreshAllTierAndPrice()},"item_booking.childNumber":function(e){this.tier_and_price[1].quantity=e,this.refreshAllTierAndPrice()},"item_booking.infantNumber":function(e){this.tier_and_price[2].quantity=e,this.refreshAllTierAndPrice()},"item_booking.youthNumber":function(e){this.tier_and_price[3].quantity=e,this.refreshAllTierAndPrice()},"item_booking.seniorNumber":function(e){this.tier_and_price[4].quantity=e,this.refreshAllTierAndPrice()}},data:function(){return{is_duplicating_booking:!1,open_modal_choose_email_template:!1,value_email_template:"",list_email_template:[],open_modal_view_invoice_booking:!1,info_booking_view_invoice:{},open_modal_cancel_booking:!1,dialogControlBooking:!1,list_will_deleted_receivable:[],is_edit_money_receive:!1,is_edit_refund:!1,list_money_receive_temp:[],list_refund_temp:[],money_option:{},is_view_booking:!1,item_booking:{bookingNumber:"",productId:"",productCode:"",productName:"",travelDate:"",groupBooking:"",startTime:"",endTime:"",bookerId:"",bookerName:"",bookerEmail:"",bookerSaleChannel:"",bookerClient:"",duration:"",tourType:"",priceOptionName:"",transportation:"",guestQuantity:0,adultNumber:0,infantNumber:0,youthNumber:0,childNumber:0,seniorNumber:0,adultPrice:0,childPrice:0,infantPrice:0,youthPrice:0,seniorPrice:0,leadTravelerFirstName:"",leadTravelerLastName:"",leadTravelerLastPhone:"",leadTravelerLastEmail:"",leadTravelerGender:"",otherTravelerNames:[],nationality:"",passportNumber:"",bookingDate:"",foodNotes:"",otherNotes:"",pickupOrder:"",pickupTimeFrom:"",pickupTimeTo:"",hotelName:"",hotelAddress:"",sales:0,otherSales:0,surcharge:0,commissionFee:0,othersIncreaseFee:0,grossSales:0,saleDeduction:0,discount:0,couponCode:"",couponValue:"",otherDecreaseFee:0,netSales:0,taxRate:0,taxAmount:0,netSalesBeforeTax:0,depositRequested:0,depositReceived:0,remainingAmount:0,paymentReceived:0,refundToGuests:0,balance:0,emailSent:!0,invoiceSent:!0,reminderText:"",status:-1,cancellationFee:0,cancellationSales:0,receivables:0,price_option_selected_new_booking:null},option_start_time:[],options_range_time:[{value:"12:00am",label:"12:00am"},{value:"12:30am",label:"12:30am"},{value:"01:00am",label:"01:00am"},{value:"01:30am",label:"01:30am"},{value:"02:00am",label:"02:00am"},{value:"02:30am",label:"02:30am"},{value:"03:00am",label:"03:00am"},{value:"03:30am",label:"03:30am"},{value:"04:00am",label:"04:00am"},{value:"04:30am",label:"04:30am"},{value:"05:00am",label:"05:00am"},{value:"05:30am",label:"05:30am"},{value:"06:00am",label:"06:00am"},{value:"06:30am",label:"06:30am"},{value:"07:00am",label:"07:00am"},{value:"07:30am",label:"07:30am"},{value:"08:00am",label:"08:00am"},{value:"08:30am",label:"08:30am"},{value:"09:00am",label:"09:00am"},{value:"09:30am",label:"09:30am"},{value:"10:00am",label:"10:00am"},{value:"10:30am",label:"10:30am"},{value:"11:00am",label:"11:00am"},{value:"11:30am",label:"11:30am"},{value:"12:00pm",label:"12:00pm"},{value:"12:30pm",label:"12:30pm"},{value:"01:00pm",label:"01:00pm"},{value:"01:30pm",label:"01:30pm"},{value:"02:00pm",label:"02:00pm"},{value:"02:30pm",label:"02:30pm"},{value:"03:00pm",label:"03:00pm"},{value:"03:30pm",label:"03:30pm"},{value:"04:00pm",label:"04:00pm"},{value:"04:30pm",label:"04:30pm"},{value:"05:00pm",label:"05:00pm"},{value:"05:30pm",label:"05:30pm"},{value:"06:00pm",label:"06:00pm"},{value:"06:30pm",label:"06:30pm"},{value:"07:00pm",label:"07:00pm"},{value:"07:30pm",label:"07:30pm"},{value:"08:00pm",label:"08:00pm"},{value:"08:30pm",label:"08:30pm"},{value:"09:00pm",label:"09:00pm"},{value:"09:30pm",label:"09:30pm"},{value:"10:00pm",label:"10:00pm"},{value:"10:30pm",label:"10:30pm"},{value:"11:00pm",label:"11:00pm"},{value:"11:30pm",label:"11:30pm"}],options_gender:[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Other",value:"other"}],options_pickup_order:[{label:"#1",value:"#1"},{label:"#2",value:"#2"},{label:"#3",value:"#3"},{label:"#4",value:"#4"}],options_country_world:m["a"],hourOptions:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22],options:[],tier_and_price:[{name:"Adult",unique:"Adult",price:0,quantity:0,sales:0,active:!1},{name:"Child",unique:"Child",price:0,quantity:0,sales:0,active:!1},{name:"Infant",unique:"Infant",price:0,quantity:0,sales:0,active:!1},{name:"Youth",unique:"Youth",price:0,quantity:0,sales:0,active:!1},{name:"Senior",unique:"Senior",price:0,quantity:0,sales:0,active:!1}],options_group_booking:[{name:"No choose",value:""},{name:"Tour #1",value:"tour1"},{name:"Tour #2",value:"tour2"},{name:"Tour #3",value:"tour3"},{name:"Tour #4",value:"tour4"},{name:"Tour #5",value:"tour5"},{name:"Tour #6",value:"tour6"},{name:"Tour #7",value:"tour7"},{name:"Tour #8",value:"tour8"},{name:"Tour #9",value:"tour9"},{name:"Tour #9",value:"tour10"},{name:"Tour #9",value:"tour11"},{name:"Tour #9",value:"tour12"},{name:"Tour #9",value:"tour13"},{name:"Tour #9",value:"tour14"},{name:"Tour #9",value:"tour15"}],options_invoice_send_yes_no:[{label:"Yes",value:!0},{label:"No",value:!1}],options_status_yes_no:[{label:"Yes",value:!0},{label:"No",value:!1}],options_status_yes_no_filter:[{label:"Not selected",value:-1},{label:"Yes",value:!0},{label:"No",value:!1}],obj_money_receive_temp:{created:null,lastModified:null,amount:0,paymentType:0,classify:0,fee:"",notes:""},obj_refund_temp:{created:null,lastModified:null,amount:0,paymentType:0,fee:"",notes:""},data_product_temp:{},tab:"booking",is_view_list_booking:!0,shouldStick:!0,open_modal_add_money_receive:!1,open_modal_add_refund:!1,option_price_options:[]}},methods:{changeValueHotel:function(){var e=this,t=e.item_booking.hotelName;e.list_hotel.forEach((function(i){i.placeName==t&&(e.item_booking.hotelAddress=i.placeAddress)})),e.$forceUpdate()},changePriceOptionNewBooking:function(e){var t=this;t.is_add_booking?(t.data_product_temp.priceOptions.forEach((function(i){i.name==e&&(t.price_option_selected_new_booking=i)})),t.calculatePriceCustomer()):this.$swal({title:"Warning!",text:"If you change price option, this booking will change price follow price option! Do you want to change price? ",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, i will!",cancelButtonText:"No"}).then((function(i){i.value?(t.data_product_temp.priceOptions.forEach((function(i){i.name==e&&(t.price_option_selected_new_booking=i)})),t.calculatePriceCustomer()):t.data_product_temp.priceOptions.forEach((function(i){i.name==e&&(t.price_option_selected_new_booking=i)}))}))},calculatePriceCustomer:function(){var e=this;if(null!=e.price_option_selected_new_booking){var t="";if(t="string"==typeof e.item_booking.travelDate&&""!=e.item_booking.travelDate?new Date(e.item_booking.travelDate):e.item_booking.travelDate,""!=t){var i=null;e.price_option_selected_new_booking.prices.forEach((function(e){var o=!1,a=new Date(e.startTime);if(a.setHours(0),e.hasEndDate||null!=e.endTime){var n=new Date(e.endTime);n.setHours(23),a.getTime()<=t.getTime()<=n.getTime()&&(o=!0)}else a.getTime()<=t.getTime()&&(o=!0);var s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=s[t.getDay()],l=e.daysApply.indexOf(r);o&&-1!=l&&(i=e)})),null!=i&&i.pricings.forEach((function(t){"Adult"==t.name&&t.isActive&&t.tierPricings.forEach((function(t){t.min<=e.item_booking.seniorNumber<=t.max&&(e.$set(e.tier_and_price[0],"price",t.value),e.$set(e.tier_and_price[0],"sales",t.value*e.tier_and_price[0].quantity))})),"Child"==t.name&&t.isActive&&t.tierPricings.forEach((function(t){t.min<=e.item_booking.seniorNumber<=t.max&&(e.$set(e.tier_and_price[1],"price",t.value),e.$set(e.tier_and_price[1],"sales",t.value*e.tier_and_price[1].quantity))})),"Infant"==t.name&&t.isActive&&t.tierPricings.forEach((function(t){t.min<=e.item_booking.seniorNumber<=t.max&&(e.$set(e.tier_and_price[2],"price",t.value),e.$set(e.tier_and_price[2],"sales",t.value*e.tier_and_price[2].quantity))})),"Youth"==t.name&&t.isActive&&t.tierPricings.forEach((function(t){t.min<=e.item_booking.seniorNumber<=t.max&&(e.$set(e.tier_and_price[3],"price",t.value),e.$set(e.tier_and_price[3],"sales",t.value*e.tier_and_price[3].quantity))})),"Senior"==t.name&&t.isActive&&t.tierPricings.forEach((function(t){t.min<=e.item_booking.seniorNumber<=t.max&&(e.$set(e.tier_and_price[4],"price",t.value),e.$set(e.tier_and_price[4],"sales",t.value*e.tier_and_price[4].quantity))}))}))}}},duplicateBooking:function(){var e=this,t=JSON.parse(JSON.stringify(e.item_booking));t.id=null,t.status=3,t.depositRequested=0,t.groupBooking="",e.addBookingFromDuplicate(t)},addBookingFromDuplicate:function(e){var t=this;localStorage.getItem("user_token_fisheye_client");e.travelDate="",e.bookingDate="",t.item_booking=e,t.onDialogHideControlBooking(),t.$v.item_booking.$reset(),t.is_view_booking=!1,t.is_duplicating_booking=!0,t.$emit("duplicateBooking"),t.list_money_receive_temp=[],t.list_refund_temp=[],t.tab_add_new_booking="booking"},triggerDuplicateBooking:function(){var e=this;e.$swal({title:"Confirm",text:"Do you want to duplicate this booking?",icon:"info",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then((function(t){t.value&&e.duplicateBooking()}))},deleteBooking:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");this.$q.dialog({title:"Confirm",message:"Would you like to DELETE this booking! You will not revert data if you deleted, Are you sure?",cancel:!0,persistent:!0}).onOk((function(){e.$axios.delete("/api/Orders/Delete/"+e.item_booking.id,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Delete booking Successfully"}),e.$emit("reloadListBooking"),e.onDialogHideControlBooking(),e.$emit("backToList")})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))})).onCancel((function(){})).onDismiss((function(){}))},reloadDataBookingInView:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");e.$axios.get("/api/Orders/GetDetail?orderId="+e.item_booking.id,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.item_booking=t.data})).catch((function(t){e.item_booking.couponCode="",e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have error"})}))},updateCancelBooking:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i={orderId:e.item_booking.id,cancellationFee:e.item_booking.cancellationFee,cancellationNotes:e.item_booking.cancellationNotes};e.$axios.put("/api/Orders/Cancel",JSON.stringify(i),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.open_modal_cancel_booking=!1,e.onDialogHideControlBooking(),e.reloadDataBookingInView(),e.$emit("reloadListBooking"),e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Update successfully!"})})).catch((function(t){e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have error"})}))},triggerOpenModalCancelBooking:function(){this.open_modal_cancel_booking=!0},triggerOpenModalViewInvoice:function(){this.info_booking_view_invoice=this.item_booking,this.open_modal_view_invoice_booking=!0},routerToViewEmail:function(){var e=this.item_booking.id,t=this.value_email_template,i=this.$router.resolve({name:"preview-template",params:{booking_id:e,template_id:t}});window.open(i.href,"_blank"),this.open_modal_choose_email_template=!1},triggerOpenModalGenerateEmail:function(){this.open_modal_choose_email_template=!0},viewTourOfBooking:function(){var e=this;e.$router.push({name:"view-detail-tour",params:{tour_id:e.item_booking.tourId}})},getListEmailTemplate:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");-1!=this.current_branch_id&&this.$axios.get("/api/EmailTemplates/Get?BranchId="+e.current_branch_id+"&PageSize=1000",{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.list_email_template=t.data.emailTemplates})).catch((function(t){Object(b["a"])(t.response,e)}))},onDialogHideControlBooking:function(){this.$emit("update:trigger_control_booking",!1)},cancelEditBooking:function(){var e=this;e.$v.item_booking.$reset(),this.is_view_booking=!0,this.list_will_deleted_receivable=[]},triggerEditMoneyReceive:function(e,t){this.obj_money_receive_temp=JSON.parse(JSON.stringify(e)),this.index_money_receive_current=t,this.is_edit_money_receive=!0,this.open_modal_add_money_receive=!0},triggerEditRefund:function(e,t){this.obj_refund_temp=JSON.parse(JSON.stringify(e)),this.index_refund_current=t,this.is_edit_refund=!0,this.open_modal_add_refund=!0},checkValidateMoneyReceive:function(){var e=this;return e.$v.obj_money_receive_temp.$touch(),!e.$v.obj_money_receive_temp.$error||(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Please view error!"}),!1)},checkValidateRefund:function(){var e=this;return e.$v.obj_refund_temp.$touch(),!e.$v.obj_refund_temp.$error||(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Please view error!"}),!1)},editMoneyReceive:function(){var e=this,t=(localStorage.getItem("user_token_fisheye_client"),e.index_money_receive_current);e.$set(e.list_money_receive_temp[t],"amount",e.obj_money_receive_temp.amount),e.$set(e.list_money_receive_temp[t],"type",e.obj_money_receive_temp.type),e.$set(e.list_money_receive_temp[t],"classify",e.obj_money_receive_temp.classify),e.$set(e.list_money_receive_temp[t],"paymentType",e.obj_money_receive_temp.paymentType),e.$set(e.list_money_receive_temp[t],"fee",e.obj_money_receive_temp.fee),e.$set(e.list_money_receive_temp[t],"notes",e.obj_money_receive_temp.notes),e.is_edit_money_receive=!1,e.open_modal_add_money_receive=!1,e.$forceUpdate()},editRefund:function(){if(this.checkValidateRefund()){var e=this,t=(localStorage.getItem("user_token_fisheye_client"),e.index_refund_current);e.$set(e.list_refund_temp[t],"amount",e.obj_refund_temp.amount),e.$set(e.list_refund_temp[t],"paymentType",e.obj_refund_temp.paymentType),e.$set(e.list_refund_temp[t],"fee",e.obj_refund_temp.fee),e.$set(e.list_refund_temp[t],"notes",e.obj_refund_temp.notes),e.is_edit_refund=!1,e.open_modal_add_refund=!1,e.$forceUpdate()}},deleteMoneyReceive:function(e){var t=this;t.list_will_deleted_receivable.push(e);var i=t.list_money_receive_temp.indexOf(e);t.list_money_receive_temp.splice(i,1)},deleteRefund:function(e){var t=this;t.list_will_deleted_receivable.push(e);var i=t.list_refund_temp.indexOf(e);t.list_refund_temp.splice(i,1)},addMoneyReceive:function(){this.checkValidateMoneyReceive()&&(this.list_money_receive_temp.push(JSON.parse(JSON.stringify(this.obj_money_receive_temp))),this.open_modal_add_money_receive=!1)},addRefund:function(){this.checkValidateRefund()&&(this.list_refund_temp.push(JSON.parse(JSON.stringify(this.obj_refund_temp))),this.open_modal_add_refund=!1)},openModalViewBooking:function(e){if(this.$forceUpdate(),this.$v.item_booking.$reset(),this.is_read_tab_1||this.is_read_tab_2||this.is_read_tab_3||this.is_read_tab_4){this.is_read_tab_1?this.tab_add_new_booking="booking":this.is_read_tab_2?this.tab_add_new_booking="traveler":this.is_read_tab_3?this.tab_add_new_booking="revenue":this.is_read_tab_4&&(this.tab_add_new_booking="receivables"),this.is_view_booking=!0;var t=JSON.parse(JSON.stringify(e));null==t.cancellationFee&&(t.cancellationFee=0),t.booker?t.bookerId=t.booker.id:(t.bookerId=null,t.bookerEmail="Online website",t.bookerSaleChannel="Online website",t.bookerClient="Online website"),this.getReceivablesAPI(t.id),this.$set(this,"item_booking",t),this.item_booking.receivables=t.netSales,this.changeSelectProductNewBooking(t.productId,!0),this.$forceUpdate()}},getReceivablesAPI:function(e){var t=this,i=localStorage.getItem("user_token_fisheye_client");t.$axios.get("/api/Orders/GetReceivables?orderId="+e+"&Type=0",{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(e){t.list_money_receive_temp=e.data.receivables})).catch((function(e){Object(b["a"])(e.response,t)})),t.$axios.get("/api/Orders/GetReceivables?orderId="+e+"&Type=1",{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(e){t.list_refund_temp=e.data.receivables})).catch((function(e){Object(b["a"])(e.response,t)}))},triggerOpenModalAddMoneyReceive:function(){this.obj_money_receive_temp={created:null,lastModified:null,amount:0,paymentType:0,classify:0,fee:"",notes:""},this.open_modal_add_money_receive=!0},triggerOpenModalAddRefund:function(){this.obj_refund_temp={created:null,lastModified:null,amount:0,paymentType:0,fee:"",notes:""},this.open_modal_add_refund=!0},doSaveAddNewBookingMobile:function(){this.checkValidate()?this.$emit("doSaveAddBookingMobile",this.item_booking,this.tier_and_price,this.list_money_receive_temp,this.list_refund_temp):this.$emit("failAddBookingMobile")},doSaveEditBookingMobile:function(){if(this.checkValidate()){var e=this;localStorage.getItem("user_token_fisheye_client");e.updateFirstTab()}else e.$emit("failEditBookingMobile")},updateFirstTab:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");if("object"==s()(e.item_booking.travelDate)){var i=new Date(e.item_booking.travelDate.toISOString());i.setHours(7)}else i=e.item_booking.travelDate;if("object"==s()(e.item_booking.bookingDate)){var o=new Date(e.item_booking.bookingDate.toISOString());o.setHours(7)}else o=e.item_booking.bookingDate;var a={orderId:e.item_booking.id,productId:e.item_booking.productId,travelDate:i,startTime:e.item_booking.startTime,endTime:e.item_booking.endTime,duration:e.item_booking.duration,groupBooking:""==e.item_booking.groupBooking?null:e.item_booking.groupBooking,transportation:e.item_booking.transportation,guestQuantity:e.item_booking.guestQuantity,bookingDate:o,pickupOrder:e.item_booking.pickupOrder,hotelName:e.item_booking.hotelName,hotelAddress:e.item_booking.hotelAddress,emailSent:e.item_booking.emailSent,invoiceSent:e.item_booking.invoiceSent,reminderText:e.item_booking.reminderText};-1!=e.item_booking.status&&(a.status=e.item_booking.status),this.$axios.put("/api/Orders/UpdateFirstTab",JSON.stringify(a),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.updateSecondTab()})).catch((function(t){e.$emit("failEditBookingMobile"),t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))},updateSecondTab:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i={orderId:e.item_booking.id,bookerId:e.item_booking.bookerId,leadTravelerFirstName:e.item_booking.leadTravelerFirstName,leadTravelerLastName:e.item_booking.leadTravelerLastName,leadTravelerLastPhone:e.item_booking.leadTravelerLastPhone,leadTravelerLastEmail:e.item_booking.leadTravelerLastEmail,leadTravelerGender:e.item_booking.leadTravelerGender,pickupTimeFrom:e.item_booking.pickupTimeFrom,pickupTimeTo:e.item_booking.pickupTimeTo};this.$axios.put("/api/Orders/UpdateSecondTab",JSON.stringify(i),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.updateThirdTab()})).catch((function(t){e.$emit("failEditBookingMobile"),t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))},updateThirdTab:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i={orderId:e.item_booking.id,guestQuantity:e.item_booking.guestQuantity,adultNumber:e.item_booking.adultNumber,childNumber:e.item_booking.childNumber,infantNumber:e.item_booking.infantNumber,youthNumber:e.item_booking.youthNumber,seniorNumber:e.item_booking.seniorNumber,adultPrice:e.tier_and_price[0].price,childPrice:e.tier_and_price[1].price,infantPrice:e.tier_and_price[2].price,youthPrice:e.tier_and_price[3].price,seniorPrice:e.tier_and_price[4].price,surcharge:e.item_booking.surcharge,commission:e.item_booking.commissionFee,othersIncreaseFee:e.item_booking.othersIncreaseFee,discount:e.item_booking.discount,couponCode:e.item_booking.couponCode,otherDecreaseFee:e.item_booking.otherDecreaseFee,taxRate:e.item_booking.taxRate,taxAmount:e.item_booking.taxAmount,depositRequested:e.item_booking.depositRequested};this.$axios.put("/api/Orders/UpdateThirdTab",JSON.stringify(i),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.updateFourTab()})).catch((function(t){e.$emit("failEditBookingMobile"),t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))},updateFourTab:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");e.list_will_deleted_receivable.forEach((function(i){if(i.id&&i.orderId){var o={receivableId:i.id,orderId:i.orderId};e.$axios.delete("/api/Orders/DeleteReceivable",{data:o,headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(e){})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))}}));var i=e.list_money_receive_temp.filter((function(e){return void 0!=e.id&&null!=e.id})),o=e.list_money_receive_temp.filter((function(e){return void 0==e.id||null==e.id}));i.forEach((function(i){var o={receivableId:i.id,orderId:i.orderId,amount:i.amount,type:0,classify:i.classify,paymentType:i.paymentType,fee:i.fee,notes:i.notes};e.$axios.put("/api/Orders/UpdateReceivable",JSON.stringify(o),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(e){})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))})),o.forEach((function(i){var o={orderId:e.item_booking.id,amount:i.amount,type:0,classify:i.classify,paymentType:i.paymentType,fee:i.fee,notes:i.notes};e.$axios.post("/api/Orders/AddReceivable",JSON.stringify(o),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(e){})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))}));var a=e.list_refund_temp.filter((function(e){return void 0!=e.id&&null!=e.id})),n=e.list_refund_temp.filter((function(e){return void 0==e.id||null==e.id}));a.forEach((function(i){var o={receivableId:i.id,orderId:i.orderId,amount:i.amount,type:1,paymentType:i.paymentType,fee:i.fee,notes:i.notes};e.$axios.put("/api/Orders/UpdateReceivable",JSON.stringify(o),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(e){})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))})),n.forEach((function(i,o){var a={orderId:e.item_booking.id,amount:i.amount,type:1,paymentType:i.paymentType,fee:i.fee,notes:i.notes};e.$axios.post("/api/Orders/AddReceivable",JSON.stringify(a),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){o==n.length-1&&(e.$emit("failEditBookingMobile"),e.getReceivablesAPI(e.item_booking.id),e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Update Successfully"}),e.cancelEditBooking(),e.$emit("editBookingDone"))})).catch((function(t){e.$emit("failEditBookingMobile"),t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))})),0==n.length&&(e.getReceivablesAPI(e.item_booking.id),e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Update Successfully"}),e.cancelEditBooking(),e.$emit("editBookingDone"))},checkValidate:function(){var e=this;return e.$v.item_booking.$touch(),e.$v.item_booking.$error?(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Please view error in your booking!"}),!1):0!=e.item_booking.guestQuantity||(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Guest quantity must great than 0!"}),!1)},changeOtherIncreaseFee:function(){this.reCalculationGrossSales()},changecommissionFee:function(){this.reCalculationGrossSales()},checkCouponCode:function(){var e=this,t=e.current_branch_id;if(""!=e.item_booking.couponCode){var i=localStorage.getItem("user_token_fisheye_client");e.$axios.get("/api/Coupons/CheckValidCoupon?BranchId="+t+"&Code="+e.item_booking.couponCode,{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(t){var i=t.data;if(i.status)if(-1!=i.productIdsApplied.indexOf(e.item_booking.productId.toString())){var o=new Date(i.startTime),a=new Date(i.endTime),n=new Date;o.setHours(1),a.setHours(23),n>=o&&n<=a?1==i.type?e.item_booking.couponValue=i.value/100*e.item_booking.grossSales:e.item_booking.couponValue=i.value:(e.item_booking.couponCode="",e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Coupon is invalid"}))}else e.item_booking.couponCode="",e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Coupon is invalid"});else e.item_booking.couponCode="",e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Coupon is invalid"})})).catch((function(t){e.item_booking.couponCode="",e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Coupon is invalid"})}))}},changeSurcharge:function(){this.reCalculationGrossSales()},getRightNumber:function(e){return e?isNaN(e)||""==e?0:parseFloat(e):0},changeInputQuantityTierAndPrice:function(e){var t=this;switch(e.unique){case"Adult":t.item_booking.adultNumber=e.quantity;break;case"Child":t.item_booking.childNumber=e.quantity;break;case"Infant":t.item_booking.infantNumber=e.quantity;break;case"Youth":t.item_booking.youthNumber=e.quantity;break;case"Senior":t.item_booking.seniorNumber=e.quantity;break;default:break}t.$forceUpdate()},reCalculationGrossSales:function(){this.item_booking.grossSales=this.item_booking.surcharge+this.item_booking.commissionFee+this.item_booking.cancellationFee+this.item_booking.othersIncreaseFee+this.total_sales_new_booking},refreshTierAndPrice:function(e){""!=e.quantity&&void 0!=e.quantity&&"NaN"!=e.quantity||(e.quantity=0),""!=e.price&&void 0!=e.price&&"NaN"!=e.price||(e.price=0);var t=parseFloat(e.quantity)*parseFloat(e.price);e.sales=t,this.reCalculationGrossSales()},changeSelectBookerNewBooking:function(e){var t=this;null!=e?t.options_bookers.forEach((function(i){i.id==e&&(t.item_booking.bookerEmail=i.email,t.item_booking.bookerClient=i.client.name,t.item_booking.bookerSaleChannel=i.salesChannel)})):(t.item_booking.bookerEmail="Online Website",t.item_booking.bookerClient="Online Website",t.item_booking.bookerSaleChannel="Online Website"),t.$forceUpdate()},changePickerTravelDateNewBooking:function(){var e=this,t=this.item_booking.travelDate.getDay();switch(t){case 0:e.item_booking.day_of_week="Sunday";break;case 1:e.item_booking.day_of_week="Monday";break;case 2:e.item_booking.day_of_week="Tuesday";break;case 3:e.item_booking.day_of_week="Wednesday";break;case 4:e.item_booking.day_of_week="Thursday";break;case 5:e.item_booking.day_of_week="Friday";break;case 6:e.item_booking.day_of_week="Saturday";break}e.calculatePriceCustomer(),e.$forceUpdate()},initDataStartTime:function(){var e=this,t=[];if(e.option_start_time=[],e.data_product_temp.priceOptions){e.data_product_temp.priceOptions.forEach((function(e){e.prices.forEach((function(e){e.timeApply.forEach((function(e){var i={label:e,value:e},o=t.filter((function(t){return t.value==e}));0==o.length&&t.push(i)}))}))}));var i=t.sort((function(e,t){var i=e.value,o=t.value;return i<o?-1:i>o?1:0}));e.option_start_time=i}},initQuantityAndPrice:function(){var e=this;e.tier_and_price.forEach((function(e){e.active=!1})),e.is_view_booking?e.data_product_temp.ageGroup.ageTiers.forEach((function(t){"Senior"==t.name&&t.isActive&&(e.tier_and_price[4].active=!0,e.tier_and_price[4].price=e.item_booking.seniorPrice,e.tier_and_price[4].quantity=e.item_booking.seniorNumber,e.tier_and_price[4].sales=e.item_booking.seniorNumber*e.item_booking.seniorPrice,e.tier_and_price[4].name="Senior</br>("+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Adult"==t.name&&t.isActive&&(e.tier_and_price[0].active=!0,e.tier_and_price[0].price=e.item_booking.adultPrice,e.tier_and_price[0].quantity=e.item_booking.adultNumber,e.tier_and_price[0].sales=e.item_booking.adultNumber*e.item_booking.adultPrice,e.tier_and_price[0].name="Adult</br>("+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Child"==t.name&&t.isActive&&(e.tier_and_price[1].active=!0,e.tier_and_price[1].price=e.item_booking.childPrice,e.tier_and_price[1].quantity=e.item_booking.childNumber,e.tier_and_price[1].sales=e.item_booking.childNumber*e.item_booking.childPrice,e.tier_and_price[1].name="Child</br>("+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Infant"==t.name&&t.isActive&&(e.tier_and_price[2].active=!0,e.tier_and_price[2].price=e.item_booking.infantPrice,e.tier_and_price[2].quantity=e.item_booking.infantNumber,e.tier_and_price[2].sales=e.item_booking.infantNumber*e.item_booking.infantPrice,e.tier_and_price[2].name="Infant</br>("+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Youth"==t.name&&t.isActive&&(e.tier_and_price[3].active=!0,e.tier_and_price[3].price=e.item_booking.youthPrice,e.tier_and_price[3].quantity=e.item_booking.youthNumber,e.tier_and_price[3].sales=e.item_booking.youthNumber*e.item_booking.youthPrice,e.tier_and_price[3].name="Youth</br>("+t.minAge.toString()+" - "+t.maxAge.toString()+")")})):e.data_product_temp.ageGroup.ageTiers.forEach((function(t){"Senior"==t.name&&t.isActive&&(e.tier_and_price[4].active=!0,e.tier_and_price[4].price=0,e.tier_and_price[4].quantity=0,e.tier_and_price[4].sales=0,e.tier_and_price[4].name="Senior</br>("+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Adult"==t.name&&t.isActive&&(e.tier_and_price[0].active=!0,e.tier_and_price[0].price=0,e.tier_and_price[0].quantity=0,e.tier_and_price[0].sales=0,e.tier_and_price[0].name="Adult</br>("+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Child"==t.name&&t.isActive&&(e.tier_and_price[1].active=!0,e.tier_and_price[1].price=0,e.tier_and_price[1].quantity=0,e.tier_and_price[1].sales=0,e.tier_and_price[1].name="Child</br>("+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Infant"==t.name&&t.isActive&&(e.tier_and_price[2].active=!0,e.tier_and_price[2].price=0,e.tier_and_price[2].quantity=0,e.tier_and_price[2].sales=0,e.tier_and_price[2].name="Infant</br>("+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Youth"==t.name&&t.isActive&&(e.tier_and_price[3].active=!0,e.tier_and_price[3].price=0,e.tier_and_price[3].quantity=0,e.tier_and_price[3].sales=0,e.tier_and_price[3].name="Youth</br>("+t.minAge.toString()+" - "+t.maxAge.toString()+")")})),e.refreshAllTierAndPrice(),e.$forceUpdate()},refreshAllTierAndPrice:function(){var e=this;e.tier_and_price.forEach((function(t){e.refreshTierAndPrice(t)}))},changeSelectProductNewBooking:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this;i.list_product.forEach((function(t){t.id==e&&(i.item_booking.productCode=t.referenceCode,i.item_booking.productName=t.title)})),t||(i.item_booking.adultNumber=0,i.item_booking.infantNumber=0,i.item_booking.youthNumber=0,i.item_booking.childNumber=0,i.item_booking.seniorNumber=0,i.item_booking.guestQuantity=0);var o=localStorage.getItem("user_token_fisheye_client");i.$axios.get("/api/Products/GetProductDetail/"+e,{headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"}}).then((function(e){i.data_product_temp=e.data,i.initDataStartTime(),i.initQuantityAndPrice(),i.initDataPriceOptionOfProduct()})).catch((function(e){e.response.data?i.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:e.response.data}):i.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))},initDataPriceOptionOfProduct:function(){var e=this;e.is_view_booking||(e.item_booking.priceOptionName="");var t=[];e.data_product_temp&&e.data_product_temp.priceOptions&&(t=e.data_product_temp.priceOptions.map((function(e){return{id:e.id,name:e.name}}))),e.$set(e,"option_price_options",t)},getClassifyName:function(e){var t="";return this.options_classify_new_payment.forEach((function(i){i.value==e&&(t=i.name)})),t},getPaymentTypeName:function(e){var t="";return this.option_type_of_payment.forEach((function(i){i.value==e&&(t=i.name)})),t},getNameGroupBooking:function(e){var t="";return this.options_group_booking.forEach((function(i){i.value==e&&(t=i.name)})),t},doFilterBooking:function(e){this.$emit("doFilterBooking",e)},getNamegGroupBooking:function(e){var t="";return this.options_group_booking.forEach((function(i){i.value==e&&(t=i.name)})),t},onLongPressStop:function(){console.log("b")},refresh:function(e){setTimeout((function(){e()}),1e3)}},components:{"view-invoice-booking":g["a"]},mounted:function(){this.getListEmailTemplate()}},E=P,I=(i("0c22"),Object(T["a"])(E,B,O,!1,null,null,null)),F=I.exports;function R(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function j(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?R(i,!0).forEach((function(t){l()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):R(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}I.options.components=Object.assign({QTabs:q["J"],QTab:q["F"],QSeparator:q["C"],QTabPanels:q["H"],QTabPanel:q["G"],QInput:q["p"],QIcon:q["n"],QPopupProxy:q["B"],QTime:q["M"],QBtn:q["c"],QDialog:q["k"],QCard:q["e"],QCardActions:q["f"]},I.options.components||{}),I.options.directives=Object.assign({ClosePopup:q["a"]},I.options.directives||{});var M={name:"List-booking-mobile-page",props:{is_processed_booking:{type:Boolean,default:!1},list_product:{type:Array,default:[]},list_booking:{type:Array,default:[]},options_status_booking:{type:Array,default:[]},option_tour_type:{type:Array,default:[]},option_tour_type_filter:{type:Array,default:[]},options_main_transportation:{type:Array,default:[]},options_main_transportation_filter:{type:Array,default:[]},options_bookers:{type:Array,default:[]},options_bookers_filter:{type:Array,default:[]},loading_list_booking:{type:Boolean,default:!1},item_booking:{type:Object,default:{}},tier_and_price:{type:Array,default:[]},option_filter:{type:Object,default:{}},pagination:{type:Object,default:{}},total_sales_new_booking:{type:Number,default:0},total_other_sales_new_booking:{type:Number,default:0},total_net_sales_new_booking:{type:Number,default:0},option_type_of_payment:{type:Array,default:[]},options_classify_new_payment:{type:Array,default:[]},options_country_world_filter:{type:Array,default:[]},options_sale_in_charge:{type:Array,default:[]},is_done_add_booking_mobile:{type:Boolean,default:!1},is_read:{type:Boolean,default:!1},is_add:{type:Boolean,default:!1},is_delete:{type:Boolean,default:!1},is_group:{type:Boolean,default:!1},is_cancel:{type:Boolean,default:!1},is_read_tab_1:{type:Boolean,default:!1},is_read_tab_2:{type:Boolean,default:!1},is_read_tab_3:{type:Boolean,default:!1},is_read_tab_4:{type:Boolean,default:!1},is_update_tab_1:{type:Boolean,default:!1},is_update_tab_2:{type:Boolean,default:!1},is_update_tab_3:{type:Boolean,default:!1},is_update_tab_4:{type:Boolean,default:!1},option_price_options:{type:Array,default:[]},options_hotel:{type:Array,default:[]},list_hotel:{type:Array,default:[]}},filters:{getNameStatus:function(e){var t=[{value:0,label:"Pending"},{value:1,label:"Waiting"},{value:2,label:"Reject"},{value:3,label:"CF-Unpaid"},{value:4,label:"CF-Deposit"},{value:5,label:"CF-Paid"},{value:6,label:"DD-Paid"},{value:7,label:"DD-Due"},{value:8,label:"Cancel"},{value:9,label:"Others"}],i="";return t.forEach((function(t){t.value==e&&(i=t.label)})),i}},computed:j({listChoosedBooking:function(){var e=[],t=this;return t.list_booking_grouped.forEach((function(t){t.list_booking.forEach((function(t){t.check_select&&e.push(t)}))})),e}},Object(d["b"])({current_user_logged_info:"login/getUserLoggedInfo",current_branch_id:"login/getCurrentBranchId",role_perm:"login/getInfoPerm"}),{total_page_mobile:function(){if(this.pagination_mobile.rowsNumber&&this.pagination.rowsPerPage){var e=this.pagination_mobile.rowsNumber/this.pagination.rowsPerPage;return parseInt(e)}return 0}}),watch:{is_done_add_booking_mobile:function(e){1==e&&this.backToListBooking()},tier_and_price:function(e){},current_branch_id:function(e){!isNaN(e)&&parseInt(e)},list_booking:function(e){e.length>0?this.initDataToshowBooking(e):this.list_booking_grouped=[]},pagination:function(e){this.pagination_mobile=e}},data:function(){return{pagination_mobile:{},is_add_booking:!1,is_view_detail_booking:!1,list_booking_grouped:[],options_group_booking:[{name:"Tour #1",value:"tour1"},{name:"Tour #2",value:"tour2"},{name:"Tour #3",value:"tour3"},{name:"Tour #4",value:"tour4"},{name:"Tour #5",value:"tour5"},{name:"Tour #6",value:"tour6"},{name:"Tour #7",value:"tour7"},{name:"Tour #8",value:"tour8"},{name:"Tour #9",value:"tour9"},{name:"Tour #9",value:"tour10"},{name:"Tour #9",value:"tour11"},{name:"Tour #9",value:"tour12"},{name:"Tour #9",value:"tour13"},{name:"Tour #9",value:"tour14"},{name:"Tour #9",value:"tour15"}],is_do_add_booking_mobile:!1,is_do_edit_booking_mobile:!1,item_booking_to_view:{},trigger_control_booking:!1,is_holding_booking:!1,booking_change_group:null,nameHeader:"Booking List",tab:"booking",is_view_list_booking:!0,trigger_edit_booking:!1,shouldStick:!0}},methods:{changePagePagination:function(){this.$emit("changePaginationMobile",this.pagination_mobile)},duplicateBooking:function(){this.is_add_booking=!0,this.nameHeader="Add booking"},reloadListBooking:function(){this.$emit("reloadListBooking")},isCurrentDate:function(e){var t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0);var i=new Date(e);return i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.getTime()==t.getTime()},groupBookingFail:function(){this.$refs.headerBooking.groupBookingFail()},groupBookingFromMobile:function(e){this.$emit("groupBookingsFromMobile",this.listChoosedBooking,e)},triggerControlBooking:function(){this.trigger_control_booking=!0},editBookingDone:function(){this.$emit("editBookingDone")},triggerEditBooking:function(){this.trigger_edit_booking=!0},failAddBookingMobile:function(){this.is_do_add_booking_mobile=!1},failEditBookingMobile:function(){this.is_do_edit_booking_mobile=!1},doSaveAddBookingMobile:function(e,t,i,o){this.$emit("doSaveAddBookingMobile",e,t,i,o)},doTriggerSaveAddNewBookingMobile:function(){this.is_do_add_booking_mobile=!0},doTriggerSaveEditBookingMobile:function(){this.is_do_edit_booking_mobile=!0},doAddBookingMobile:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.is_add_booking=e,this.nameHeader="Add booking",t&&this.$emit("hideHeaderUnprocessedTab",!0)},getClassifyName:function(e){var t="";return this.options_classify_new_payment.forEach((function(i){i.value==e&&(t=i.name)})),t},getPaymentTypeName:function(e){var t="";return this.option_type_of_payment.forEach((function(i){i.value==e&&(t=i.name)})),t},getNameGroupBooking:function(e){var t="";return this.options_group_booking.forEach((function(i){i.value==e&&(t=i.name)})),t},doFilterBooking:function(e){this.$emit("doFilterBooking",e)},getNamegGroupBooking:function(e){var t="";return this.options_group_booking.forEach((function(i){i.value==e&&(t=i.name)})),t},initDataToshowBooking:function(e){var t=[],i=[];e.forEach((function(e,t){-1==i.indexOf(e.travelDate)&&i.push(e.travelDate)})),i.sort(),i.forEach((function(e){var i={date_travel:e,list_booking:[]};t.push(i)})),e.forEach((function(e,i){t.forEach((function(t){e.travelDate==t.date_travel&&t.list_booking.push(e)}))})),this.list_booking_grouped=t},handleHold:function(e){var t=e.evt,i=(y()(e,["evt"]),this),o=t.path.find((function(e){if(e.id)return e})),a=o.id;if(isNaN(a))alert("error");else{i.list_booking_grouped.forEach((function(e){e.list_booking.forEach((function(e){e.id==a&&e.is_grouped&&(i.is_holding_booking=!0,e.choosed_change_group=!0,i.booking_change_group=e,i.$forceUpdate())}))}))}},onLongPressStart:function(e){e.is_grouped&&(this.is_holding_booking=!0,e.choosed_change_group=!0,this.booking_change_group=e,this.$forceUpdate())},onLongPressStop:function(){console.log("b")},refresh:function(e){setTimeout((function(){e()}),1e3)},backToListBooking:function(){this.is_view_list_booking=!0,this.is_add_booking=!1,this.is_view_detail_booking=!1,this.trigger_edit_booking=!1,this.nameHeader="",this.is_processed_booking&&this.$emit("hideHeaderUnprocessedTab",!1)},resetChoosedBooking:function(){var e=this;e.list_booking_grouped.forEach((function(e){e.list_booking.forEach((function(e){e.check_select=!1}))}))},clearBookingChoosedChangeGroup:function(){var e=this;e.is_holding_booking=!1,e.$set(e.booking_change_group,"choosed_change_group",!1),e.$forceUpdate()},viewDetailBookingMobile:function(e){this.is_view_list_booking=!1,this.nameHeader=this.formatNameBooking(e),this.item_booking_to_view=e,this.is_view_detail_booking=!0,this.is_processed_booking&&this.$emit("hideHeaderUnprocessedTab",!0)},formatNameBooking:function(e){var t=e.productCode+" - "+e.transportation+" - "+e.guestQuantity;return t}},components:{"header-mobile":S,"add-booking-mobile":F},mounted:function(){this.list_booking.length>0&&this.initDataToshowBooking(this.list_booking)}},z=M,L=(i("fd95"),Object(T["a"])(z,k,f,!1,null,null,null)),V=L.exports;function G(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function H(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?G(i,!0).forEach((function(t){l()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):G(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}L.options.components=Object.assign({QCheckbox:q["h"],QIcon:q["n"],QSeparator:q["C"],QPagination:q["A"]},L.options.components||{}),L.options.directives=Object.assign({TouchHold:q["S"]},L.options.directives||{});var Q={name:"List-booking-desktop-page",props:{status_props_booking:{type:Number,default:-1},is_processed_booking:{type:Boolean,default:!1},is_adding_booking_mobile:{type:Boolean,default:!1}},filters:{getNameStatus:function(e){var t=[{value:0,label:"Pending"},{value:1,label:"Waiting"},{value:2,label:"Reject"},{value:3,label:"CF-Unpaid"},{value:4,label:"CF-Deposit"},{value:5,label:"CF-Paid"},{value:6,label:"DD-Paid"},{value:7,label:"DD-Due"},{value:8,label:"Cancel"},{value:9,label:"Others"}],i="";return t.forEach((function(t){t.value==e&&(i=t.label)})),i},formatPaymentTime:function(e){var t=new Date(e);return t.toLocaleDateString()}},watch:{current_branch_id:function(e){!isNaN(e)&&parseInt(e)>0&&(this.getListHotel(),this.getListSaleInCharge(),this.getListClient(),this.getListEmailTemplate(),this.getListBooking(),this.getListProduct(),this.getListMainTransportation(),this.getListBooker())},regional_branch:function(e){e&&e.mainCurrency&&(this.money_option=Object(v["a"])(parseInt(e.mainCurrency)),1==parseInt(e.mainCurrency)&&(this.option_filter={symbol:"",thousandsSeparator:",",fractionCount:0,fractionSeparator:".",display_symbol:"VND"}),2==parseInt(e.mainCurrency)&&(this.option_filter={symbol:"",thousandsSeparator:",",fractionCount:2,fractionSeparator:".",display_symbol:"$"}),this.$forceUpdate())},role_perm:function(e){this.$forceUpdate()},total_net_sales_new_booking:function(e){this.item_booking.netSales=e,this.item_booking.receivables=e},total_tax_amount:function(e){this.item_booking.taxAmount=e},total_net_sale_before_tax:function(e){this.item_booking.netSalesBeforeTax=e},total_remaining_amount:function(e){this.item_booking.remainingAmount=e},total_balance:function(e){this.item_booking.balance=e},total_money_receive_deposit_amount:function(e){this.item_booking.depositReceived=e},total_refund:function(e){this.item_booking.refundToGuests=e},total_money_additional_payment_amount:function(e){this.item_booking.paymentReceived=e},total_guest_quantity:function(e){this.item_booking.guestQuantity=e},"item_booking.adultNumber":function(e){this.tier_and_price[0].quantity=e,this.refreshAllTierAndPrice()},"item_booking.childNumber":function(e){this.tier_and_price[1].quantity=e,this.refreshAllTierAndPrice()},"item_booking.infantNumber":function(e){this.tier_and_price[2].quantity=e,this.refreshAllTierAndPrice()},"item_booking.youthNumber":function(e){this.tier_and_price[3].quantity=e,this.refreshAllTierAndPrice()},"item_booking.seniorNumber":function(e){this.tier_and_price[4].quantity=e,this.refreshAllTierAndPrice()},"info_filter_booking.date_range":function(e){e.end&&this.getListBooking()},"pagination.rowsPerPage":function(e){this.getListBooking()}},computed:H({},Object(d["b"])({current_user_logged_info:"login/getUserLoggedInfo",current_branch_id:"login/getCurrentBranchId",regional_branch:"login/getInfoRegionalBranch",role_perm:"login/getInfoPerm",is_role_admin:"login/getRoleAdmin",is_role_mod:"login/getRoleMod",is_role_operation:"login/getRoleOperation",is_role_operation_can_group_bk:"login/getRoleOperationCanGroupBK",is_role_staff:"login/getRoleStaff",is_role_tour_guide:"login/getRoleTourGuide"}),{is_read:function(){return this.getPermRole("order:read")},is_add:function(){return this.getPermRole("order:add")},is_delete:function(){return this.getPermRole("order:delete")},is_group:function(){return this.getPermRole("order:group")},is_cancel:function(){return this.getPermRole("order:cancel")},is_read_tab_1:function(){return this.getPermRole("order:read-tab1")},is_read_tab_2:function(){return this.getPermRole("order:read-tab2")},is_read_tab_3:function(){return this.getPermRole("order:read-tab3")},is_read_tab_4:function(){return this.getPermRole("order:read-tab4")},is_update_tab_1:function(){return this.getPermRole("order:update-tab1")},is_update_tab_2:function(){return this.getPermRole("order:update-tab2")},is_update_tab_3:function(){return this.getPermRole("order:update-tab3")},is_update_tab_4:function(){return this.getPermRole("order:update-tab4")},is_groupable:function(){var e=!0;if(this.selected_booking.length>0){if(1==this.selected_booking.length)return!0;var t=this.selected_booking[0].productCode,i=this.selected_booking[0].travelDate;return this.selected_booking.forEach((function(o){t==o.productCode&&i==o.travelDate||(e=!1)})),e}return e},pickerOptionTravelDate:function(){return{disabledDate:function(e){var t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),e.getTime()<t.getTime()}}},selected_booking:function(){var e=[];return this.list_booking.forEach((function(t){t.check_select&&e.push(t)})),e},total_sales_new_booking:function(){var e=this,t=0;return e.tier_and_price.forEach((function(e){e.active&&(t+=e.sales)})),t},total_other_sales_new_booking:function(){var e=this.item_booking.surcharge+this.item_booking.commissionFee+this.item_booking.cancellationFee+this.item_booking.othersIncreaseFee;return e},total_net_sales_new_booking:function(){var e=this.getRightNumber(this.item_booking.grossSales),t=this.getRightNumber(this.item_booking.couponValue),i=this.getRightNumber(this.item_booking.discount),o=this.getRightNumber(this.item_booking.cancellationSales),a=this.getRightNumber(this.item_booking.otherDecreaseFee),n=e-(t+i+o+a);return n},total_tax_amount:function(){var e=this.item_booking.netSales/(1+this.item_booking.taxRate/100)*(this.item_booking.taxRate/100);return e},total_net_sale_before_tax:function(){var e=this.item_booking.netSales-this.item_booking.taxAmount;return e},total_remaining_amount:function(){var e=this.item_booking.netSales-this.item_booking.depositReceived;return e},total_balance:function(){var e=this.item_booking.netSales-this.item_booking.depositReceived-this.item_booking.paymentReceived-this.item_booking.refundToGuests;return e},total_money_receive_deposit_amount:function(){var e=this,t=0;return e.list_money_receive_temp.forEach((function(e){0==e.classify&&(t+=e.amount)})),t},total_refund:function(){var e=this,t=0;return e.list_refund_temp.forEach((function(e){t+=e.amount})),t},total_money_additional_payment_amount:function(){var e=this,t=0;return e.list_money_receive_temp.forEach((function(e){1==e.classify&&(t+=e.amount)})),t},total_guest_quantity:function(){var e=this.item_booking.adultNumber+this.item_booking.childNumber+this.item_booking.infantNumber+this.item_booking.youthNumber+this.item_booking.seniorNumber;return e}}),validations:{item_booking:{productId:{required:u["required"]},travelDate:{required:u["required"]},startTime:{required:u["required"]},bookingDate:{required:u["required"]},transportation:{required:u["required"]},adultNumber:{required:u["required"]},childNumber:{required:u["required"]},infantNumber:{required:u["required"]},youthNumber:{required:u["required"]},seniorNumber:{required:u["required"]},leadTravelerFirstName:{required:u["required"]},leadTravelerLastEmail:{required:u["required"],email:u["email"]},surcharge:{required:u["required"]},commissionFee:{required:u["required"]},othersIncreaseFee:{required:u["required"]},discount:{required:u["required"]},otherDecreaseFee:{required:u["required"]},taxRate:{required:u["required"]},priceOptionName:{required:u["required"]}},obj_money_receive_temp:{amount:{required:u["required"]},fee:{required:u["required"]}},obj_refund_temp:{amount:{required:u["required"]},fee:{required:u["required"]}}},data:function(){return{will_save_tab_3:!1,is_true:!0,tour_detail:{src:"",class:"tour_detail_booking"},hourOptions:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22],item_booking:{bookingNumber:"",productId:"",productCode:"",productName:"",travelDate:"",groupBooking:"",startTime:"",endTime:"",bookerId:"",refNo:"",salesInCharge:[],bookerName:"",bookerEmail:"",bookerSaleChannel:"",bookerClient:"",duration:"",tourType:"",priceOptionName:"",transportation:"",guestQuantity:0,adultNumber:0,infantNumber:0,youthNumber:0,childNumber:0,seniorNumber:0,adultPrice:0,childPrice:0,infantPrice:0,youthPrice:0,seniorPrice:0,leadTravelerFirstName:"",leadTravelerLastName:"",leadTravelerLastPhone:"",leadTravelerLastEmail:"",leadTravelerGender:"",otherTravelerNames:[],nationality:"",passportNumber:"",bookingDate:"",foodNotes:"",otherNotes:"",pickupOrder:"",pickupTimeFrom:"",pickupTimeTo:"",hotelName:"",hotelAddress:"",sales:0,otherSales:0,surcharge:0,commissionFee:0,othersIncreaseFee:0,grossSales:0,saleDeduction:0,discount:0,couponCode:"",couponValue:"",otherDecreaseFee:0,netSales:0,taxRate:0,taxAmount:0,netSalesBeforeTax:0,depositRequested:0,depositReceived:0,remainingAmount:0,paymentReceived:0,refundToGuests:0,balance:0,emailSent:!0,invoiceSent:!0,reminderText:"",status:-1,cancellationFee:0,cancellationSales:0,receivables:0},item_booking_backup:{bookingNumber:"",productId:"",productCode:"",productName:"",travelDate:"",groupBooking:"",startTime:"",endTime:"",bookerId:"",refNo:"",salesInCharge:[],bookerName:"",bookerEmail:"",bookerSaleChannel:"",bookerClient:"",duration:"",tourType:"",priceOptionName:"",transportation:"",guestQuantity:0,adultNumber:0,infantNumber:0,youthNumber:0,childNumber:0,seniorNumber:0,adultPrice:0,childPrice:0,infantPrice:0,youthPrice:0,seniorPrice:0,leadTravelerFirstName:"",leadTravelerLastName:"",leadTravelerLastPhone:"",leadTravelerLastEmail:"",leadTravelerGender:"",otherTravelerNames:[],nationality:"",passportNumber:"",bookingDate:"",foodNotes:"",otherNotes:"",pickupOrder:"",pickupTimeFrom:"",pickupTimeTo:"",hotelName:"",hotelAddress:"",sales:0,otherSales:0,surcharge:0,commissionFee:0,othersIncreaseFee:0,grossSales:0,saleDeduction:0,discount:0,couponCode:"",couponValue:"",otherDecreaseFee:0,netSales:0,taxRate:0,taxAmount:0,netSalesBeforeTax:0,depositRequested:0,depositReceived:0,remainingAmount:0,paymentReceived:0,refundToGuests:0,balance:0,emailSent:!0,invoiceSent:!0,reminderText:"",status:-1,cancellationFee:0,cancellationSales:0,receivables:0},info_booking_view_invoice:{},data_total_row:{guest_quantity:0,adult_number:0,child_number:0,infant_number:0,youth_number:0,senior_number:0,adult_price:0,child_price:0,infant_price:0,youth_price:0,senior_price:0,sales:0,other_sales:0,surcharge:0,commission:0,cancellation_fee:0,other_revenue:0,gross_sales:0,sales_deduction:0,discount:0,coupon_value:0,cancellation_sales:0,other_deduction:0,net_sales:0,tax_amount:0,net_sale_before_tax:0,deposit_request:0,deposit_receive:0,remaining_amount:0,payment_receive:0,refund_to_guess:0,balance:0},options_country_world:m["a"],options_country_world_filter:m["a"],options_range_time:[{value:"12:00am",label:"12:00am"},{value:"12:30am",label:"12:30am"},{value:"01:00am",label:"01:00am"},{value:"01:30am",label:"01:30am"},{value:"02:00am",label:"02:00am"},{value:"02:30am",label:"02:30am"},{value:"03:00am",label:"03:00am"},{value:"03:30am",label:"03:30am"},{value:"04:00am",label:"04:00am"},{value:"04:30am",label:"04:30am"},{value:"05:00am",label:"05:00am"},{value:"05:30am",label:"05:30am"},{value:"06:00am",label:"06:00am"},{value:"06:30am",label:"06:30am"},{value:"07:00am",label:"07:00am"},{value:"07:30am",label:"07:30am"},{value:"08:00am",label:"08:00am"},{value:"08:30am",label:"08:30am"},{value:"09:00am",label:"09:00am"},{value:"09:30am",label:"09:30am"},{value:"10:00am",label:"10:00am"},{value:"10:30am",label:"10:30am"},{value:"11:00am",label:"11:00am"},{value:"11:30am",label:"11:30am"},{value:"12:00pm",label:"12:00pm"},{value:"12:30pm",label:"12:30pm"},{value:"01:00pm",label:"01:00pm"},{value:"01:30pm",label:"01:30pm"},{value:"02:00pm",label:"02:00pm"},{value:"02:30pm",label:"02:30pm"},{value:"03:00pm",label:"03:00pm"},{value:"03:30pm",label:"03:30pm"},{value:"04:00pm",label:"04:00pm"},{value:"04:30pm",label:"04:30pm"},{value:"05:00pm",label:"05:00pm"},{value:"05:30pm",label:"05:30pm"},{value:"06:00pm",label:"06:00pm"},{value:"06:30pm",label:"06:30pm"},{value:"07:00pm",label:"07:00pm"},{value:"07:30pm",label:"07:30pm"},{value:"08:00pm",label:"08:00pm"},{value:"08:30pm",label:"08:30pm"},{value:"09:00pm",label:"09:00pm"},{value:"09:30pm",label:"09:30pm"},{value:"10:00pm",label:"10:00pm"},{value:"10:30pm",label:"10:30pm"},{value:"11:00pm",label:"11:00pm"},{value:"11:30pm",label:"11:30pm"}],options_range_time_filter:[{value:-1,label:"Not selected"},{value:"12:00am",label:"12:00am"},{value:"12:30am",label:"12:30am"},{value:"01:00am",label:"01:00am"},{value:"01:30am",label:"01:30am"},{value:"02:00am",label:"02:00am"},{value:"02:30am",label:"02:30am"},{value:"03:00am",label:"03:00am"},{value:"03:30am",label:"03:30am"},{value:"04:00am",label:"04:00am"},{value:"04:30am",label:"04:30am"},{value:"05:00am",label:"05:00am"},{value:"05:30am",label:"05:30am"},{value:"06:00am",label:"06:00am"},{value:"06:30am",label:"06:30am"},{value:"07:00am",label:"07:00am"},{value:"07:30am",label:"07:30am"},{value:"08:00am",label:"08:00am"},{value:"08:30am",label:"08:30am"},{value:"09:00am",label:"09:00am"},{value:"09:30am",label:"09:30am"},{value:"10:00am",label:"10:00am"},{value:"10:30am",label:"10:30am"},{value:"11:00am",label:"11:00am"},{value:"11:30am",label:"11:30am"},{value:"12:00pm",label:"12:00pm"},{value:"12:30pm",label:"12:30pm"},{value:"01:00pm",label:"01:00pm"},{value:"01:30pm",label:"01:30pm"},{value:"02:00pm",label:"02:00pm"},{value:"02:30pm",label:"02:30pm"},{value:"03:00pm",label:"03:00pm"},{value:"03:30pm",label:"03:30pm"},{value:"04:00pm",label:"04:00pm"},{value:"04:30pm",label:"04:30pm"},{value:"05:00pm",label:"05:00pm"},{value:"05:30pm",label:"05:30pm"},{value:"06:00pm",label:"06:00pm"},{value:"06:30pm",label:"06:30pm"},{value:"07:00pm",label:"07:00pm"},{value:"07:30pm",label:"07:30pm"},{value:"08:00pm",label:"08:00pm"},{value:"08:30pm",label:"08:30pm"},{value:"09:00pm",label:"09:00pm"},{value:"09:30pm",label:"09:30pm"},{value:"10:00pm",label:"10:00pm"},{value:"10:30pm",label:"10:30pm"},{value:"11:00pm",label:"11:00pm"},{value:"11:30pm",label:"11:30pm"}],options_group_booking:[{name:"No choose",value:""},{name:"Tour #1",value:"tour1"},{name:"Tour #2",value:"tour2"},{name:"Tour #3",value:"tour3"},{name:"Tour #4",value:"tour4"},{name:"Tour #5",value:"tour5"},{name:"Tour #6",value:"tour6"},{name:"Tour #7",value:"tour7"},{name:"Tour #8",value:"tour8"},{name:"Tour #9",value:"tour9"}],options_status_booking:[{value:-1,label:"No choose"},{value:0,label:"Pending"},{value:1,label:"Waiting"},{value:2,label:"Reject"},{value:3,label:"CF-Unpaid"},{value:9,label:"Others"}],options_status_booking_filter:[{value:-1,label:"Not selected"},{value:0,label:"Pending"},{value:1,label:"Waiting"},{value:2,label:"Reject"},{value:3,label:"CF-Unpaid"},{value:4,label:"CF-Deposit"},{value:5,label:"CF-Paid"},{value:6,label:"DD-Paid"},{value:7,label:"DD-Due"},{value:8,label:"Cancel"},{value:9,label:"Others"}],options_main_transportation:[],options_main_transportation_filter:[],option_start_time:[],options_day_of_week:[{value:"Monday",label:"Monday"},{value:"Tuesday",label:"Tuesday"},{value:"Wednesday",label:"Wednesday"},{value:"Thursday",label:"Thursday"},{value:"Friday",label:"Friday"},{value:"Saturday",label:"Saturday"},{value:"Sunday",label:"Sunday"}],options_day_of_week_filter:[{value:-1,label:"Not selected"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"},{value:0,label:"Sunday"}],option_tour_type:[],option_tour_type_filter:[],option_price_options:[],options_status_yes_no:[{label:"Yes",value:!0},{label:"No",value:!1}],options_status_yes_no_filter:[{label:"Not selected",value:-1},{label:"Yes",value:!0},{label:"No",value:!1}],options_invoice_send_yes_no:[{label:"Yes",value:!0},{label:"No",value:!1}],options_hotel:[],list_hotel:[],list_sale_in_charge:[],list_bookers_client_filter:[],list_bookers_sale_channel:[],options_bookers:[],options_bookers_filter:[],options_sale_in_charge:[],options_sale_in_charge_filter:[],options_gender:[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Other",value:"other"}],options_pickup_order:[{label:"#1",value:"#1"},{label:"#2",value:"#2"},{label:"#3",value:"#3"},{label:"#4",value:"#4"}],options_classify_new_payment:[{name:"Deposit received",value:0},{name:"Additional payment",value:1}],option_type_of_payment:[{name:"Cash",value:0},{name:"Bank Transfer",value:1},{name:"Paypal",value:2},{name:"Credit Card",value:3}],list_product:[],list_booking:[],options_list_group_tour:["tour1","tour2","tour3","Tour4"],data_product_temp:{},temp_duration:{days:"",hours:"",minutes:""},list_money_receive_temp:[],obj_money_receive_temp:{created:null,lastModified:null,amount:0,paymentType:0,classify:0,fee:"",notes:""},index_money_receive_current:-1,list_refund_temp:[],obj_refund_temp:{created:null,lastModified:null,amount:0,paymentType:0,fee:"",notes:""},index_refund_current:-1,list_will_deleted_receivable:[],tier_and_price:[{name:"Adult",unique:"Adult",price:0,quantity:0,sales:0,active:!1},{name:"Child",unique:"Child",price:0,quantity:0,sales:0,active:!1},{name:"Infant",unique:"Infant",price:0,quantity:0,sales:0,active:!1},{name:"Youth",unique:"Youth",price:0,quantity:0,sales:0,active:!1},{name:"Senior",unique:"Senior",price:0,quantity:0,sales:0,active:!1}],loading:{loading_product:!1,loading_list_booking:!1,loading_list_booker:!1},open_modal_view_detail_tour:!1,open_modal_choose_email_template:!1,value_email_template:"",list_email_template:[],open_modal_view_invoice_booking:!1,open_modal_cancel_booking:!1,is_open_dialog_choose_duration:!1,open_modal_add_money_receive:!1,open_modal_add_refund:!1,tab:"details",tab_add_new_booking:"booking",pagination:{sortBy:"stt",descending:!1,page:1,rowsPerPage:20,rowsNumber:20},group_booking_choosed:null,open_modal_add_booking:!1,selected:[],columns:p["a"],info_filter_booking:{status:-1,booking_number:"",product_name:"",date_range:{},day_of_week:-1,tour_type:-1,start_time:-1,group_booking:"",transportation:"Not selected",booker_name:"Not selected",booker_client:-1,booker_sale_channel:"",lead_first_name:"",lead_last_name:"",nationality:"",lead_email:"",food_note:"",other_note:"",booking_date:"",email_sent:-1,invoice_sent:-1,salesInCharge:[],refNo:""},options:[],is_view_booking:!1,is_add_booking:!1,is_done_add_booking_mobile:!1,options_status:[],current_booking_select_to_view:{},is_edit_money_receive:!1,is_edit_refund:!1,checkbox_temp:!1,money_option:{},option_filter:{symbol:"",thousandsSeparator:",",fractionCount:0,fractionSeparator:".",display_symbol:"VND"},is_edit_tab_1:!1,is_edit_tab_2:!1,is_edit_tab_3:!1,is_edit_tab_4:!1,price_option_selected_new_booking:null,recently_change_product:!1}},methods:{changePaginationMobile:function(e){this.$set(this.pagination,"page",e.page),this.getListBooking()},onRequest:function(e){this.$set(this,"pagination",e.pagination),this.getListBooking()},reloadListBooking:function(){this.getListBooking()},routerToAddHotel:function(){var e=this.$router.resolve({name:"master-list-management",query:{hotel:!0}});window.open(e.href,"_blank")},addBookingFromDuplicate:function(e){var t=this;localStorage.getItem("user_token_fisheye_client");e.travelDate="",e.bookingDate="",t.item_booking=e,t.open_modal_add_booking=!1,t.$v.item_booking.$reset(),t.is_view_booking=!1,t.is_add_booking=!0,t.is_edit_tab_1=!0,t.is_edit_tab_2=!0,t.is_edit_tab_3=!0,t.is_edit_tab_4=!0,t.list_money_receive_temp=[],t.list_refund_temp=[],t.tab_add_new_booking="booking",setTimeout((function(){t.list_money_receive_temp=[],t.list_refund_temp=[],t.open_modal_add_booking=!0}),500)},duplicateBooking:function(){var e=this,t=JSON.parse(JSON.stringify(e.item_booking));t.id=null,t.status=3,t.depositRequested=0,t.groupBooking="",e.addBookingFromDuplicate(t)},triggerDuplicateBooking:function(){var e=this;e.$swal({title:"Confirm",text:"Do you want to duplicate this booking? It will open new modal to show dupplicated booking!",icon:"info",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then((function(t){t.value&&e.duplicateBooking()}))},resetValidateTab1:function(){var e=this;e.$v.item_booking.productId.$reset(),e.$v.item_booking.travelDate.$reset(),e.$v.item_booking.startTime.$reset(),e.$v.item_booking.transportation.$reset(),e.$v.item_booking.bookingDate.$reset(),e.$v.item_booking.priceOptionName.$reset(),e.recently_change_product=!1},resetValidateTab2:function(){var e=this;e.$v.item_booking.adultNumber.$reset(),e.$v.item_booking.childNumber.$reset(),e.$v.item_booking.infantNumber.$reset(),e.$v.item_booking.youthNumber.$reset(),e.$v.item_booking.seniorNumber.$reset(),e.$v.item_booking.leadTravelerFirstName.$reset(),e.$v.item_booking.leadTravelerLastEmail.$reset()},resetValidateTab3:function(){var e=this;e.$v.item_booking.surcharge.$reset(),e.$v.item_booking.commissionFee.$reset(),e.$v.item_booking.othersIncreaseFee.$reset(),e.$v.item_booking.discount.$reset(),e.$v.item_booking.otherDecreaseFee.$reset(),e.$v.item_booking.taxRate.$reset()},checkIsEditingAnotherTab:function(){this.is_edit_tab_1||this.is_edit_tab_2||this.is_edit_tab_3||this.is_edit_tab_4?this.is_view_booking=!1:this.is_view_booking=!0},cancelEditTabOneBooking:function(){this.is_edit_tab_1=!1,this.resetValidateTab1()},cancelEditTabTwoBooking:function(){this.is_edit_tab_2=!1,this.checkIsEditingAnotherTab(),this.resetValidateTab2()},cancelEditTabThreeBooking:function(){this.is_edit_tab_3=!1,this.checkIsEditingAnotherTab(),this.resetValidateTab3()},cancelEditTabFourBooking:function(){this.is_edit_tab_4=!1,this.checkIsEditingAnotherTab(),this.resetValidateTab3()},saveEditTabOneBooking:function(){var e=this;if(this.checkValidateTabOne()){e=this,localStorage.getItem("user_token_fisheye_client");e.updateFirstTab(),e.recently_change_product=!1}},saveEditTabTwoBooking:function(){var e=this;if(this.checkValidateTabTwo()){e=this,localStorage.getItem("user_token_fisheye_client");e.updateSecondTab()}},saveEditTabThreeBooking:function(){var e=this;if(this.checkValidateTabThree()){e=this,localStorage.getItem("user_token_fisheye_client");e.updateThirdTab()}},saveEditTabFourBooking:function(){var e=this;if(this.checkValidateTabFour()){e=this,localStorage.getItem("user_token_fisheye_client");e.updateFourTab()}},triggerEditTabOneBooking:function(){this.is_edit_tab_1=!0,this.is_view_booking=!1},triggerEditTabTwoBooking:function(){this.is_edit_tab_2=!0,this.is_view_booking=!1},triggerEditTabThreeBooking:function(){this.is_edit_tab_3=!0,this.is_view_booking=!1},triggerEditTabFourBooking:function(){this.is_edit_tab_4=!0,this.is_view_booking=!1},getNameNationality:function(e){var t="";return""!=e&&this.options_country_world.forEach((function(i){i.code==e&&(t=i.name)})),t},checkCanGroupBookingMobile:function(e){var t=!0;if(e.length>0){if(1==e.length)return!0;var i=e[0].productCode,o=e[0].travelDate;return e.forEach((function(e){i==e.productCode&&o==e.travelDate||(t=!1)})),t}return t},doGroupTourMobile:function(e,t){var i=this,o=e.map((function(e){return e.id})),a=localStorage.getItem("user_token_fisheye_client"),n={orderIds:o,branchId:parseInt(i.current_branch_id),tourIndex:t};i.$axios.post("/api/Orders/Group",JSON.stringify(n),{headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"}}).then((function(e){i.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Group booking successfully!"}),i.$refs.listBookingMobile.groupBookingFail(),i.getListBooking()})).catch((function(e){i.$refs.listBookingMobile.groupBookingFail(),e.response.data?"ORDERS_NOT_SAME_PRODUCT_CODE_OR_TRAVEL_DATE"==e.response.data?i.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Cannot group due to tour duplicated!"}):"ORDERS_NOT_SAME_TRAVEL_DATE "==e.response.data?i.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Cannot group due to different product and travel date!"}):"ORDERS_NOT_SAME_PRODUCT_CODE"==e.response.data?i.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Cannot group due to different product and travel date!"}):i.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:e.response.data}):i.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))},groupBookingsFromMobile:function(e,t){var i=this;this.checkCanGroupBookingMobile(e)?i.$q.dialog({title:"Confirm",message:"Would you like to group this booking?",ok:{},cancel:{push:!0,color:"negative"},persistent:!0}).onOk((function(){i.doGroupTourMobile(e,t)})).onCancel((function(){i.$refs.listBookingMobile.groupBookingFail(),i.$forceUpdate()})).onDismiss((function(){})):(i.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Cannot group due to different product and travel date!"}),i.$refs.listBookingMobile.groupBookingFail())},hideHeaderUnprocessedTab:function(e){this.$emit("update:is_adding_booking_mobile",e)},editBookingDoneMobile:function(){var e=this;e.getListBooking()},doSaveAddBookingMobile:function(e,t,i,o){var a=this,n=localStorage.getItem("user_token_fisheye_client"),s=new Date(e.travelDate.toISOString());s.setHours(7);var r=new Date(e.bookingDate.toISOString());r.setHours(7);var l={productId:e.productId,travelDate:s,groupBooking:""==e.groupBooking?null:e.groupBooking,bookerId:e.bookerId,startTime:e.startTime,endTime:e.endTime,duration:e.duration,tourType:e.tourType,priceOptionName:e.priceOptionName,transportation:e.transportation,guestQuantity:e.guestQuantity,adultNumber:e.adultNumber,childNumber:e.childNumber,infantNumber:e.infantNumber,youthNumber:e.youthNumber,seniorNumber:e.seniorNumber,adultPrice:t[0].price,childPrice:t[1].price,infantPrice:t[2].price,youthPrice:t[3].price,seniorPrice:t[4].price,leadTravelerFirstName:e.leadTravelerFirstName,leadTravelerLastName:e.leadTravelerLastName,leadTravelerLastPhone:e.leadTravelerLastPhone,leadTravelerLastEmail:e.leadTravelerLastEmail,leadTravelerGender:e.leadTravelerGender,otherTravelerNames:e.otherTravelerNames,nationality:e.nationality,passportNumber:e.passportNumber,bookingDate:r,pickupOrder:e.pickupOrder,hotelName:e.hotelName,hotelAddress:e.hotelAddress,foodNotes:e.foodNotes,otherNotes:e.otherNotes,pickupTimeFrom:e.pickupTimeFrom,pickupTimeTo:e.pickupTimeTo,surcharge:e.surcharge,commissionFee:e.commissionFee,othersIncreaseFee:e.othersIncreaseFee,discount:e.discount,couponCode:e.couponCode,otherDecreaseFee:e.otherDecreaseFee,taxRate:e.taxRate,taxAmount:e.taxAmount,depositRequested:e.depositRequested,depositReceived:e.depositReceived,remainingAmount:e.remainingAmount,paymentReceived:e.paymentReceived,refundToGuests:e.refundToGuests,balance:e.balance,emailSent:e.emailSent,invoiceSent:e.invoiceSent,reminderText:e.reminderText};-1!=e.status&&(l.status=e.status),this.$axios.post("/api/Orders/Create",JSON.stringify(l),{headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"}}).then((function(e){a.addOrderReceivableForMobile(e.data,i,o)})).catch((function(e){e.response.data?e.response.data.GuestQuantity?a.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:e.response.data.GuestQuantity[0]}):a.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:e.response.data}):a.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))},viewDetailBookingFromMobile:function(e){this.openModalViewBooking(e,!0)},doFilterBooking:function(e){var t=Object.assign({},e);this.info_filter_booking=t,this.getListBooking()},viewTourOfBooking:function(e){var t=this,i=this.$router.resolve({name:"view-detail-tour",params:{tour_id:e.tourId}});t.tour_detail.src="https://admin-travel.netlify.app/"+i.href,t.open_modal_view_detail_tour=!0},getDateFromDateFilter:function(e){if(e){var t=e.split("/"),i=t[0],o=t[1],a=t[2],n=new Date(parseInt(a),parseInt(o)-1,parseInt(i),0,0,0);return n}return null},onDateSelected:function(){},getNameHeaderCrop:function(e){var t=e.split(" ").length;if(t>1){var i="",o=e.split(" ");return o.forEach((function(e,t){i+=1==t?"<br>"+e:" "+e})),i}return e},triggerOpenModalViewInvoice:function(){this.info_booking_view_invoice=this.item_booking,this.open_modal_view_invoice_booking=!0},getNameGroupBooking:function(e){var t="";return this.options_group_booking.forEach((function(i){i.value==e&&(t=i.name)})),t},getPermRole:function(e){return-1!=this.role_perm.indexOf(e)},getFormatDate:function(e){var t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=new Date(e),a=t[o.getDay()],n=i[o.getMonth()],s=o.getDate().toString(),r=o.getFullYear().toString();return a+", "+s+" "+n+" "+r},getRightNumber:function(e){return e?isNaN(e)||""==e?0:parseFloat(e):0},reloadDataBookingInView:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");e.$axios.get("/api/Orders/GetDetail?orderId="+e.item_booking.id,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.openModalViewBooking(t.data)})).catch((function(t){e.item_booking.couponCode="",e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have error"})}))},updateCancelBooking:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i={orderId:e.item_booking.id,cancellationFee:e.item_booking.cancellationFee,cancellationNotes:e.item_booking.cancellationNotes};e.$axios.put("/api/Orders/Cancel",JSON.stringify(i),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.open_modal_cancel_booking=!1,e.reloadDataBookingInView(),e.getListBooking(),e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Update successfully!"})})).catch((function(t){e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have error"})}))},triggerOpenModalCancelBooking:function(){this.open_modal_cancel_booking=!0},checkCouponCode:function(){var e=this,t=e.current_branch_id;if(""!=e.item_booking.couponCode){var i=localStorage.getItem("user_token_fisheye_client");e.$axios.get("/api/Coupons/CheckValidCoupon?BranchId="+t+"&Code="+e.item_booking.couponCode,{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(t){var i=t.data;if(i.status)if(-1!=i.productIdsApplied.indexOf(e.item_booking.productId.toString())){var o=new Date(i.startTime),a=new Date(i.endTime),n=new Date;o.setHours(1),a.setHours(23),n>=o&&n<=a?1==i.type?e.item_booking.couponValue=i.value/100*e.item_booking.grossSales:e.item_booking.couponValue=i.value:(e.item_booking.couponCode="",e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Coupon is invalid"}))}else e.item_booking.couponCode="",e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Coupon is invalid"});else e.item_booking.couponCode="",e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Coupon is invalid"})})).catch((function(t){e.item_booking.couponCode="",e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Coupon is invalid"})}))}},triggerEditMoneyReceive:function(e,t){this.obj_money_receive_temp=JSON.parse(JSON.stringify(e)),this.index_money_receive_current=t,this.is_edit_money_receive=!0,this.open_modal_add_money_receive=!0},triggerEditRefund:function(e,t){this.obj_refund_temp=JSON.parse(JSON.stringify(e)),this.index_refund_current=t,this.is_edit_refund=!0,this.open_modal_add_refund=!0},getPaymentTypeName:function(e){var t="";return this.option_type_of_payment.forEach((function(i){i.value==e&&(t=i.name)})),t},getClassifyName:function(e){var t="";return this.options_classify_new_payment.forEach((function(i){i.value==e&&(t=i.name)})),t},cancelEditBooking:function(){this.list_will_deleted_receivable=[]},triggerEditBooking:function(){this.is_view_booking=!1},changeValueHotel:function(){var e=this,t=e.item_booking.hotelName;e.list_hotel.forEach((function(i){i.placeName==t&&(e.item_booking.hotelAddress=i.placeAddress)})),e.$forceUpdate()},routerToViewEmail:function(){var e=this.item_booking.id,t=this.value_email_template,i=this.$router.resolve({name:"preview-template",params:{booking_id:e,template_id:t}});window.open(i.href,"_blank"),this.open_modal_choose_email_template=!1},triggerOpenModalGenerateEmail:function(){this.open_modal_choose_email_template=!0},changeInputQuantityTierAndPrice:function(e){var t=this;switch(e.unique){case"Adult":t.item_booking.adultNumber=e.quantity;break;case"Child":t.item_booking.childNumber=e.quantity;break;case"Infant":t.item_booking.infantNumber=e.quantity;break;case"Youth":t.item_booking.youthNumber=e.quantity;break;case"Senior":t.item_booking.seniorNumber=e.quantity;break;default:break}t.$forceUpdate()},doGroupTour:function(){var e=this,t=e.selected_booking.map((function(e){return e.id})),i=localStorage.getItem("user_token_fisheye_client"),o={orderIds:t,branchId:parseInt(e.current_branch_id),tourIndex:e.group_booking_choosed};e.$axios.post("/api/Orders/Group",JSON.stringify(o),{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(t){e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Group booking successfully!"}),e.list_booking.forEach((function(e){e.check_select=!1})),e.group_booking_choosed=null,e.getListBooking()})).catch((function(t){e.list_booking.forEach((function(e){e.check_select=!1})),e.group_booking_choosed=null,t.response.data?"ORDERS_NOT_SAME_PRODUCT_CODE_OR_TRAVEL_DATE"==t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Cannot group due to tour duplicated!"}):"ORDERS_NOT_SAME_TRAVEL_DATE "==t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Cannot group due to different product and travel date!"}):"ORDERS_NOT_SAME_PRODUCT_CODE"==t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Cannot group due to different product and travel date!"}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))},changeSelectGroupBooking:function(){var e=this;this.is_groupable?this.$q.dialog({title:"Confirm",message:"Would you like to group this booking?",ok:{},cancel:{push:!0,color:"negative"},persistent:!0}).onOk((function(){e.doGroupTour()})).onCancel((function(){e.list_booking.forEach((function(e){e.check_select=!1})),e.group_booking_choosed=null,e.$forceUpdate()})).onDismiss((function(){})):(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Cannot group due to different product and travel date!"}),e.group_booking_choosed=null)},addOrderReceivable:function(e){var t=this,i=localStorage.getItem("user_token_fisheye_client");0==t.list_money_receive_temp.length&&0==t.list_refund_temp.length?(t.open_modal_add_booking=!1,t.getListBooking(),t.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Create successfully!"})):(0!=t.list_money_receive_temp.length&&0==t.list_refund_temp.length&&t.list_money_receive_temp.forEach((function(o,a){var n={orderId:e,amount:o.amount,type:0,classify:o.classify,paymentType:o.paymentType,fee:o.fee,notes:o.notes};a!=t.list_money_receive_temp.length-1?t.$axios.post("/api/Orders/AddReceivable",JSON.stringify(n),{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(e){})).catch((function(e){e.response.data?t.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:e.response.data}):t.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})})):t.$axios.post("/api/Orders/AddReceivable",JSON.stringify(n),{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(e){t.open_modal_add_booking=!1,t.getListBooking(),t.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Create successfully!"})})).catch((function(e){e.response.data?t.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:e.response.data}):t.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))})),0==t.list_money_receive_temp.length&&0!=t.list_refund_temp.length&&t.list_refund_temp.forEach((function(o,a){var n={orderId:e,amount:o.amount,type:1,paymentType:o.paymentType,fee:o.fee,notes:o.notes};a!=t.list_refund_temp.length-1?t.$axios.post("/api/Orders/AddReceivable",JSON.stringify(n),{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(e){})).catch((function(e){consolog("error")})):t.$axios.post("/api/Orders/AddReceivable",JSON.stringify(n),{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(e){t.open_modal_add_booking=!1,t.getListBooking(),t.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Create successfully!"})})).catch((function(e){consolog("error")}))})),0!=t.list_money_receive_temp.length&&0!=t.list_refund_temp.length&&(t.list_money_receive_temp.forEach((function(o,a){var n={orderId:e,amount:o.amount,type:0,classify:o.classify,paymentType:o.paymentType,fee:o.fee,notes:o.notes};t.$axios.post("/api/Orders/AddReceivable",JSON.stringify(n),{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(e){})).catch((function(e){e.response.data?t.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:e.response.data}):t.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))})),t.list_refund_temp.forEach((function(o,a){var n={orderId:e,amount:o.amount,type:1,paymentType:o.paymentType,fee:o.fee,notes:o.notes};a!=t.list_refund_temp.length-1?t.$axios.post("/api/Orders/AddReceivable",JSON.stringify(n),{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(e){})).catch((function(e){consolog("error")})):t.$axios.post("/api/Orders/AddReceivable",JSON.stringify(n),{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(e){t.open_modal_add_booking=!1,t.getListBooking(),t.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Create successfully!"})})).catch((function(e){consolog("error")}))}))))},addOrderReceivableForMobile:function(e,t,i){var o=this,a=localStorage.getItem("user_token_fisheye_client");0==t.length&&0==i.length?(o.is_done_add_booking_mobile=!0,o.getListBooking(),o.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Create successfully!"})):(0!=t.length&&0==i.length&&t.forEach((function(i,n){var s={orderId:e,amount:i.amount,type:0,classify:i.classify,paymentType:i.paymentType,fee:i.fee,notes:i.notes};n!=t.length-1?o.$axios.post("/api/Orders/AddReceivable",JSON.stringify(s),{headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"}}).then((function(e){})).catch((function(e){e.response.data?o.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:e.response.data}):o.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})})):o.$axios.post("/api/Orders/AddReceivable",JSON.stringify(s),{headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"}}).then((function(e){o.is_done_add_booking_mobile=!0,o.getListBooking(),o.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Create successfully!"})})).catch((function(e){e.response.data?o.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:e.response.data}):o.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))})),0==t.length&&0!=i.length&&i.forEach((function(t,n){var s={orderId:e,amount:t.amount,type:1,paymentType:t.paymentType,fee:t.fee,notes:t.notes};n!=i.length-1?o.$axios.post("/api/Orders/AddReceivable",JSON.stringify(s),{headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"}}).then((function(e){})).catch((function(e){consolog("error")})):o.$axios.post("/api/Orders/AddReceivable",JSON.stringify(s),{headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"}}).then((function(e){o.is_done_add_booking_mobile=!0,o.getListBooking(),o.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Create successfully!"})})).catch((function(e){consolog("error")}))})),0!=t.length&&0!=i.length&&(t.forEach((function(t,i){var n={orderId:e,amount:t.amount,type:0,classify:t.classify,paymentType:t.paymentType,fee:t.fee,notes:t.notes};o.$axios.post("/api/Orders/AddReceivable",JSON.stringify(n),{headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"}}).then((function(e){})).catch((function(e){e.response.data?o.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:e.response.data}):o.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))})),i.forEach((function(t,n){var s={orderId:e,amount:t.amount,type:1,paymentType:t.paymentType,fee:t.fee,notes:t.notes};n!=i.length-1?o.$axios.post("/api/Orders/AddReceivable",JSON.stringify(s),{headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"}}).then((function(e){})).catch((function(e){consolog("error")})):o.$axios.post("/api/Orders/AddReceivable",JSON.stringify(s),{headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"}}).then((function(e){o.is_done_add_booking_mobile=!0,o.getListBooking(),o.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Create successfully!"})})).catch((function(e){consolog("error")}))}))))},checkValidateTabOne:function(){var e=this;return e.$v.item_booking.productId.$touch(),e.$v.item_booking.travelDate.$touch(),e.$v.item_booking.startTime.$touch(),e.$v.item_booking.transportation.$touch(),e.$v.item_booking.bookingDate.$touch(),e.$v.item_booking.priceOptionName.$touch(),!(e.$v.item_booking.productId.$error||e.$v.item_booking.travelDate.$error||e.$v.item_booking.startTime.$error||e.$v.item_booking.transportation.$error||e.$v.item_booking.bookingDate.$error||e.$v.item_booking.priceOptionName.$error)||(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Please view error in your booking!"}),!1)},checkValidateTabTwo:function(){var e=this;return e.$v.item_booking.adultNumber.$touch(),e.$v.item_booking.childNumber.$touch(),e.$v.item_booking.infantNumber.$touch(),e.$v.item_booking.youthNumber.$touch(),e.$v.item_booking.seniorNumber.$touch(),e.$v.item_booking.leadTravelerFirstName.$touch(),e.$v.item_booking.leadTravelerLastEmail.$touch(),!(e.$v.item_booking.adultNumber.$error||e.$v.item_booking.childNumber.$error||e.$v.item_booking.infantNumber.$error||e.$v.item_booking.youthNumber.$error||e.$v.item_booking.seniorNumber.$error||e.$v.item_booking.leadTravelerFirstName.$error||e.$v.item_booking.leadTravelerLastEmail.$error)||(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Please view error in your booking!"}),!1)},checkValidateTabThree:function(){var e=this;return e.$v.item_booking.surcharge.$touch(),e.$v.item_booking.commissionFee.$touch(),e.$v.item_booking.othersIncreaseFee.$touch(),e.$v.item_booking.discount.$touch(),e.$v.item_booking.otherDecreaseFee.$touch(),e.$v.item_booking.taxRate.$touch(),!(e.$v.item_booking.surcharge.$error||e.$v.item_booking.commissionFee.$error||e.$v.item_booking.othersIncreaseFee.$error||e.$v.item_booking.discount.$error||e.$v.item_booking.otherDecreaseFee.$error||e.$v.item_booking.taxRate.$error)||(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Please view error in your booking!"}),!1)},checkValidateTabFour:function(){return!0},checkValidate:function(){var e=this;return e.$v.item_booking.$touch(),e.$v.item_booking.$error?(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Please view error in your booking!"}),!1):0!=e.item_booking.guestQuantity||(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Guest quantity must great than 0!"}),!1)},checkValidateMoneyReceive:function(){var e=this;return e.$v.obj_money_receive_temp.$touch(),!e.$v.obj_money_receive_temp.$error||(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Please view error!"}),!1)},checkValidateRefund:function(){var e=this;return e.$v.obj_refund_temp.$touch(),!e.$v.obj_refund_temp.$error||(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Please view error!"}),!1)},addBookingFinal:function(){if(this.checkValidate()){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i=new Date(e.item_booking.travelDate.toISOString());i.setHours(7);var o=new Date(e.item_booking.bookingDate.toISOString());o.setHours(7);var a={productId:e.item_booking.productId,travelDate:i,groupBooking:""==e.item_booking.groupBooking?null:e.item_booking.groupBooking,bookerId:e.item_booking.bookerId,startTime:e.item_booking.startTime,endTime:e.item_booking.endTime,duration:e.item_booking.duration,tourType:e.item_booking.tourType,transportation:e.item_booking.transportation,guestQuantity:e.item_booking.guestQuantity,refNo:e.item_booking.refNo,salesInCharge:e.item_booking.salesInCharge,adultNumber:e.item_booking.adultNumber,childNumber:e.item_booking.childNumber,infantNumber:e.item_booking.infantNumber,youthNumber:e.item_booking.youthNumber,seniorNumber:e.item_booking.seniorNumber,adultPrice:e.tier_and_price[0].price,childPrice:e.tier_and_price[1].price,infantPrice:e.tier_and_price[2].price,youthPrice:e.tier_and_price[3].price,seniorPrice:e.tier_and_price[4].price,leadTravelerFirstName:e.item_booking.leadTravelerFirstName,leadTravelerLastName:e.item_booking.leadTravelerLastName,leadTravelerLastPhone:e.item_booking.leadTravelerLastPhone,leadTravelerLastEmail:e.item_booking.leadTravelerLastEmail,leadTravelerGender:e.item_booking.leadTravelerGender,otherTravelerNames:e.item_booking.otherTravelerNames,nationality:e.item_booking.nationality,passportNumber:e.item_booking.passportNumber,bookingDate:o,pickupOrder:e.item_booking.pickupOrder,hotelName:e.item_booking.hotelName,hotelAddress:e.item_booking.hotelAddress,foodNotes:e.item_booking.foodNotes,otherNotes:e.item_booking.otherNotes,pickupTimeFrom:e.item_booking.pickupTimeFrom,pickupTimeTo:e.item_booking.pickupTimeTo,surcharge:e.item_booking.surcharge,commissionFee:e.item_booking.commissionFee,othersIncreaseFee:e.item_booking.othersIncreaseFee,discount:e.item_booking.discount,couponCode:e.item_booking.couponCode,otherDecreaseFee:e.item_booking.otherDecreaseFee,taxRate:e.item_booking.taxRate,taxAmount:e.item_booking.taxAmount,depositRequested:e.item_booking.depositRequested,depositReceived:e.item_booking.depositReceived,remainingAmount:e.item_booking.remainingAmount,paymentReceived:e.item_booking.paymentReceived,refundToGuests:e.item_booking.refundToGuests,balance:e.item_booking.balance,emailSent:e.item_booking.emailSent,invoiceSent:e.item_booking.invoiceSent,reminderText:e.item_booking.reminderText,priceOptionName:e.item_booking.priceOptionName};-1!=e.item_booking.status&&(a.status=e.item_booking.status),this.$axios.post("/api/Orders/Create",JSON.stringify(a),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.addOrderReceivable(t.data)})).catch((function(t){t.response.data?"ORDERS_NOT_SAME_PRODUCT_CODE_OR_TRAVEL_DATE"==t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Cannot group due to tour duplicated!"}):"ORDERS_NOT_SAME_TRAVEL_DATE "==t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Cannot group due to different product and travel date!"}):"ORDERS_NOT_SAME_PRODUCT_CODE"==t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Cannot group due to different product and travel date!"}):t.response.data.GuestQuantity?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data.GuestQuantity[0]}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))}},updateFirstTab:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");if("object"==s()(e.item_booking.travelDate)){var i=new Date(e.item_booking.travelDate.toISOString());i.setHours(7)}else i=e.item_booking.travelDate;if("object"==s()(e.item_booking.bookingDate)){var o=new Date(e.item_booking.bookingDate.toISOString());o.setHours(7)}else o=e.item_booking.bookingDate;var a={orderId:e.item_booking.id,productId:e.item_booking.productId,bookerId:e.item_booking.bookerId,travelDate:i,startTime:e.item_booking.startTime,endTime:e.item_booking.endTime,duration:e.item_booking.duration,groupBooking:""==e.item_booking.groupBooking?null:e.item_booking.groupBooking,transportation:e.item_booking.transportation,guestQuantity:e.item_booking.guestQuantity,bookingDate:o,emailSent:e.item_booking.emailSent,invoiceSent:e.item_booking.invoiceSent,reminderText:e.item_booking.reminderText,refNo:e.item_booking.refNo,salesInCharge:e.item_booking.salesInCharge,tourType:e.item_booking.tourType,priceOptionName:e.item_booking.priceOptionName};-1!=e.item_booking.status&&(a.status=e.item_booking.status),this.$axios.put("/api/Orders/UpdateFirstTab",JSON.stringify(a),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.is_edit_tab_1=!1,e.resetValidateTab1(),e.getListBooking(),e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Update Successfully"}),e.will_save_tab_3?(e.will_save_tab_3=!1,e.saveEditTabThreeBooking()):e.saveEditTabThreeBooking(),e.will_save_tab_4?(e.will_save_tab_4=!1,e.saveEditTabFourBooking()):e.saveEditTabFourBooking()})).catch((function(t){t.response.data?"ORDERS_NOT_SAME_PRODUCT_CODE_OR_TRAVEL_DATE"==t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Cannot group due to tour duplicated!"}):"ORDERS_NOT_SAME_TRAVEL_DATE "==t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Cannot group due to different product and travel date!"}):"ORDERS_NOT_SAME_PRODUCT_CODE"==t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Cannot group due to different product and travel date!"}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))},updateSecondTabPart2:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i={orderId:e.item_booking.id,leadTravelerFirstName:e.item_booking.leadTravelerFirstName,leadTravelerLastName:e.item_booking.leadTravelerLastName,leadTravelerGender:e.item_booking.leadTravelerGender,otherTravelerNames:e.item_booking.otherTravelerNames,leadTravelerLastEmail:e.item_booking.leadTravelerLastEmail,leadTravelerLastPhone:e.item_booking.leadTravelerLastPhone,hotelName:e.item_booking.hotelName,hotelAddress:e.item_booking.hotelAddress,pickupOrder:e.item_booking.pickupOrder,pickupTimeFrom:e.item_booking.pickupTimeFrom,pickupTimeTo:e.item_booking.pickupTimeTo,nationality:e.item_booking.nationality,passportNumber:e.item_booking.passportNumber,foodNotes:e.item_booking.foodNotes,otherNotes:e.item_booking.otherNotes};this.$axios.put("/api/Orders/UpdateSecondTab",JSON.stringify(i),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.is_edit_tab_2=!1,e.resetValidateTab2(),e.getListBooking(),e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Update Successfully"})})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))},updateSecondTab:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i={orderId:e.item_booking.id,adultNumber:e.item_booking.adultNumber,childNumber:e.item_booking.childNumber,infantNumber:e.item_booking.infantNumber,youthNumber:e.item_booking.youthNumber,seniorNumber:e.item_booking.seniorNumber};this.$axios.put("/api/Orders/UpdateThirdTab",JSON.stringify(i),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.updateSecondTabPart2()})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))},updateThirdTab:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i={orderId:e.item_booking.id,guestQuantity:e.item_booking.guestQuantity,adultNumber:e.item_booking.adultNumber,childNumber:e.item_booking.childNumber,infantNumber:e.item_booking.infantNumber,youthNumber:e.item_booking.youthNumber,seniorNumber:e.item_booking.seniorNumber,adultPrice:e.tier_and_price[0].price,childPrice:e.tier_and_price[1].price,infantPrice:e.tier_and_price[2].price,youthPrice:e.tier_and_price[3].price,seniorPrice:e.tier_and_price[4].price,surcharge:e.item_booking.surcharge,commission:e.item_booking.commissionFee,othersIncreaseFee:e.item_booking.othersIncreaseFee,discount:e.item_booking.discount,couponCode:e.item_booking.couponCode,otherDecreaseFee:e.item_booking.otherDecreaseFee,taxRate:e.item_booking.taxRate,taxAmount:e.item_booking.taxAmount,depositRequested:e.item_booking.depositRequested};this.$axios.put("/api/Orders/UpdateThirdTab",JSON.stringify(i),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.is_edit_tab_3=!1,e.resetValidateTab3(),e.getListBooking(),e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Update Successfully"})})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))},updateFourTabPart2:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");e.list_will_deleted_receivable.forEach((function(i,o){if(i.id&&i.orderId){var a={receivableId:i.id,orderId:i.orderId};e.$axios.delete("/api/Orders/DeleteReceivable",{data:a,headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){o==e.list_will_deleted_receivable.length-1&&e.getReceivablesAPI(e.item_booking.id)})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))}}));var i=e.list_money_receive_temp.filter((function(e){return void 0!=e.id&&null!=e.id})),o=e.list_money_receive_temp.filter((function(e){return void 0==e.id||null==e.id}));i.forEach((function(o,a){var n={receivableId:o.id,orderId:o.orderId,amount:o.amount,type:0,classify:o.classify,paymentType:o.paymentType,fee:o.fee,notes:o.notes};e.$axios.put("/api/Orders/UpdateReceivable",JSON.stringify(n),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){a==i.length-1&&e.getReceivablesAPI(e.item_booking.id)})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))})),o.forEach((function(i,a){var n={orderId:e.item_booking.id,amount:i.amount,type:0,classify:i.classify,paymentType:i.paymentType,fee:i.fee,notes:i.notes};e.$axios.post("/api/Orders/AddReceivable",JSON.stringify(n),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){a==o.length-1&&e.getReceivablesAPI(e.item_booking.id)})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))}));var a=e.list_refund_temp.filter((function(e){return void 0!=e.id&&null!=e.id})),n=e.list_refund_temp.filter((function(e){return void 0==e.id||null==e.id}));a.forEach((function(i,o){var n={receivableId:i.id,orderId:i.orderId,amount:i.amount,type:1,paymentType:i.paymentType,fee:i.fee,notes:i.notes};e.$axios.put("/api/Orders/UpdateReceivable",JSON.stringify(n),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){o==a.length-1&&e.getReceivablesAPI(e.item_booking.id)})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))})),n.forEach((function(i,o){var a={orderId:e.item_booking.id,amount:i.amount,type:1,paymentType:i.paymentType,fee:i.fee,notes:i.notes};e.$axios.post("/api/Orders/AddReceivable",JSON.stringify(a),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){o==n.length-1&&(e.is_edit_tab_4=!1,e.cancelEditBooking(),e.getReceivablesAPI(e.item_booking.id),e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Update Successfully"}),e.getListBooking())})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))})),0==n.length&&(e.is_edit_tab_4=!1,e.getReceivablesAPI(e.item_booking.id),e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Update Successfully"}),e.cancelEditBooking(),e.getListBooking())},updateFourTab:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i={orderId:e.item_booking.id,depositRequested:e.item_booking.depositRequested};this.$axios.put("/api/Orders/UpdateThirdTab",JSON.stringify(i),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.updateFourTabPart2()})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))},editMoneyReceive:function(){var e=this,t=(localStorage.getItem("user_token_fisheye_client"),e.index_money_receive_current);e.$set(e.list_money_receive_temp[t],"amount",e.obj_money_receive_temp.amount),e.$set(e.list_money_receive_temp[t],"type",e.obj_money_receive_temp.type),e.$set(e.list_money_receive_temp[t],"classify",e.obj_money_receive_temp.classify),e.$set(e.list_money_receive_temp[t],"paymentType",e.obj_money_receive_temp.paymentType),e.$set(e.list_money_receive_temp[t],"fee",e.obj_money_receive_temp.fee),e.$set(e.list_money_receive_temp[t],"notes",e.obj_money_receive_temp.notes),e.is_edit_money_receive=!1,e.open_modal_add_money_receive=!1,e.$forceUpdate()},editRefund:function(){if(this.checkValidateRefund()){var e=this,t=(localStorage.getItem("user_token_fisheye_client"),e.index_refund_current);e.$set(e.list_refund_temp[t],"amount",e.obj_refund_temp.amount),e.$set(e.list_refund_temp[t],"paymentType",e.obj_refund_temp.paymentType),e.$set(e.list_refund_temp[t],"fee",e.obj_refund_temp.fee),e.$set(e.list_refund_temp[t],"notes",e.obj_refund_temp.notes),e.is_edit_refund=!1,e.open_modal_add_refund=!1,e.$forceUpdate()}},deleteMoneyReceive:function(e){var t=this;t.list_will_deleted_receivable.push(e);var i=t.list_money_receive_temp.indexOf(e);t.list_money_receive_temp.splice(i,1)},deleteRefund:function(e){var t=this;t.list_will_deleted_receivable.push(e);var i=t.list_refund_temp.indexOf(e);t.list_refund_temp.splice(i,1)},addMoneyReceive:function(){this.checkValidateMoneyReceive()&&(this.list_money_receive_temp.push(JSON.parse(JSON.stringify(this.obj_money_receive_temp))),this.open_modal_add_money_receive=!1)},addRefund:function(){this.checkValidateRefund()&&(this.list_refund_temp.push(JSON.parse(JSON.stringify(this.obj_refund_temp))),this.open_modal_add_refund=!1)},reCalculationGrossSales:function(){this.item_booking.grossSales=this.item_booking.surcharge+this.item_booking.commissionFee+this.item_booking.cancellationFee+this.item_booking.othersIncreaseFee+this.total_sales_new_booking},changeSurcharge:function(){this.reCalculationGrossSales()},changecommissionFee:function(){this.reCalculationGrossSales()},changeOtherIncreaseFee:function(){this.reCalculationGrossSales()},refreshTierAndPrice:function(e){""!=e.quantity&&void 0!=e.quantity&&"NaN"!=e.quantity||(e.quantity=0),""!=e.price&&void 0!=e.price&&"NaN"!=e.price||(e.price=0);var t=parseFloat(e.quantity)*parseFloat(e.price);e.sales=t,this.reCalculationGrossSales()},closeDialogChooseDuration:function(){this.is_open_dialog_choose_duration=!1,this.$v.item_booking.duration.$model=this.temp_duration.days+" Days "+this.temp_duration.hours+" Hours "+this.temp_duration.minutes+" Minutes "},openDialogChooseDuration:function(){this.is_open_dialog_choose_duration=!0},changePickerTravelDateNewBooking:function(){var e=this,t=this.item_booking.travelDate.getDay();switch(t){case 0:e.item_booking.day_of_week="Sunday";break;case 1:e.item_booking.day_of_week="Monday";break;case 2:e.item_booking.day_of_week="Tuesday";break;case 3:e.item_booking.day_of_week="Wednesday";break;case 4:e.item_booking.day_of_week="Thursday";break;case 5:e.item_booking.day_of_week="Friday";break;case 6:e.item_booking.day_of_week="Saturday";break}e.calculatePriceCustomer(),e.$forceUpdate()},getDateOfWeek:function(e){var t=new Date(e),i=t.getDay(),o="";switch(i){case 0:o="Sunday";break;case 1:o="Monday";break;case 2:o="Tuesday";break;case 3:o="Wednesday";break;case 4:o="Thursday";break;case 5:o="Friday";break;case 6:o="Saturday";break}return o},initDataStartTime:function(){var e=this,t=[];if(e.option_start_time=[],e.data_product_temp.priceOptions){e.data_product_temp.priceOptions.forEach((function(e){e.prices.forEach((function(e){e.timeApply.forEach((function(e){var i={label:e,value:e},o=t.filter((function(t){return t.value==e}));0==o.length&&t.push(i)}))}))}));var i=t.sort((function(e,t){var i=e.value,o=t.value;return i<o?-1:i>o?1:0}));e.option_start_time=i}},initQuantityAndPrice:function(){var e=this;e.tier_and_price.forEach((function(e){e.active=!1})),e.is_view_booking?e.data_product_temp.ageGroup.ageTiers.forEach((function(t){"Senior"==t.name&&t.isActive&&(e.tier_and_price[4].active=!0,e.tier_and_price[4].price=e.item_booking.seniorPrice,e.tier_and_price[4].quantity=e.item_booking.seniorNumber,e.tier_and_price[4].sales=e.item_booking.seniorNumber*e.item_booking.seniorPrice,e.tier_and_price[4].name="Senior (aged "+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Adult"==t.name&&t.isActive&&(e.tier_and_price[0].active=!0,e.tier_and_price[0].price=e.item_booking.adultPrice,e.tier_and_price[0].quantity=e.item_booking.adultNumber,e.tier_and_price[0].sales=e.item_booking.adultNumber*e.item_booking.adultPrice,e.tier_and_price[0].name="Adult (aged "+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Child"==t.name&&t.isActive&&(e.tier_and_price[1].active=!0,e.tier_and_price[1].price=e.item_booking.childPrice,e.tier_and_price[1].quantity=e.item_booking.childNumber,e.tier_and_price[1].sales=e.item_booking.childNumber*e.item_booking.childPrice,e.tier_and_price[1].name="Child (aged "+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Infant"==t.name&&t.isActive&&(e.tier_and_price[2].active=!0,e.tier_and_price[2].price=e.item_booking.infantPrice,e.tier_and_price[2].quantity=e.item_booking.infantNumber,e.tier_and_price[2].sales=e.item_booking.infantNumber*e.item_booking.infantPrice,e.tier_and_price[2].name="Infant (aged "+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Youth"==t.name&&t.isActive&&(e.tier_and_price[3].active=!0,e.tier_and_price[3].price=e.item_booking.youthPrice,e.tier_and_price[3].quantity=e.item_booking.youthNumber,e.tier_and_price[3].sales=e.item_booking.youthNumber*e.item_booking.youthPrice,e.tier_and_price[3].name="Youth (aged "+t.minAge.toString()+" - "+t.maxAge.toString()+")")})):e.data_product_temp.ageGroup.ageTiers.forEach((function(t){"Senior"==t.name&&t.isActive&&(e.tier_and_price[4].active=!0,e.tier_and_price[4].price=0,e.tier_and_price[4].quantity=0,e.tier_and_price[4].sales=0,e.tier_and_price[4].name="Senior (aged "+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Adult"==t.name&&t.isActive&&(e.tier_and_price[0].active=!0,e.tier_and_price[0].price=0,e.tier_and_price[0].quantity=0,e.tier_and_price[0].sales=0,e.tier_and_price[0].name="Adult (aged "+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Child"==t.name&&t.isActive&&(e.tier_and_price[1].active=!0,e.tier_and_price[1].price=0,e.tier_and_price[1].quantity=0,e.tier_and_price[1].sales=0,e.tier_and_price[1].name="Child (aged "+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Infant"==t.name&&t.isActive&&(e.tier_and_price[2].active=!0,e.tier_and_price[2].price=0,e.tier_and_price[2].quantity=0,e.tier_and_price[2].sales=0,e.tier_and_price[2].name="Infant (aged "+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Youth"==t.name&&t.isActive&&(e.tier_and_price[3].active=!0,e.tier_and_price[3].price=0,e.tier_and_price[3].quantity=0,e.tier_and_price[3].sales=0,e.tier_and_price[3].name="Youth (aged "+t.minAge.toString()+" - "+t.maxAge.toString()+")")})),e.refreshAllTierAndPrice(),e.$forceUpdate()},refreshAllTierAndPrice:function(){var e=this;e.tier_and_price.forEach((function(t){e.refreshTierAndPrice(t)}))},changeSelectBookerNewBooking:function(e){var t=this;null!=e?t.options_bookers.forEach((function(i){i.id==e&&(t.item_booking.bookerEmail=i.email,t.item_booking.bookerClient=i.client.name,t.item_booking.bookerSaleChannel=i.salesChannel)})):(t.item_booking.bookerEmail="Online Website",t.item_booking.bookerClient="Online Website",t.item_booking.bookerSaleChannel="Online Website"),t.$forceUpdate()},changeSelectProductNewBooking:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this;if(i.list_product.forEach((function(t){t.id==e&&(i.item_booking.productCode=t.referenceCode,i.item_booking.productName=t.title)})),t){o=localStorage.getItem("user_token_fisheye_client");i.$axios.get("/api/Products/GetProductDetail/"+e,{headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"}}).then((function(e){i.data_product_temp=e.data,i.initDataStartTime(),i.initQuantityAndPrice(),i.initDataPriceOptionOfProduct()})).catch((function(e){e.response.data?i.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:e.response.data}):i.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))}else if(i.item_booking.adultNumber=0,i.item_booking.infantNumber=0,i.item_booking.youthNumber=0,i.item_booking.childNumber=0,i.item_booking.seniorNumber=0,i.item_booking.guestQuantity=0,i.recently_change_product=!0,""!=i.item_booking_backup.groupBooking&&""!=i.item_booking.groupBooking)i.$swal({title:"Warning!",text:'You must change your group booking to "No choose" before you can change product!',icon:"warning"}),i.item_booking.productId=i.item_booking_backup.productId;else{var o=localStorage.getItem("user_token_fisheye_client");i.$axios.get("/api/Products/GetProductDetail/"+e,{headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"}}).then((function(e){i.data_product_temp=e.data,i.initDataStartTime(),i.initQuantityAndPrice(),i.initDataPriceOptionOfProduct()})).catch((function(e){e.response.data?i.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:e.response.data}):i.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))}},initDataPriceOptionOfProduct:function(){var e=this;e.is_view_booking||(e.item_booking.priceOptionName="");var t=[];e.data_product_temp&&e.data_product_temp.priceOptions&&(t=e.data_product_temp.priceOptions.map((function(e){return{id:e.id,name:e.name}}))),e.$set(e,"option_price_options",t)},changePriceOptionNewBooking:function(e,t){var i=this;i.is_add_booking?(i.data_product_temp.priceOptions.forEach((function(t){t.name==e&&(i.price_option_selected_new_booking=t)})),i.calculatePriceCustomer()):""!=i.item_booking_backup.groupBooking&&""!=i.item_booking.groupBooking?(i.$swal({title:"Warning!",text:'You must change your group booking to "No choose" before you can change the price option!',icon:"warning"}),i.item_booking.priceOptionName=i.item_booking_backup.priceOptionName):i.recently_change_product?(i.will_save_tab_3=!0,i.data_product_temp.priceOptions.forEach((function(t){t.name==e&&(i.price_option_selected_new_booking=t)})),i.calculatePriceCustomer()):this.$swal({title:"Warning!",text:"If you change price option, this booking will change price follow price option! Do you want to change price? ",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, i will!",cancelButtonText:"No"}).then((function(t){t.value?(i.will_save_tab_3=!0,i.data_product_temp.priceOptions.forEach((function(t){t.name==e&&(i.price_option_selected_new_booking=t)})),i.calculatePriceCustomer()):i.data_product_temp.priceOptions.forEach((function(t){t.name==e&&(i.price_option_selected_new_booking=t)}))}))},calculatePriceCustomer:function(){var e=this;if(null!=e.price_option_selected_new_booking){var t="";if(t="string"==typeof e.item_booking.travelDate&&""!=e.item_booking.travelDate?new Date(e.item_booking.travelDate):e.item_booking.travelDate,""!=t){var i=null;e.price_option_selected_new_booking.prices.forEach((function(e){var o=!1,a=new Date(e.startTime);if(a.setHours(0),e.hasEndDate||null!=e.endTime){var n=new Date(e.endTime);n.setHours(23),a.getTime()<=t.getTime()<=n.getTime()&&(o=!0)}else a.getTime()<=t.getTime()&&(o=!0);var s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=s[t.getDay()],l=e.daysApply.indexOf(r);o&&-1!=l&&(i=e)})),null!=i&&i.pricings.forEach((function(t){"Adult"==t.name&&t.isActive&&(e.item_booking.adultNumber=1,t.tierPricings.forEach((function(t){t.min<=e.item_booking.adultNumber<=t.max&&(e.$set(e.tier_and_price[0],"price",t.value),e.$set(e.tier_and_price[0],"sales",t.value*e.tier_and_price[0].quantity))}))),"Child"==t.name&&t.isActive&&(e.item_booking.childNumber=1,t.tierPricings.forEach((function(t){t.min<=e.item_booking.childNumber<=t.max&&(e.$set(e.tier_and_price[1],"price",t.value),e.$set(e.tier_and_price[1],"sales",t.value*e.tier_and_price[1].quantity))}))),"Infant"==t.name&&t.isActive&&(e.item_booking.infantNumber=1,t.tierPricings.forEach((function(t){t.min<=e.item_booking.infantNumber<=t.max&&(e.$set(e.tier_and_price[2],"price",t.value),e.$set(e.tier_and_price[2],"sales",t.value*e.tier_and_price[2].quantity))}))),"Youth"==t.name&&t.isActive&&(e.item_booking.youthNumber=1,t.tierPricings.forEach((function(t){t.min<=e.item_booking.youthNumber<=t.max&&(e.$set(e.tier_and_price[3],"price",t.value),e.$set(e.tier_and_price[3],"sales",t.value*e.tier_and_price[3].quantity))}))),"Senior"==t.name&&t.isActive&&(e.item_booking.seniorNumber=1,t.tierPricings.forEach((function(t){t.min<=e.item_booking.seniorNumber<=t.max&&(e.$set(e.tier_and_price[4],"price",t.value),e.$set(e.tier_and_price[4],"sales",t.value*e.tier_and_price[4].quantity))})))})),e.reCalculationGrossSales()}}},triggerOpenModalAddMoneyReceive:function(){this.obj_money_receive_temp={created:null,lastModified:null,amount:0,paymentType:0,classify:0,fee:"",notes:""},this.open_modal_add_money_receive=!0},triggerOpenModalAddRefund:function(){this.obj_refund_temp={created:null,lastModified:null,amount:0,paymentType:0,fee:"",notes:""},this.open_modal_add_refund=!0},openDialogAddBooking:function(){var e=this;e.$v.item_booking.$reset(),this.is_view_booking=!1,this.is_add_booking=!0,this.is_edit_tab_1=!0,this.is_edit_tab_2=!0,this.is_edit_tab_3=!0,this.is_edit_tab_4=!0,this.list_money_receive_temp=[],this.list_refund_temp=[],this.tab_add_new_booking="booking",this.item_booking={bookingNumber:"",productId:"",productCode:"",productName:"",travelDate:"",groupBooking:"",startTime:"",endTime:"",bookerId:"",refNo:"",salesInCharge:[],bookerName:"",bookerEmail:"",bookerSaleChannel:"",bookerClient:"",duration:"",tourType:"",priceOptionName:"",transportation:"",guestQuantity:0,adultNumber:0,infantNumber:0,youthNumber:0,childNumber:0,seniorNumber:0,adultPrice:0,childPrice:0,infantPrice:0,youthPrice:0,seniorPrice:0,leadTravelerFirstName:"",leadTravelerLastName:"",leadTravelerLastPhone:"",leadTravelerLastEmail:"",leadTravelerGender:"",otherTravelerNames:[],nationality:"",passportNumber:"",bookingDate:"",foodNotes:"",otherNotes:"",pickupOrder:"",pickupTimeFrom:"",pickupTimeTo:"",hotelName:"",hotelAddress:"",sales:0,otherSales:0,surcharge:0,commissionFee:0,othersIncreaseFee:0,grossSales:0,saleDeduction:0,discount:0,couponCode:"",couponValue:"",otherDecreaseFee:0,netSales:0,taxRate:0,taxAmount:0,netSalesBeforeTax:0,depositRequested:0,depositReceived:0,remainingAmount:0,paymentReceived:0,refundToGuests:0,balance:0,emailSent:!0,invoiceSent:!0,reminderText:"",status:-1,cancellationFee:0,cancellationSales:0,receivables:0},this.item_booking_backup={bookingNumber:"",productId:"",productCode:"",productName:"",travelDate:"",groupBooking:"",startTime:"",endTime:"",bookerId:"",refNo:"",salesInCharge:[],bookerName:"",bookerEmail:"",bookerSaleChannel:"",bookerClient:"",duration:"",tourType:"",priceOptionName:"",transportation:"",guestQuantity:0,adultNumber:0,infantNumber:0,youthNumber:0,childNumber:0,seniorNumber:0,adultPrice:0,childPrice:0,infantPrice:0,youthPrice:0,seniorPrice:0,leadTravelerFirstName:"",leadTravelerLastName:"",leadTravelerLastPhone:"",leadTravelerLastEmail:"",leadTravelerGender:"",otherTravelerNames:[],nationality:"",passportNumber:"",bookingDate:"",foodNotes:"",otherNotes:"",pickupOrder:"",pickupTimeFrom:"",pickupTimeTo:"",hotelName:"",hotelAddress:"",sales:0,otherSales:0,surcharge:0,commissionFee:0,othersIncreaseFee:0,grossSales:0,saleDeduction:0,discount:0,couponCode:"",couponValue:"",otherDecreaseFee:0,netSales:0,taxRate:0,taxAmount:0,netSalesBeforeTax:0,depositRequested:0,depositReceived:0,remainingAmount:0,paymentReceived:0,refundToGuests:0,balance:0,emailSent:!0,invoiceSent:!0,reminderText:"",status:-1,cancellationFee:0,cancellationSales:0,receivables:0},this.price_option_selected_new_booking=null,this.open_modal_add_booking=!0},openModalViewBooking:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.$forceUpdate(),t||this.$v.item_booking.$reset(),this.is_edit_tab_1=!1,this.is_edit_tab_2=!1,this.is_edit_tab_3=!1,this.is_edit_tab_4=!1,this.recently_change_product=!1,this.will_save_tab_3=!1,this.is_read_tab_1||this.is_read_tab_2||this.is_read_tab_3||this.is_read_tab_4){this.is_read_tab_1?this.tab_add_new_booking="booking":this.is_read_tab_2?this.tab_add_new_booking="traveler":this.is_read_tab_3?this.tab_add_new_booking="revenue":this.is_read_tab_4&&(this.tab_add_new_booking="receivables"),this.is_view_booking=!0,this.is_add_booking=!1;var i=JSON.parse(JSON.stringify(e));null==i.cancellationFee&&(i.cancellationFee=0),i.booker?i.bookerId=i.booker.id:(i.bookerId=null,i.bookerEmail="Online website",i.bookerSaleChannel="Online website",i.bookerClient="Online website"),this.getReceivablesAPI(i.id),this.$set(this,"item_booking",i),this.$set(this,"item_booking_backup",JSON.parse(JSON.stringify(i))),this.item_booking.receivables=i.netSales,this.changeSelectProductNewBooking(i.productId,!0),t||(this.open_modal_add_booking=!0),this.$forceUpdate()}},getReceivablesAPI:function(e){var t=this,i=localStorage.getItem("user_token_fisheye_client");t.$axios.get("/api/Orders/GetReceivables?orderId="+e+"&Type=0",{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(e){t.list_money_receive_temp=e.data.receivables})).catch((function(e){Object(b["a"])(e.response,t)})),t.$axios.get("/api/Orders/GetReceivables?orderId="+e+"&Type=1",{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(e){t.list_refund_temp=e.data.receivables})).catch((function(e){Object(b["a"])(e.response,t)}))},deleteBooking:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");this.$q.dialog({title:"Confirm",message:"Would you like to DELETE this booking! You will not revert data if you deleted, Are you sure?",cancel:!0,persistent:!0}).onOk((function(){e.$axios.delete("/api/Orders/Delete/"+e.item_booking.id,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.open_modal_add_booking=!1,e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Delete booking Successfully"}),e.getListBooking()})).catch((function(t){e.loading.loading_product=!1,t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))})).onCancel((function(){})).onDismiss((function(){}))},getListProduct:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");-1!=this.current_branch_id&&(e.loading.loading_product=!0,this.$axios.get("/api/Products/GetProductList?PageSize=1000&BranchId="+e.current_branch_id+"&Status=1",{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.list_product=t.data.products,e.loading.loading_product=!1})).catch((function(t){e.loading.loading_product=!1,Object(b["a"])(t.response,e)})))},getListMainTransportation:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");-1!=this.current_branch_id&&this.$axios.get("/api/MasterLists/Get?PageSize=1000&BranchId="+e.current_branch_id+"&ListName=maintransportation",{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.options_main_transportation=t.data.masterLists,e.options_main_transportation_filter=JSON.parse(JSON.stringify(t.data.masterLists)),e.options_main_transportation_filter.unshift({id:-1,plateNumber:"Not selected"})})).catch((function(t){Object(b["a"])(t.response,e)}))},getListBooker:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");-1!=this.current_branch_id&&(e.loading.loading_list_booker=!0,this.$axios.get("/api/MasterLists/GetBookers?PageSize=10000&BranchId="+e.current_branch_id,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.options_bookers=JSON.parse(JSON.stringify(t.data.bookerLists)),e.options_bookers.push({id:null,name:"Online Website"}),e.options_bookers_filter=JSON.parse(JSON.stringify(t.data.bookerLists)),e.options_bookers_filter.unshift({id:-1,name:"Not selected"}),e.options_bookers_filter.push({id:"null",name:"Online website"}),e.loading.loading_list_booker=!1})).catch((function(t){e.loading.loading_list_booker=!1,Object(b["a"])(t.response,e)})))},formatListBooking:function(e){var t=this,i=[];return-1!=t.status_props_booking?i=e:e.forEach((function(e,t){0!=e.status&&1!=e.status&&2!=e.status&&i.push(e)})),i.sort((function(e,t){var i=new Date(e.travelDate),o=new Date(t.travelDate);return i<o?-1:i>o?1:0})),i.forEach((function(e,i){e.stt=t.pagination.rowsPerPage*(t.pagination.page-1)+i+1,e.disable_selected=!1,e.check_select=!1,e.is_grouped=!1,""!=e.groupBooking&&null!=e.groupBooking&&(e.is_grouped=!0),e.aliasName=e.product.referenceCode+"-"+e.transportation+"-"+e.guestQuantity,e.product?(e.productCode=e.product.referenceCode,e.productTitle=e.product.title):(e.productCode="",e.productTitle=""),e.dayOfWeek=t.getDateOfWeek(e.travelDate),e.booker?(e.bookerName=e.booker.name,e.bookerEmail=e.booker.email,e.bookerClient=e.booker.client.name,e.bookerSaleChannel=e.booker.salesChannel):(e.bookerName="Online website",e.bookerEmail="Online website",e.bookerClient="Online website",e.bookerSaleChannel="Online website"),e.otherTravelerNames&&e.otherTravelerNames.length>0?e.otherTravelerNamesText=e.otherTravelerNames.join(", "):e.otherTravelerNamesText=""})),i},getListBooking:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");if(-1!=this.current_branch_id){if(e.loading.loading_list_booking=!0,0!=e.pagination.rowsPerPage)var i="/api/Orders/Get?BranchId="+e.current_branch_id+"&PageSize="+e.pagination.rowsPerPage+"&PageNumber="+e.pagination.page;else i="/api/Orders/Get?BranchId="+e.current_branch_id+"&PageSize=10000&PageNumber=1";if(-1!=e.info_filter_booking.status?i+="&Status="+e.info_filter_booking.status:-1!=e.status_props_booking&&(i+="&Status="+e.status_props_booking),""!=e.info_filter_booking.booking_number&&(i+="&BookingNumber="+e.info_filter_booking.booking_number),""!=e.info_filter_booking.product_name&&(i+="&ProductName="+e.info_filter_booking.product_name),e.info_filter_booking.date_range.start){var o=e.getDateFromDateFilter(e.info_filter_booking.date_range.start);o.setHours(7),o&&(i+="&TravelDateFrom="+o.toISOString());var a=e.getDateFromDateFilter(e.info_filter_booking.date_range.end);a&&(a.setHours(30),i+="&TravelDateTo="+a.toISOString()),console.log(o),console.log(a)}if(-1!=e.info_filter_booking.day_of_week&&(i+="&DayOfWeek="+e.info_filter_booking.day_of_week),-1!=e.info_filter_booking.tour_type&&(i+="&TourType="+e.info_filter_booking.tour_type),-1!=e.info_filter_booking.start_time&&(i+="&StartTime="+e.info_filter_booking.start_time),""!=e.info_filter_booking.group_booking&&(i+="&GroupBooking="+e.info_filter_booking.group_booking),"Not selected"!=e.info_filter_booking.transportation&&(i+="&Transportation="+e.info_filter_booking.transportation),"Not selected"!=e.info_filter_booking.booker_name&&("Online website"==e.info_filter_booking.booker_name?i+="&BookerName=null":i+="&BookerName="+e.info_filter_booking.booker_name),""!=e.info_filter_booking.lead_first_name&&(i+="&LeadTravelerFirstName="+e.info_filter_booking.lead_first_name),""!=e.info_filter_booking.lead_last_name&&(i+="&LeadTravelerLastName="+e.info_filter_booking.lead_last_name),""!=e.info_filter_booking.nationality&&(i+="&Nationality="+e.info_filter_booking.nationality),""!=e.info_filter_booking.lead_email&&(i+="&LeadTravelerLastEmail="+e.info_filter_booking.lead_email),""!=e.info_filter_booking.food_note&&(i+="&FoodNotes="+e.info_filter_booking.food_note),""!=e.info_filter_booking.other_note&&(i+="&OtherNotes="+e.info_filter_booking.other_note),""!=e.info_filter_booking.booking_date&&e.info_filter_booking.booking_date){var n=e.info_filter_booking.booking_date.toISOString(),s=(o=new Date(n),new Date(n));o.setHours(7);var r=o.toISOString();s.setHours(30);s.toISOString();o&&(i+="&BookingDateFrom="+r)}-1!=e.info_filter_booking.email_sent&&(i+="&EmailSent="+e.info_filter_booking.email_sent),""!=e.info_filter_booking.refNo&&(i+="&RefNo="+e.info_filter_booking.refNo),e.info_filter_booking.salesInCharge.length>0&&e.info_filter_booking.salesInCharge.forEach((function(e){i+="&SalesInCharge="+e})),this.$axios.get(i,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.pagination.rowsNumber=t.data.total;var i=e.formatListBooking(t.data.orders);e.list_booking=i,e.getInfoTotalRow(),e.loading.loading_list_booking=!1})).catch((function(t){e.loading.loading_list_booking=!1,Object(b["a"])(t.response,e)}))}},getInfoTotalRow:function(){var e=this,t={guest_quantity:0,adult_number:0,child_number:0,infant_number:0,youth_number:0,senior_number:0,adult_price:0,child_price:0,infant_price:0,youth_price:0,senior_price:0,sales:0,other_sales:0,surcharge:0,commission:0,cancellation_fee:0,other_revenue:0,gross_sales:0,sales_deduction:0,discount:0,coupon_value:0,cancellation_sales:0,other_deduction:0,net_sales:0,tax_amount:0,net_sale_before_tax:0,deposit_request:0,deposit_receive:0,remaining_amount:0,payment_receive:0,refund_to_guess:0,balance:0};e.list_booking.forEach((function(e){t.guest_quantity+=e.guestQuantity,t.adult_number+=e.adultNumber,t.child_number+=e.childNumber,t.infant_number+=e.infantNumber,t.youth_number+=e.youthNumber,t.senior_number+=e.seniorNumber,t.adult_price+=e.adultPrice,t.child_price+=e.childPrice,t.infant_price+=e.infantPrice,t.youth_price+=e.youthPrice,t.senior_price+=e.seniorPrice,t.sales+=e.sales,t.other_sales+=e.otherSales,t.surcharge+=e.surcharge,t.commission+=e.commissionFee,t.cancellation_fee+=e.cancellationFee,t.other_revenue+=e.othersIncreaseFee,t.gross_sales+=e.grossSales,t.sales_deduction+=e.saleDeduction,t.discount+=e.discount,t.coupon_value+=e.couponValue,t.cancellation_sales+=e.cancellationSales,t.other_deduction+=e.otherDecreaseFee,t.net_sales+=e.netSales,t.tax_amount+=e.taxAmount,t.net_sale_before_tax+=e.netSalesBeforeTax,t.deposit_request+=e.depositRequested,t.deposit_receive+=e.depositReceived,t.remaining_amount+=e.remainingAmount,t.payment_receive+=e.paymentReceived,t.refund_to_guess+=e.refundToGuests,t.balance+=e.balance})),this.data_total_row=t},getListEmailTemplate:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");-1!=this.current_branch_id&&this.$axios.get("/api/EmailTemplates/Get?BranchId="+e.current_branch_id+"&PageSize=1000",{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.list_email_template=t.data.emailTemplates})).catch((function(t){Object(b["a"])(t.response,e)}))},getListTourType:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i=this.current_branch_id;-1!=i&&e.$axios.get("/api/MasterLists/Get?PageSize=1000&BranchId="+i+"&ListName=tourtype",{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){var i=[];t.data.masterLists.forEach((function(e){var t={name:e.namePIC,value:e.namePIC};i.push(t)})),e.option_tour_type=i,e.option_tour_type_filter=JSON.parse(JSON.stringify(i)),e.option_tour_type_filter.unshift({name:"Not selected",value:-1})})).catch((function(t){Object(b["a"])(t.response,e)}))},getListHotel:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i=this.current_branch_id;-1!=i&&e.$axios.get("/api/MasterLists/Get?PageSize=10000&BranchId="+i+"&ListName=hotel",{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.list_hotel=t.data.masterLists;var i=[];t.data.masterLists.forEach((function(e){var t={name:e.placeName,value:e.placeName};i.push(t)})),e.options_hotel=i})).catch((function(t){Object(b["a"])(t.response,e)}))},getListSaleInCharge:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i=this.current_branch_id;-1!=i&&e.$axios.get("/api/MasterLists/Get?PageSize=1000&BranchId="+i+"&ListName=sale-in-charge",{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.list_sale_in_charge=t.data.masterLists;var i=[];t.data.masterLists.forEach((function(e){var t={name:e.namePIC,value:e.namePIC};i.push(t)})),e.options_sale_in_charge=i})).catch((function(t){Object(b["a"])(t.response,e)}))},getListClient:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i=this.current_branch_id;-1!=i&&e.$axios.get("/api/MasterLists/GetClients?PageSize=10000&BranchId="+i,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.list_bookers_client_filter=t.data.clientLists,e.list_bookers_client_filter.unshift({id:-1,name:"Not selected"})})).catch((function(t){Object(b["a"])(t.response,e)}))},getStartDateFilter:function(){var e=new Date,t=e.getDate().toString(),i=(e.getMonth()+1).toString(),o=e.getFullYear().toString();return t+"/"+i+"/"+o},getEndDateFilter:function(){var e=new Date;e.setDate(e.getDate()+7);var t=e.getDate().toString(),i=(e.getMonth()+1).toString(),o=e.getFullYear().toString();return t+"/"+i+"/"+o}},components:{"view-invoice-booking":g["a"],"picker-filter":_.a,"list-bookings-mobile":V},mounted:function(){var e=this,t=[{name:"No choose",code:""}];e.options_country_world_filter.forEach((function(e){t.push(e)})),e.options_country_world_filter=t,this.getListHotel(),this.getListSaleInCharge(),this.getListEmailTemplate(),this.getListClient();var i={start:this.getStartDateFilter(),end:this.getEndDateFilter()};this.info_filter_booking.date_range=i,this.getListBooking(),this.getListProduct(),this.getListMainTransportation(),this.getListBooker(),this.onRequest({pagination:this.pagination,filter:void 0}),this.$root.$on("refreshBookingList",(function(){e.getListHotel(),e.getListSaleInCharge(),e.getListEmailTemplate(),e.getListClient();var t={start:e.getStartDateFilter(),end:e.getEndDateFilter()};e.info_filter_booking.date_range=t,e.getListBooking(),e.getListProduct(),e.getListMainTransportation(),e.getListBooker()}))}},J=Q,U=(i("8149"),Object(T["a"])(J,o,a,!1,null,null,null));t["a"]=U.exports;U.options.components=Object.assign({QIcon:q["n"],QSpace:q["D"],QBtn:q["c"],QTable:q["I"],QTh:q["L"],QCheckbox:q["h"],QTr:q["Q"],QTd:q["K"],QDialog:q["k"],QCard:q["e"],QCardActions:q["f"],QTabs:q["J"],QTab:q["F"],QSeparator:q["C"],QTabPanels:q["H"],QTabPanel:q["G"],QInput:q["p"],QPopupProxy:q["B"],QTime:q["M"],QTooltip:q["P"]},U.options.components||{}),U.options.directives=Object.assign({ClosePopup:q["a"]},U.options.directives||{})},8149:function(e,t,i){"use strict";var o=i("d8f0c"),a=i.n(o);a.a},b066:function(e,t,i){},d8f0c:function(e,t,i){},fd95:function(e,t,i){"use strict";var o=i("b066"),a=i.n(o);a.a}}]);
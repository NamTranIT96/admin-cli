(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ab4368fc"],{7755:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list-branch-login-wrapper"},[a("div",{staticClass:"list-branch-wrapper q-pa-lg"},[t.has_perm?a("div",[a("div",{staticClass:"q-mb-sm text-custom-1"},[t._v("Please choose your branch to manage")]),a("div",{staticClass:"list-branch-to-choosed item-branch-choosed flex q-mt-lg",staticStyle:{"flex-wrap":"wrap"}},[a("div",{staticClass:"branch-item q-mr-md q-mt-md"},[a("q-img",{on:{click:function(e){return t.triggerNewBranch()}}},[a("div",{staticClass:"add-new-branch absolute-full text-subtitle2 flex flex-center"},[a("div",{staticClass:"text-center"},[a("div",[a("q-icon",{attrs:{name:"add",size:"md"}})],1),a("div",[t._v("Add new branch")])])])])],1),t._l(t.list_branch,(function(e,n){return a("div",{key:n,staticClass:"branch-item q-mr-md q-mt-md"},[e.logo&&null!=e.logo&&""!=e.logo?a("q-img",{attrs:{src:t.backend_url+e.logo},on:{click:function(a){return t.chooseBranch(e)}}},[a("div",{staticClass:"absolute-bottom text-subtitle1 text-center"},[t._v(t._s(e.name))])]):a("q-img",{attrs:{src:"statics/images/no-image.png"},on:{click:function(a){return t.chooseBranch(e)}}},[a("div",{staticClass:"absolute-bottom text-subtitle1 text-center"},[t._v(t._s(e.name))])])],1)}))],2),a("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale"},model:{value:t.add_new_branch,callback:function(e){t.add_new_branch=e},expression:"add_new_branch"}},[a("q-card",{staticClass:"bg-primary text-white modal-add-new-branch",staticStyle:{width:"500px","max-width":"500px"}},[a("q-card-actions",{staticClass:"section-header-detail-booking q-pa-md"},[t._v("Add new branch")]),a("q-card-actions",{staticClass:"bg-white text-black q-pa-md"},[a("div",{staticClass:"w-100"},[a("div",[t._v("Name of branch")]),a("el-input",{attrs:{placeholder:"Input name branch"},model:{value:t.input_name_branch,callback:function(e){t.input_name_branch=e},expression:"input_name_branch"}})],1)]),a("q-separator"),a("q-card-actions",{staticClass:"bg-white text-teal q-pa-md",attrs:{align:"right"}},[a("div",[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{label:"cancel",color:"white","text-color":"black",icon:"cancel","no-caps":""}}),a("q-btn",{attrs:{label:"Add","no-caps":"",color:"primary",icon:"add"},on:{click:function(e){return t.addNewBranch()}}})],1)])],1)],1)],1):t._e()])])},o=[],s=(a("6b54"),a("a481"),a("28a5"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("8993")),i=a.n(s),r=a("9c58"),c={name:"list-branch-page",filters:{},data:function(){return{has_perm:!1,backend_url:r["a"],add_new_branch:!1,value_branch_choose:"",list_branch:[],input_name_branch:""}},methods:{chooseBranch:function(t){this.value_branch_choose=t.id,this.chooseBranchToManage()},triggerNewBranch:function(){this.add_new_branch=!this.add_new_branch},getListBranch:function(){var t=this,e=localStorage.getItem("user_token_fisheye_client");this.$axios.get("/api/StaffManagement/GetBranches?PageSize=1000",{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}).then((function(e){t.list_branch=e.data.branches})).catch((function(e){if(e.response.data){if("string"==typeof e.response.data)""!=e.response.data?t.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:e.response.data}):e.response.statusText&&t.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:e.response.statusText});else if("object"==i()(e.response.data)){var a=Object.keys(e.response.data);a.length>0&&t.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:e.response.data[a[0]]})}}else t.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:"Have error"})}))},addRegionalForBranch:function(t){var e=this,a=localStorage.getItem("user_token_fisheye_client"),n={branchId:t,language:"",country:"",timeZone:"",firstDayOfTheWeek:"",mainCurrency:"1",secondCurrency:"",exchangeRate:0,schedule:0};this.$axios.post("/api/Settings/AddRegional",JSON.stringify(n),{headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"}}).then((function(t){})).catch((function(t){if(t.response.data){if("string"==typeof t.response.data)""!=t.response.data?e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:t.response.data}):t.response.statusText&&e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:t.response.statusText});else if("object"==i()(t.response.data)){var a=Object.keys(t.response.data);a.length>0&&e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:t.response.data[a[0]]})}}else e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:"Have error"})}))},addEmailSettingForBranch:function(t){var e=this,a=localStorage.getItem("user_token_fisheye_client"),n={branchId:t,userName:"",password:"",smtpServer:"",senderAddress:"test@gmail.com",port:0,enableSsl:!0};this.$axios.post("/api/Settings/AddEmailSetting",JSON.stringify(n),{headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"}}).then((function(t){})).catch((function(t){if(t.response.data){if("string"==typeof t.response.data)""!=t.response.data?e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:t.response.data}):t.response.statusText&&e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:t.response.statusText});else if("object"==i()(t.response.data)){var a=Object.keys(t.response.data);a.length>0&&e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:t.response.data[a[0]]})}}else e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:"Have error"})}))},addNewBranch:function(){var t=this,e=localStorage.getItem("user_token_fisheye_client"),a={name:t.input_name_branch};this.$axios.post("/api/StaffManagement/CreateBranch",JSON.stringify(a),{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}).then((function(e){a.id=e.data,t.list_branch.push(a),t.input_name_branch="",t.add_new_branch=!1,t.addRegionalForBranch(e.data),t.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Create new branch successfully!"})})).catch((function(e){if(e.response.data){if("string"==typeof e.response.data)""!=e.response.data?t.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:e.response.data}):e.response.statusText&&t.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:e.response.statusText});else if("object"==i()(e.response.data)){var a=Object.keys(e.response.data);a.length>0&&t.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:e.response.data[a[0]]})}}else t.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:"Have error"})}))},chooseBranchToManage:function(){var t=this;localStorage.setItem("branch_id_fisheye_client",t.value_branch_choose),this.$router.push("/")},parseJwt:function(t){var e=t.split(".")[1],a=e.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(a).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)},getPermToViewPage:function(){var t=this,e=localStorage.getItem("user_token_fisheye_client"),a=t.parseJwt(e);-1!=a.role.indexOf("ClientAdmin")&&(this.has_perm=!0)}},mounted:function(){this.getListBranch(),this.getPermToViewPage()}},l=c,d=(a("9654"),a("2877")),h=a("fe09"),p=Object(d["a"])(l,n,o,!1,null,null,null);e["default"]=p.exports;p.options.components=Object.assign({QImg:h["o"],QIcon:h["n"],QDialog:h["k"],QCard:h["e"],QCardActions:h["f"],QSeparator:h["C"],QBtn:h["c"]},p.options.components||{}),p.options.directives=Object.assign({ClosePopup:h["a"]},p.options.directives||{})},9654:function(t,e,a){"use strict";var n=a("e637"),o=a.n(n);o.a},"9c58":function(t,e,a){"use strict";var n="https://appbackend.fisheyetravel.com/";e["a"]=n},e637:function(t,e,a){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["c82e4d20"],{4766:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",[i("view-detail-bookings-desktop")],1)},a=[],n=(i("7f7f"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"list-booking-desktop-wrapper",staticStyle:{"margin-top":"-50px!important"}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.loading_list_booking,expression:"loading.loading_list_booking"}],staticClass:"list-booking q-pa-sm"},[i("q-tabs",{attrs:{dense:"","active-color":"primary",align:"left"},model:{value:e.tab_add_new_booking,callback:function(t){e.tab_add_new_booking=t},expression:"tab_add_new_booking"}},[e.is_read_tab_1?i("q-tab",{attrs:{name:"booking",label:"Booking"}}):e._e(),e.is_read_tab_2?i("q-tab",{attrs:{name:"traveler",label:"Traveler"}}):e._e(),e.is_read_tab_3?i("q-tab",{attrs:{name:"revenue",label:"Revenue",disable:null==e.item_booking.productId||""==e.item_booking.productId||void 0==e.item_booking.productId}}):e._e(),e.is_read_tab_4?i("q-tab",{attrs:{name:"receivables",label:"Receivables",disable:null==e.item_booking.productId||""==e.item_booking.productId||void 0==e.item_booking.productId}}):e._e()],1),i("q-separator"),i("q-tab-panels",{staticClass:"bg-white text-black",attrs:{animated:""},model:{value:e.tab_add_new_booking,callback:function(t){e.tab_add_new_booking=t},expression:"tab_add_new_booking"}},[i("q-tab-panel",{attrs:{name:"booking"}},[i("div",{staticClass:"tab-detail-booking-wrapper"},[i("div",{staticClass:"flex items-center"},[4!=e.item_booking.status&&5!=e.item_booking.status&&6!=e.item_booking.status&&7!=e.item_booking.status?i("div",{staticClass:"q-mr-md"},[i("div",[e._v("Choose Status:")]),i("div",[i("el-select",{attrs:{size:"mini",placeholder:"Choose status","popper-class":"select-status-new-booking"},model:{value:e.item_booking.status,callback:function(t){e.$set(e.item_booking,"status",t)},expression:"item_booking.status"}},e._l(e.options_status_booking,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]):i("div",{staticClass:"q-mr-md"},[i("div",[e._v("Status")]),i("div",{staticStyle:{"line-height":"28px"}},[i("strong",[e._v(e._s(e._f("getNameStatus")(e.item_booking.status)))])])]),e.is_group?i("div",{staticClass:"q-mr-md"},[i("div",[e._v("Group booking")]),i("div",[i("el-select",{attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Group booking","popper-class":"select-group-new-booking"},model:{value:e.item_booking.groupBooking,callback:function(t){e.$set(e.item_booking,"groupBooking",t)},expression:"item_booking.groupBooking"}},e._l(e.options_group_booking,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]):e._e(),i("div",[null!=e.item_booking.tourId?i("q-btn",{attrs:{icon:"remove_red_eye",size:"sm",color:"primary",label:"View tour"},on:{click:function(t){return e.viewTourOfBooking(e.item_booking)}}}):e._e()],1),i("q-space")],1),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.loading_product,expression:"loading.loading_product"}],staticClass:"row q-mb-md"},[i("div",{staticClass:"flex w-100"},[i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Booking number")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{placeholder:"Auto generate after created booking",disabled:!0,size:"mini"},model:{value:e.item_booking.bookingNumber,callback:function(t){e.$set(e.item_booking,"bookingNumber",t)},expression:"item_booking.bookingNumber"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Choose product")]),i("div",{staticClass:"content-item"},[i("el-select",{class:{"input-error":e.$v.item_booking.productId.$error},attrs:{size:"mini",placeholder:"Choose product","popper-class":"select-product-new-booking",disabled:e.is_view_booking},on:{change:e.changeSelectProductNewBooking},model:{value:e.$v.item_booking.productId.$model,callback:function(t){e.$set(e.$v.item_booking.productId,"$model",t)},expression:"$v.item_booking.productId.$model"}},e._l(e.list_product,(function(e){return i("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1),e.$v.item_booking.productId.$error?i("div",{staticClass:"error-content"},[e._v("\n                    Product is required\n                  ")]):e._e()],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Product code")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{size:"mini",disabled:""},model:{value:e.item_booking.productCode,callback:function(t){e.$set(e.item_booking,"productCode",t)},expression:"item_booking.productCode"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Product name")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{size:"mini",disabled:""},model:{value:e.item_booking.productName,callback:function(t){e.$set(e.item_booking,"productName",t)},expression:"item_booking.productName"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Tour type")]),i("div",{staticClass:"content-item"},[i("el-select",{attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Choose tour type","popper-class":"select-tour-type-new-booking"},model:{value:e.item_booking.tourType,callback:function(t){e.$set(e.item_booking,"tourType",t)},expression:"item_booking.tourType"}},e._l(e.option_tour_type,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Travel date")]),i("div",{staticClass:"content-item"},[i("el-date-picker",{staticClass:"time-picker-w-100",class:{"input-error":e.$v.item_booking.travelDate.$error},attrs:{disabled:e.is_view_booking,format:"dd-MM-yyyy","picker-options":e.pickerOptionTravelDate,size:"mini",type:"date",placeholder:"Pick day travel","popper-class":"date-picker-z-index"},on:{change:function(t){return e.changePickerTravelDateNewBooking()}},model:{value:e.$v.item_booking.travelDate.$model,callback:function(t){e.$set(e.$v.item_booking.travelDate,"$model",t)},expression:"$v.item_booking.travelDate.$model"}}),e.$v.item_booking.travelDate.$error?i("div",{staticClass:"error-content"},[e._v("\n                    Travel date is required\n                  ")]):e._e()],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Start time")]),i("div",{staticClass:"content-item"},[i("el-select",{class:{"input-error":e.$v.item_booking.startTime.$error},attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Choose start time","popper-class":"select-tour-type-new-booking"},model:{value:e.$v.item_booking.startTime.$model,callback:function(t){e.$set(e.$v.item_booking.startTime,"$model",t)},expression:"$v.item_booking.startTime.$model"}},e._l(e.option_start_time,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e.$v.item_booking.startTime.$error?i("div",{staticClass:"error-content"},[e._v("\n                    Start time is required\n                  ")]):e._e()],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("End time")]),i("div",{staticClass:"content-item"},[i("el-select",{attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Choose end time","popper-class":"select-tour-type-new-booking"},model:{value:e.item_booking.endTime,callback:function(t){e.$set(e.item_booking,"endTime",t)},expression:"item_booking.endTime"}},e._l(e.options_range_time,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Transportation")]),i("div",{staticClass:"content-item"},[i("el-select",{attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Choose transportation","popper-class":"select-group-new-booking"},model:{value:e.item_booking.transportation,callback:function(t){e.$set(e.item_booking,"transportation",t)},expression:"item_booking.transportation"}},e._l(e.options_main_transportation,(function(e){return i("el-option",{key:e.id,attrs:{label:e.plateNumber,value:e.plateNumber}})})),1)],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Booking date")]),i("div",{staticClass:"content-item"},[i("el-date-picker",{staticClass:"time-picker-w-100",class:{"input-error":e.$v.item_booking.bookingDate.$error},attrs:{disabled:e.is_view_booking,format:"dd-MM-yyyy",size:"mini",type:"date",placeholder:"Pick booking date","popper-class":"date-picker-z-index"},model:{value:e.$v.item_booking.bookingDate.$model,callback:function(t){e.$set(e.$v.item_booking.bookingDate,"$model",t)},expression:"$v.item_booking.bookingDate.$model"}}),e.$v.item_booking.bookingDate.$error?i("div",{staticClass:"error-content"},[e._v("\n                    Booking date is required\n                  ")]):e._e()],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Booker name")]),i("div",{staticClass:"content-item"},[i("el-select",{attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Choose booker","popper-class":"select-group-new-booking"},on:{change:e.changeSelectBookerNewBooking},model:{value:e.item_booking.bookerId,callback:function(t){e.$set(e.item_booking,"bookerId",t)},expression:"item_booking.bookerId"}},e._l(e.options_bookers,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Booker email")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{size:"mini",disabled:""},model:{value:e.item_booking.bookerEmail,callback:function(t){e.$set(e.item_booking,"bookerEmail",t)},expression:"item_booking.bookerEmail"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Client :")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{disabled:"",size:"mini"},model:{value:e.item_booking.bookerClient,callback:function(t){e.$set(e.item_booking,"bookerClient",t)},expression:"item_booking.bookerClient"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Sales channel")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{disabled:"",size:"mini"},model:{value:e.item_booking.bookerSaleChannel,callback:function(t){e.$set(e.item_booking,"bookerSaleChannel",t)},expression:"item_booking.bookerSaleChannel"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Email send")]),i("div",{staticClass:"content-item"},[i("el-select",{attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Choose have email send","popper-class":"select-group-new-booking"},model:{value:e.item_booking.emailSent,callback:function(t){e.$set(e.item_booking,"emailSent",t)},expression:"item_booking.emailSent"}},e._l(e.options_status_yes_no,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Invoice send")]),i("div",{staticClass:"content-item"},[i("el-select",{attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Choose have invoice send","popper-class":"select-group-new-booking"},model:{value:e.item_booking.invoiceSent,callback:function(t){e.$set(e.item_booking,"invoiceSent",t)},expression:"item_booking.invoiceSent"}},e._l(e.options_invoice_send_yes_no,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Reminder/ Snooze")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{disabled:e.is_view_booking,size:"mini"},model:{value:e.item_booking.reminderText,callback:function(t){e.$set(e.item_booking,"reminderText",t)},expression:"item_booking.reminderText"}})],1)])])])])]),i("q-tab-panel",{attrs:{name:"traveler"}},[i("div",{staticClass:"tab-traveler-booking-wrapper"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.loading_list_booker,expression:"loading.loading_list_booker"}],staticClass:"row"},[i("div",{staticClass:"flex w-100"},[i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Guests quantity")]),i("div",{staticClass:"content-item"},[e._v("\n                  "+e._s(e.item_booking.guestQuantity)+"\n                ")])]),e.tier_and_price[0].active?i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Adult number")]),i("div",{staticClass:"content-item"},[i("el-input-number",{class:{"input-error":e.$v.item_booking.adultNumber.$error},attrs:{min:0,disabled:e.is_view_booking,size:"mini"},model:{value:e.$v.item_booking.adultNumber.$model,callback:function(t){e.$set(e.$v.item_booking.adultNumber,"$model",t)},expression:"$v.item_booking.adultNumber.$model"}}),e.$v.item_booking.adultNumber.$error?i("div",{staticClass:"error-content"},[e._v("\n                    Adult number is required\n                  ")]):e._e()],1)]):e._e(),e.tier_and_price[1].active?i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Child number")]),i("div",{staticClass:"content-item"},[i("el-input-number",{class:{"input-error":e.$v.item_booking.childNumber.$error},attrs:{min:0,disabled:e.is_view_booking,size:"mini"},model:{value:e.$v.item_booking.childNumber.$model,callback:function(t){e.$set(e.$v.item_booking.childNumber,"$model",t)},expression:"$v.item_booking.childNumber.$model"}}),e.$v.item_booking.childNumber.$error?i("div",{staticClass:"error-content"},[e._v("\n                    Child number is required\n                  ")]):e._e()],1)]):e._e(),e.tier_and_price[2].active?i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Infant number")]),i("div",{staticClass:"content-item"},[i("el-input-number",{class:{"input-error":e.$v.item_booking.infantNumber.$error},attrs:{min:0,disabled:e.is_view_booking,size:"mini"},model:{value:e.$v.item_booking.infantNumber.$model,callback:function(t){e.$set(e.$v.item_booking.infantNumber,"$model",t)},expression:"$v.item_booking.infantNumber.$model"}}),e.$v.item_booking.infantNumber.$error?i("div",{staticClass:"error-content"},[e._v("\n                    Infant number is required\n                  ")]):e._e()],1)]):e._e(),e.tier_and_price[3].active?i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Youth number")]),i("div",{staticClass:"content-item"},[i("el-input-number",{class:{"input-error":e.$v.item_booking.youthNumber.$error},attrs:{min:0,disabled:e.is_view_booking,size:"mini"},model:{value:e.$v.item_booking.youthNumber.$model,callback:function(t){e.$set(e.$v.item_booking.youthNumber,"$model",t)},expression:"$v.item_booking.youthNumber.$model"}}),e.$v.item_booking.youthNumber.$error?i("div",{staticClass:"error-content"},[e._v("\n                    Youth number is required\n                  ")]):e._e()],1)]):e._e(),e.tier_and_price[4].active?i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Senior number")]),i("div",{staticClass:"content-item"},[i("el-input-number",{class:{"input-error":e.$v.item_booking.seniorNumber.$error},attrs:{min:0,disabled:e.is_view_booking,size:"mini"},model:{value:e.$v.item_booking.seniorNumber.$model,callback:function(t){e.$set(e.$v.item_booking.seniorNumber,"$model",t)},expression:"$v.item_booking.seniorNumber.$model"}}),e.$v.item_booking.seniorNumber.$error?i("div",{staticClass:"error-content"},[e._v("\n                    Senior number is required\n                  ")]):e._e()],1)]):e._e(),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Lead traveler First name")]),i("div",{staticClass:"content-item"},[i("el-input",{class:{"input-error":e.$v.item_booking.leadTravelerFirstName.$error},attrs:{disabled:e.is_view_booking,size:"mini"},model:{value:e.$v.item_booking.leadTravelerFirstName.$model,callback:function(t){e.$set(e.$v.item_booking.leadTravelerFirstName,"$model",t)},expression:"$v.item_booking.leadTravelerFirstName.$model"}}),e.$v.item_booking.leadTravelerFirstName.$error?i("div",{staticClass:"error-content"},[e._v("\n                    First name lead is required\n                  ")]):e._e()],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Lead traveler Last name")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{disabled:e.is_view_booking,size:"mini"},model:{value:e.item_booking.leadTravelerLastName,callback:function(t){e.$set(e.item_booking,"leadTravelerLastName",t)},expression:"item_booking.leadTravelerLastName"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Gender")]),i("div",{staticClass:"content-item"},[i("el-select",{attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Choose gender","popper-class":"select-group-new-booking"},model:{value:e.item_booking.leadTravelerGender,callback:function(t){e.$set(e.item_booking,"leadTravelerGender",t)},expression:"item_booking.leadTravelerGender"}},e._l(e.options_gender,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Other travelers Name")]),i("div",{staticClass:"content-item"},[i("el-select",{staticClass:"w-100 input-add-other-traveler",attrs:{disabled:e.is_view_booking,multiple:"",filterable:"","allow-create":"",size:"mini","default-first-option":"",placeholder:"Input and enter to add","popper-class":"select-group-new-booking display-none"},model:{value:e.item_booking.otherTravelerNames,callback:function(t){e.$set(e.item_booking,"otherTravelerNames",t)},expression:"item_booking.otherTravelerNames"}},e._l(e.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Nationality")]),i("div",{staticClass:"content-item"},[i("el-select",{attrs:{filterable:"",disabled:e.is_view_booking,size:"mini",placeholder:"Choose nationality","popper-class":"select-group-new-booking"},model:{value:e.item_booking.nationality,callback:function(t){e.$set(e.item_booking,"nationality",t)},expression:"item_booking.nationality"}},e._l(e.options_country_world,(function(e){return i("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Passport number")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{disabled:e.is_view_booking,size:"mini"},model:{value:e.item_booking.passportNumber,callback:function(t){e.$set(e.item_booking,"passportNumber",t)},expression:"item_booking.passportNumber"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Lead traveler Email")]),i("div",{staticClass:"content-item"},[i("el-input",{class:{"input-error":e.$v.item_booking.leadTravelerLastEmail.$error},attrs:{disabled:e.is_view_booking,size:"mini"},model:{value:e.$v.item_booking.leadTravelerLastEmail.$model,callback:function(t){e.$set(e.$v.item_booking.leadTravelerLastEmail,"$model",t)},expression:"$v.item_booking.leadTravelerLastEmail.$model"}}),e.$v.item_booking.leadTravelerLastEmail.$error?i("div",{staticClass:"error-content"},[e._v("\n                    Format email is wrong\n                  ")]):e._e()],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Lead traveler Phone")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{disabled:e.is_view_booking,size:"mini"},model:{value:e.item_booking.leadTravelerLastPhone,callback:function(t){e.$set(e.item_booking,"leadTravelerLastPhone",t)},expression:"item_booking.leadTravelerLastPhone"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Hotel name")]),i("div",{staticClass:"content-item"},[i("el-select",{attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Hotel name & address","popper-class":"select-group-new-booking"},on:{change:function(t){return e.changeValueHotel()}},model:{value:e.item_booking.hotelName,callback:function(t){e.$set(e.item_booking,"hotelName",t)},expression:"item_booking.hotelName"}},e._l(e.options_hotel,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Hotel address")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{disabled:e.is_view_booking,size:"mini"},model:{value:e.item_booking.hotelAddress,callback:function(t){e.$set(e.item_booking,"hotelAddress",t)},expression:"item_booking.hotelAddress"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Pickup order")]),i("div",{staticClass:"content-item"},[i("el-select",{attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Choose order","popper-class":"select-group-new-booking"},model:{value:e.item_booking.pickupOrder,callback:function(t){e.$set(e.item_booking,"pickupOrder",t)},expression:"item_booking.pickupOrder"}},e._l(e.options_pickup_order,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Food notes")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Foods allergy and dietary (if any)"},model:{value:e.item_booking.foodNotes,callback:function(t){e.$set(e.item_booking,"foodNotes",t)},expression:"item_booking.foodNotes"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Other notes")]),i("div",{staticClass:"content-item"},[i("el-input",{attrs:{disabled:e.is_view_booking,size:"mini",placeholder:"Other notes (if any)"},model:{value:e.item_booking.otherNotes,callback:function(t){e.$set(e.item_booking,"otherNotes",t)},expression:"item_booking.otherNotes"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Pickup time from")]),i("div",{staticClass:"content-item"},[i("q-input",{staticClass:"input-pickup-time-from",attrs:{disable:e.is_view_booking,dense:"",outlined:""},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[i("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[i("q-time",{attrs:{"hour-options":e.hourOptions,mask:"hh[:]mm[ ]A"},model:{value:e.item_booking.pickupTimeFrom,callback:function(t){e.$set(e.item_booking,"pickupTimeFrom",t)},expression:"item_booking.pickupTimeFrom"}})],1)],1)]},proxy:!0}]),model:{value:e.item_booking.pickupTimeFrom,callback:function(t){e.$set(e.item_booking,"pickupTimeFrom",t)},expression:"item_booking.pickupTimeFrom"}})],1)]),i("div",{staticClass:"item-info-tab-1"},[i("div",{staticClass:"text-title"},[e._v("Pickup time to")]),i("div",{staticClass:"content-item"},[i("q-input",{staticClass:"input-pickup-time-from",attrs:{dense:"",disable:e.is_view_booking,outlined:""},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[i("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[i("q-time",{attrs:{"hour-options":e.hourOptions,mask:"hh[:]mm[ ]A"},model:{value:e.item_booking.pickupTimeTo,callback:function(t){e.$set(e.item_booking,"pickupTimeTo",t)},expression:"item_booking.pickupTimeTo"}})],1)],1)]},proxy:!0}]),model:{value:e.item_booking.pickupTimeTo,callback:function(t){e.$set(e.item_booking,"pickupTimeTo",t)},expression:"item_booking.pickupTimeTo"}})],1)])])])])]),i("q-tab-panel",{attrs:{name:"revenue"}},[i("div",{staticClass:"tab-revenue-booking-wrapper q-gutter-sm"},[i("div",{staticClass:"number-and-price-wrapper flex items-center"},[i("div",{staticClass:"item-number-price"}),i("div",{staticClass:"item-number-price text-item-number"},[e._v("Price")]),i("div",{staticClass:"item-number-price text-item-number"},[e._v("Quantity")]),i("div",{staticClass:"item-number-price text-item-number"},[e._v("Sales")]),e._l(e.tier_and_price,(function(t,o){return i("div",{key:o,staticClass:"w-100 items-center"},[t.active?i("div",{staticClass:"flex w-100"},[i("div",{staticClass:"item-number-price text-item-number"},[e._v("\n                  "+e._s(t.name)+"\n                ")]),i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price",attrs:{disabled:e.is_view_booking},nativeOn:{blur:function(i){return e.refreshTierAndPrice(t)}},model:{value:t.price,callback:function(i){e.$set(t,"price",i)},expression:"item.price"}},"money",e.money_option,!1))],1),i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price",attrs:{disabled:e.is_view_booking},nativeOn:{change:function(i){return e.changeInputQuantityTierAndPrice(t)},blur:function(i){return e.refreshTierAndPrice(t)}},model:{value:t.quantity,callback:function(i){e.$set(t,"quantity",i)},expression:"item.quantity"}},"money",e.money_option,!1))],1),i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price",attrs:{disabled:!0},model:{value:t.sales,callback:function(i){e.$set(t,"sales",i)},expression:"item.sales"}},"money",e.money_option,!1))],1)]):e._e()])})),i("div",{staticClass:"q-mt-md flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"},[i("b",[e._v("Sales")])]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"},[i("b",[e._v(e._s(e._f("currency")(e.total_sales_new_booking,e.option_filter)))])])]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"},[e._v("Other sales")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"},[i("b",[e._v(e._s(e._f("currency")(e.total_other_sales_new_booking,e.option_filter)))])])]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end"},[e._v("Surcharge")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.$v.item_booking.surcharge.$model?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price",class:{"input-error":e.$v.item_booking.surcharge.$error},attrs:{disabled:e.is_view_booking},nativeOn:{blur:function(t){return e.changeSurcharge(t)}},model:{value:e.$v.item_booking.surcharge.$model,callback:function(t){e.$set(e.$v.item_booking.surcharge,"$model",t)},expression:"$v.item_booking.surcharge.$model"}},"money",e.money_option,!1)),e.$v.item_booking.surcharge.$error?i("div",{staticClass:"error-content"},[e._v("\n                  Surcharge is required\n                ")]):e._e()],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end"},[e._v("\n                Sales commission\n              ")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.$v.item_booking.commissionFee.$model?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price",class:{"input-error":e.$v.item_booking.commissionFee.$error},attrs:{disabled:e.is_view_booking},nativeOn:{blur:function(t){return e.changecommissionFee()}},model:{value:e.$v.item_booking.commissionFee.$model,callback:function(t){e.$set(e.$v.item_booking.commissionFee,"$model",t)},expression:"$v.item_booking.commissionFee.$model"}},"money",e.money_option,!1)),e.$v.item_booking.commissionFee.$error?i("div",{staticClass:"error-content"},[e._v("\n                  CommissionFee is required\n                ")]):e._e()],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end",staticStyle:{width:"40%"}},[e._v("\n                Sales from service cancellation\n              ")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.cancellationFee?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price",attrs:{disabled:!0},model:{value:e.item_booking.cancellationFee,callback:function(t){e.$set(e.item_booking,"cancellationFee",t)},expression:"item_booking.cancellationFee"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end"},[e._v("\n                Other sales\n              ")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.$v.item_booking.othersIncreaseFee.$model?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price",class:{"input-error":e.$v.item_booking.othersIncreaseFee.$error},attrs:{disabled:e.is_view_booking},nativeOn:{blur:function(t){return e.changeOtherIncreaseFee()}},model:{value:e.$v.item_booking.othersIncreaseFee.$model,callback:function(t){e.$set(e.$v.item_booking.othersIncreaseFee,"$model",t)},expression:"$v.item_booking.othersIncreaseFee.$model"}},"money",e.money_option,!1)),e.$v.item_booking.othersIncreaseFee.$error?i("div",{staticClass:"error-content"},[e._v("\n                  Other revenue is required\n                ")]):e._e()],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"},[e._v("Gross sales")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.grossSales?i("div",{staticClass:"item-number-price-trans"},[i("strong",[e._v(e._s(e._f("currency")(e.item_booking.grossSales,e.option_filter)))])]):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"},[e._v("Sales deducttion")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"})]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end"},[e._v("\n                Coupon Code\n              ")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price"},[i("el-input",{staticClass:"input-number-table-price",attrs:{disabled:e.is_view_booking||""==e.item_booking.couponCode&&null==e.item_booking.couponCode,size:"mini"},on:{blur:function(t){return e.checkCouponCode()}},model:{value:e.item_booking.couponCode,callback:function(t){e.$set(e.item_booking,"couponCode",t)},expression:"item_booking.couponCode"}})],1)]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end"},[e._v("\n                Coupon value\n              ")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.couponValue?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price",attrs:{disabled:!0},model:{value:e.item_booking.couponValue,callback:function(t){e.$set(e.item_booking,"couponValue",t)},expression:"item_booking.couponValue"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end"},[e._v("Discount")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.$v.item_booking.discount.$model?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price",class:{"input-error":e.$v.item_booking.discount.$error},attrs:{disabled:e.is_view_booking},model:{value:e.$v.item_booking.discount.$model,callback:function(t){e.$set(e.$v.item_booking.discount,"$model",t)},expression:"$v.item_booking.discount.$model"}},"money",e.money_option,!1)),e.$v.item_booking.discount.$error?i("div",{staticClass:"error-content"},[e._v("\n                  Discount is required\n                ")]):e._e()],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end"},[e._v("\n                Service cancellation\n              ")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.cancellationSales?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price",attrs:{disabled:!0},model:{value:e.item_booking.cancellationSales,callback:function(t){e.$set(e.item_booking,"cancellationSales",t)},expression:"item_booking.cancellationSales"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans justify-end"},[e._v("\n                Other deductions\n              ")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.$v.item_booking.otherDecreaseFee.$model?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price",class:{"input-error":e.$v.item_booking.otherDecreaseFee.$error},attrs:{disabled:e.is_view_booking},model:{value:e.$v.item_booking.otherDecreaseFee.$model,callback:function(t){e.$set(e.$v.item_booking.otherDecreaseFee,"$model",t)},expression:"$v.item_booking.otherDecreaseFee.$model"}},"money",e.money_option,!1)),e.$v.item_booking.otherDecreaseFee.$error?i("div",{staticClass:"error-content"},[e._v("\n                  Others is required\n                ")]):e._e()],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"},[e._v("Net Sales")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"},[i("strong",[e._v(e._s(e._f("currency")(e.total_net_sales_new_booking,e.option_filter)))])])]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"},[e._v("Tax rate (%)")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price"},[i("el-input-number",{staticClass:"input-number-table-price",class:{"input-error":e.$v.item_booking.taxRate.$error},attrs:{disabled:e.is_view_booking,max:100,min:0,size:"mini",controls:!1},model:{value:e.$v.item_booking.taxRate.$model,callback:function(t){e.$set(e.$v.item_booking.taxRate,"$model",t)},expression:"$v.item_booking.taxRate.$model"}}),e.$v.item_booking.taxRate.$error?i("div",{staticClass:"error-content"},[e._v("\n                  Tax rate is required\n                ")]):e._e()],1)]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"},[e._v("Tax amount")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.taxAmount?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price",attrs:{disabled:!0},model:{value:e.item_booking.taxAmount,callback:function(t){e.$set(e.item_booking,"taxAmount",t)},expression:"item_booking.taxAmount"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"},[e._v("\n                Net Sales excluded Tax\n              ")]),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.netSalesBeforeTax?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price",attrs:{disabled:!0},model:{value:e.item_booking.netSalesBeforeTax,callback:function(t){e.$set(e.item_booking,"netSalesBeforeTax",t)},expression:"item_booking.netSalesBeforeTax"}},"money",e.money_option,!1))],1):e._e()])],2)])]),i("q-tab-panel",{attrs:{name:"receivables"}},[i("div",{staticClass:"tab-receivables-booking-wrapper"},[i("div",{staticClass:"number-and-price-wrapper flex items-center"},[i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"},[e._v("Receivables")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.receivables?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price",attrs:{disabled:!0},model:{value:e.item_booking.receivables,callback:function(t){e.$set(e.item_booking,"receivables",t)},expression:"item_booking.receivables"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"},[e._v("Deposit requested")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.depositRequested?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price",attrs:{disabled:e.is_view_booking},model:{value:e.item_booking.depositRequested,callback:function(t){e.$set(e.item_booking,"depositRequested",t)},expression:"item_booking.depositRequested"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"},[e._v("Deposit received")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.depositReceived?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price",attrs:{disabled:!0},model:{value:e.item_booking.depositReceived,callback:function(t){e.$set(e.item_booking,"depositReceived",t)},expression:"item_booking.depositReceived"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"},[e._v("Remaining amount")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.remainingAmount?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price",attrs:{disabled:!0},model:{value:e.item_booking.remainingAmount,callback:function(t){e.$set(e.item_booking,"remainingAmount",t)},expression:"item_booking.remainingAmount"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"},[e._v("\n                Final payment received\n              ")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.paymentReceived?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price",attrs:{disabled:!0},model:{value:e.item_booking.paymentReceived,callback:function(t){e.$set(e.item_booking,"paymentReceived",t)},expression:"item_booking.paymentReceived"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"},[e._v("Refund to guests")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.refundToGuests?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price",attrs:{disabled:!0},model:{value:e.item_booking.refundToGuests,callback:function(t){e.$set(e.item_booking,"refundToGuests",t)},expression:"item_booking.refundToGuests"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-sm flex items-center w-100"},[i("div",{staticClass:"item-number-price-trans"},[e._v("Balance")]),i("div",{staticClass:"item-number-price-trans"}),i("div",{staticClass:"item-number-price-trans"}),null!=e.item_booking.balance?i("div",{staticClass:"item-number-price"},[i("money",e._b({staticClass:"input-number-table-price",attrs:{disabled:!0},model:{value:e.item_booking.balance,callback:function(t){e.$set(e.item_booking,"balance",t)},expression:"item_booking.balance"}},"money",e.money_option,!1))],1):e._e()]),i("div",{staticClass:"q-mt-lg w-100"},[i("el-tabs",{attrs:{type:"border-card"}},[i("el-tab-pane",{attrs:{label:"Money receive"}},[i("div",{staticClass:"no-money-receive q-mb-lg"},[i("q-btn",{attrs:{disabled:e.is_view_booking||!e.is_view_booking&&-1!=e.item_booking.status&&3!=e.item_booking.status&&4!=e.item_booking.status&&5!=e.item_booking.status&&6!=e.item_booking.status&&7!=e.item_booking.status,icon:"add",label:"Add money receive",size:"sm",color:"primary"},on:{click:function(t){return e.triggerOpenModalAddMoneyReceive()}}})],1),i("div",{staticClass:"list-money-receive"},e._l(e.list_money_receive_temp,(function(t,o){return i("div",{key:o,staticClass:"item-money-receive"},[i("div",{staticClass:"flex items-center w-100"},[t.created?i("div",{staticClass:"item-money-receive-trans"},[e._v("\n                          Payment time :\n                        ")]):i("div",{staticClass:"item-money-receive-trans"}),i("div",{staticClass:"item-money-receive-trans"},[t.lastModified?i("span",[e._v(e._s(e._f("formatDateSystem")(t.lastModified)))]):t.created?i("span",[e._v(e._s(e._f("formatDateSystem")(t.created)))]):e._e()]),i("div",{staticClass:"item-money-receive-trans justify-center"},[i("q-btn",{attrs:{disabled:e.is_view_booking,icon:"edit",color:"primary",size:"sm"},on:{click:function(i){return e.triggerEditMoneyReceive(t,o)}}})],1)]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"item-money-receive-trans"},[e._v("Amount :")]),i("div",{staticClass:"item-money-receive-trans"},[e._v("\n                          "+e._s(e._f("currency")(t.amount,e.option_filter))+"\n                        ")]),i("div",{staticClass:"item-money-receive-trans"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"item-money-receive-trans"},[e._v("From :")]),i("div",{staticClass:"item-money-receive-trans"},[e._v("\n                          "+e._s(e.getPaymentTypeName(t.paymentType))+"\n                        ")]),i("div",{staticClass:"item-money-receive-trans"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"item-money-receive-trans"},[e._v("Classify :")]),i("div",{staticClass:"item-money-receive-trans"},[e._v("\n                          "+e._s(e.getClassifyName(t.classify))+"\n                        ")]),i("div",{staticClass:"item-money-receive-trans"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"item-money-receive-trans"},[e._v("Bank fee :")]),i("div",{staticClass:"item-money-receive-trans"},[e._v("\n                          "+e._s(e._f("currency")(t.fee,e.option_filter))+"\n                        ")]),i("div",{staticClass:"item-money-receive-trans"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"item-money-receive-trans"},[e._v("Notes :")]),i("div",{staticClass:"item-money-receive-trans"},[e._v("\n                          "+e._s(t.notes)+"\n                        ")]),i("div",{staticClass:"item-money-receive-trans"})]),e.is_view_booking?e._e():i("div",{staticClass:"text-center q-mt-md"},[i("q-btn",{attrs:{disabled:e.is_view_booking,icon:"delete",color:"negative",label:"Delete",size:"sm"},on:{click:function(i){return e.deleteMoneyReceive(t)}}})],1)])})),0)]),i("el-tab-pane",{attrs:{label:"Refund"}},[i("div",{staticClass:"no-money-receive q-mb-lg"},[i("q-btn",{attrs:{disabled:e.is_view_booking||e.item_booking.balance>=0||!e.is_view_booking&&-1!=e.item_booking.status&&3!=e.item_booking.status&&4!=e.item_booking.status&&5!=e.item_booking.status&&6!=e.item_booking.status&&7!=e.item_booking.status,icon:"add",label:"Add refund",size:"sm",color:"primary"},on:{click:function(t){return e.triggerOpenModalAddRefund()}}})],1),i("div",{staticClass:"list-money-receive"},e._l(e.list_refund_temp,(function(t,o){return i("div",{key:o,staticClass:"item-money-receive"},[i("div",{staticClass:"flex items-center w-100"},[t.created?i("div",{staticClass:"item-money-receive-trans"},[e._v("\n                          Refund :\n                        ")]):i("div",{staticClass:"item-money-receive-trans"}),i("div",{staticClass:"item-money-receive-trans"},[t.lastModified?i("span",[e._v(e._s(e._f("formatDateSystem")(t.lastModified)))]):t.created?i("span",[e._v(e._s(e._f("formatDateSystem")(t.created)))]):e._e()]),i("div",{staticClass:"item-money-receive-trans justify-center"},[i("q-btn",{attrs:{disabled:e.is_view_booking,icon:"edit",color:"primary",size:"sm"},on:{click:function(i){return e.triggerEditRefund(t,o)}}})],1)]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"item-money-receive-trans"},[e._v("Amount :")]),i("div",{staticClass:"item-money-receive-trans"},[e._v("\n                          "+e._s(e._f("currency")(t.amount,e.option_filter))+"\n                        ")]),i("div",{staticClass:"item-money-receive-trans"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"item-money-receive-trans"},[e._v("From :")]),i("div",{staticClass:"item-money-receive-trans"},[e._v("\n                          "+e._s(e.getPaymentTypeName(t.paymentType))+"\n                        ")]),i("div",{staticClass:"item-money-receive-trans"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"item-money-receive-trans"},[e._v("Bank fee :")]),i("div",{staticClass:"item-money-receive-trans"},[e._v("\n                          "+e._s(e._f("currency")(t.fee,e.option_filter))+"\n                        ")]),i("div",{staticClass:"item-money-receive-trans"})]),i("div",{staticClass:"flex items-center w-100"},[i("div",{staticClass:"item-money-receive-trans"},[e._v("Notes :")]),i("div",{staticClass:"item-money-receive-trans"},[e._v("\n                          "+e._s(t.notes)+"\n                        ")]),i("div",{staticClass:"item-money-receive-trans"})]),e.is_view_booking?e._e():i("div",{staticClass:"text-center q-mt-md"},[i("q-btn",{attrs:{disabled:e.is_view_booking,icon:"delete",color:"negative",label:"Delete",size:"sm"},on:{click:function(i){return e.deleteRefund(t)}}})],1)])})),0)])],1)],1)])])])],1)],1),i("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale"},model:{value:e.open_modal_add_refund,callback:function(t){e.open_modal_add_refund=t},expression:"open_modal_add_refund"}},[i("q-card",{staticClass:"bg-primary text-white",staticStyle:{width:"400px"}},[e.is_edit_refund?i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("Edit refund")]):i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("Add refund")]),i("q-card-actions",{staticClass:"bg-white text-black"},[i("div",{staticClass:"add-money-receive-wrapper"},[i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Amount :")]),i("div",{staticClass:"content"},[i("money",e._b({staticClass:"input-number-custom-1",class:{"input-error":e.$v.obj_refund_temp.amount.$error},model:{value:e.$v.obj_refund_temp.amount.$model,callback:function(t){e.$set(e.$v.obj_refund_temp.amount,"$model",t)},expression:"$v.obj_refund_temp.amount.$model"}},"money",e.money_option,!1)),e.$v.obj_refund_temp.amount.$error?i("div",{staticClass:"error-content"},[e._v("\n                Amount is required\n              ")]):e._e()],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("From :")]),i("div",{staticClass:"content"},[i("el-select",{attrs:{size:"mini",placeholder:"Choose from","popper-class":"select-group-new-booking"},model:{value:e.obj_refund_temp.paymentType,callback:function(t){e.$set(e.obj_refund_temp,"paymentType",t)},expression:"obj_refund_temp.paymentType"}},e._l(e.option_type_of_payment,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Bank fee :")]),i("div",{staticClass:"content"},[i("money",e._b({staticClass:"input-number-custom-1",class:{"input-error":e.$v.obj_refund_temp.fee.$error},model:{value:e.$v.obj_refund_temp.fee.$model,callback:function(t){e.$set(e.$v.obj_refund_temp.fee,"$model",t)},expression:"$v.obj_refund_temp.fee.$model"}},"money",e.money_option,!1)),e.$v.obj_refund_temp.fee.$error?i("div",{staticClass:"error-content"},[e._v("\n                Bank fee is required\n              ")]):e._e()],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Notes :")]),i("div",{staticClass:"content"},[i("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:e.obj_refund_temp.notes,callback:function(t){e.$set(e.obj_refund_temp,"notes",t)},expression:"obj_refund_temp.notes"}})],1)])])]),i("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[e.is_edit_refund?i("div",[i("q-btn",{attrs:{label:"Save",color:"primary",size:"sm",icon:"check"},on:{click:function(t){return e.editRefund()}}})],1):i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{label:"cancel",color:"white",size:"sm","text-color":"black",icon:"cancel"}}),i("q-btn",{attrs:{label:"Add",color:"primary",size:"sm",icon:"add"},on:{click:function(t){return e.addRefund()}}})],1)])],1)],1),i("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale"},model:{value:e.open_modal_add_money_receive,callback:function(t){e.open_modal_add_money_receive=t},expression:"open_modal_add_money_receive"}},[i("q-card",{staticClass:"bg-primary text-white",staticStyle:{width:"400px"}},[e.is_edit_money_receive?i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("Edit money receive")]):i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("Add money receive")]),i("q-card-actions",{staticClass:"bg-white text-black"},[i("div",{staticClass:"add-money-receive-wrapper"},[i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Amount :")]),i("div",{staticClass:"content"},[i("money",e._b({staticClass:"input-number-custom-1",class:{"input-error":e.$v.obj_money_receive_temp.amount.$error},model:{value:e.$v.obj_money_receive_temp.amount.$model,callback:function(t){e.$set(e.$v.obj_money_receive_temp.amount,"$model",t)},expression:"$v.obj_money_receive_temp.amount.$model"}},"money",e.money_option,!1)),e.$v.obj_money_receive_temp.amount.$error?i("div",{staticClass:"error-content"},[e._v("\n                Amount is required\n              ")]):e._e()],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("From :")]),i("div",{staticClass:"content"},[i("el-select",{attrs:{size:"mini",placeholder:"Choose from","popper-class":"select-group-new-booking"},model:{value:e.obj_money_receive_temp.paymentType,callback:function(t){e.$set(e.obj_money_receive_temp,"paymentType",t)},expression:"obj_money_receive_temp.paymentType"}},e._l(e.option_type_of_payment,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Classify :")]),i("div",{staticClass:"content"},[i("el-select",{attrs:{size:"mini",placeholder:"Choose classify","popper-class":"select-group-new-booking"},model:{value:e.obj_money_receive_temp.classify,callback:function(t){e.$set(e.obj_money_receive_temp,"classify",t)},expression:"obj_money_receive_temp.classify"}},e._l(e.options_classify_new_payment,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Bank fee :")]),i("div",{staticClass:"content"},[i("money",e._b({staticClass:"input-number-custom-1",class:{"input-error":e.$v.obj_money_receive_temp.fee.$error},model:{value:e.$v.obj_money_receive_temp.fee.$model,callback:function(t){e.$set(e.$v.obj_money_receive_temp.fee,"$model",t)},expression:"$v.obj_money_receive_temp.fee.$model"}},"money",e.money_option,!1)),e.$v.obj_money_receive_temp.fee.$error?i("div",{staticClass:"error-content"},[e._v("\n                Bank fee is required\n              ")]):e._e()],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Notes :")]),i("div",{staticClass:"content"},[i("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:e.obj_money_receive_temp.notes,callback:function(t){e.$set(e.obj_money_receive_temp,"notes",t)},expression:"obj_money_receive_temp.notes"}})],1)])])]),i("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[e.is_edit_money_receive?i("div",[i("q-btn",{attrs:{label:"Save",color:"primary",size:"sm",icon:"check"},on:{click:function(t){return e.editMoneyReceive()}}})],1):i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{label:"cancel",color:"white",size:"sm","text-color":"black",icon:"cancel"}}),i("q-btn",{attrs:{label:"Add",color:"primary",size:"sm",icon:"add"},on:{click:function(t){return e.addMoneyReceive()}}})],1)])],1)],1),i("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale"},model:{value:e.open_modal_choose_email_template,callback:function(t){e.open_modal_choose_email_template=t},expression:"open_modal_choose_email_template"}},[i("q-card",{staticClass:"bg-primary text-white",staticStyle:{width:"400px"}},[i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("Choose email template")]),i("q-card-actions",{staticClass:"bg-white text-black"},[i("div",{staticClass:"choose-email-template-wrapper w-100 q-pt-md q-pb-md q-pl-sm q-pr-sm"},[i("el-select",{staticClass:"w-100",attrs:{size:"medium",placeholder:"Choose email template","popper-class":"select-group-new-booking"},model:{value:e.value_email_template,callback:function(t){e.value_email_template=t},expression:"value_email_template"}},e._l(e.list_email_template,(function(e){return i("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)],1)]),i("q-separator"),i("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[i("div",[i("q-btn",{staticClass:"q-mr-md",attrs:{label:"View email",color:"white",size:"sm","text-color":"black",icon:"pageview"},on:{click:function(t){return e.routerToViewEmail()}}})],1)])],1)],1),i("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale"},model:{value:e.open_modal_cancel_booking,callback:function(t){e.open_modal_cancel_booking=t},expression:"open_modal_cancel_booking"}},[i("q-card",{staticClass:"bg-primary text-white",staticStyle:{width:"400px"}},[i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("Cancel booking")]),i("q-card-actions",{staticClass:"bg-white text-black"},[i("div",{staticClass:"add-money-receive-wrapper"},[i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Cancellation sales :")]),i("div",{staticClass:"content"},[i("el-input-number",{staticClass:"input-number-custom",attrs:{disabled:!0,size:"mini",controls:!1},model:{value:e.item_booking.cancellationSales,callback:function(t){e.$set(e.item_booking,"cancellationSales",t)},expression:"item_booking.cancellationSales"}})],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Cancellation fee :")]),i("div",{staticClass:"content"},[i("el-input-number",{staticClass:"input-number-custom",attrs:{size:"mini",controls:!1},model:{value:e.item_booking.cancellationFee,callback:function(t){e.$set(e.item_booking,"cancellationFee",t)},expression:"item_booking.cancellationFee"}})],1)]),i("div",{staticClass:"item-add"},[i("div",{staticClass:"title-text"},[e._v("Notes :")]),i("div",{staticClass:"content"},[i("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:e.item_booking.cancellationNotes,callback:function(t){e.$set(e.item_booking,"cancellationNotes",t)},expression:"item_booking.cancellationNotes"}})],1)])])]),i("q-separator"),i("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{label:"Cancel",color:"white",size:"sm","text-color":"black",icon:"cancel"}}),i("q-btn",{attrs:{label:"Update",color:"primary",size:"sm",icon:"edit"},on:{click:function(t){return e.updateCancelBooking()}}})],1)])],1)],1),i("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale"},model:{value:e.open_modal_view_invoice_booking,callback:function(t){e.open_modal_view_invoice_booking=t},expression:"open_modal_view_invoice_booking"}},[i("q-card",{staticClass:"bg-primary text-white",staticStyle:{width:"1100px","max-width":"1100px"}},[i("q-card-actions",{staticClass:"section-header-detail-booking"},[e._v("View invoice booking")]),i("q-card-actions",{staticClass:"bg-white text-black"},[i("view-invoice-booking",{attrs:{info_booking:e.info_booking_view_invoice}})],1),i("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{label:"Cancel",color:"white",size:"sm","text-color":"black",icon:"cancel"}})],1)])],1)],1)],1)}),s=[],r=(i("8e6e"),i("8a81"),i("ac6a"),i("cadf"),i("456d"),i("55dd"),i("8993")),l=i.n(r),c=(i("6b54"),i("06db"),i("28a5"),i("c47a")),m=i.n(c),d=(i("c5f6"),i("e30a")),u=i.n(d),_=(i("b40d"),i("2f62")),p=i("b5ae"),b=i("391a"),v=i("ab2a"),g=i("d5b7"),k=i("a0d5"),f=i("e71f");function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function y(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(i,!0).forEach((function(t){m()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var C={name:"List-booking-desktop-page",props:{status_props_booking:{type:Number,default:-1}},filters:{getNameStatus:function(e){var t=[{value:0,label:"Pending"},{value:1,label:"Waiting"},{value:2,label:"Reject"},{value:3,label:"CF-Unpaid"},{value:4,label:"CF-Deposit"},{value:5,label:"CF-Paid"},{value:6,label:"DD-Paid"},{value:7,label:"DD-Due"},{value:8,label:"Cancel"},{value:9,label:"Others"}],i="";return t.forEach((function(t){t.value==e&&(i=t.label)})),i},formatPaymentTime:function(e){var t=new Date(e);return t.toLocaleDateString()}},watch:{current_branch_id:function(e){!isNaN(e)&&parseInt(e)>0&&(this.getListTourType(),this.getListHotel(),this.getListClient(),this.getListEmailTemplate(),this.getListBooking(),this.getListProduct(),this.getListMainTransportation(),this.getListBooker())},regional_branch:function(e){e&&e.mainCurrency&&(this.money_option=Object(f["a"])(parseInt(e.mainCurrency)),1==parseInt(e.mainCurrency)&&(this.option_filter={symbol:"",thousandsSeparator:",",fractionCount:0,fractionSeparator:".",display_symbol:"VND"}),2==parseInt(e.mainCurrency)&&(this.option_filter={symbol:"",thousandsSeparator:",",fractionCount:2,fractionSeparator:".",display_symbol:"$"}),this.$forceUpdate())},role_perm:function(e){this.$forceUpdate()},total_net_sales_new_booking:function(e){this.item_booking.netSales=e,this.item_booking.receivables=e},total_tax_amount:function(e){this.item_booking.taxAmount=e},total_net_sale_before_tax:function(e){this.item_booking.netSalesBeforeTax=e},total_remaining_amount:function(e){this.item_booking.remainingAmount=e},total_balance:function(e){this.item_booking.balance=e},total_money_receive_deposit_amount:function(e){this.item_booking.depositReceived=e},total_refund:function(e){this.item_booking.refundToGuests=e},total_money_additional_payment_amount:function(e){this.item_booking.paymentReceived=e},total_guest_quantity:function(e){this.item_booking.guestQuantity=e},"item_booking.adultNumber":function(e){this.tier_and_price[0].quantity=e},"item_booking.childNumber":function(e){this.tier_and_price[1].quantity=e},"item_booking.infantNumber":function(e){this.tier_and_price[2].quantity=e},"item_booking.youthNumber":function(e){this.tier_and_price[3].quantity=e},"item_booking.seniorNumber":function(e){this.tier_and_price[4].quantity=e},"info_filter_booking.date_range":function(e){e.end&&this.getListBooking()}},computed:y({},Object(_["b"])({current_user_logged_info:"login/getUserLoggedInfo",current_branch_id:"login/getCurrentBranchId",regional_branch:"login/getInfoRegionalBranch",role_perm:"login/getInfoPerm"}),{is_read:function(){return this.getPermRole("order:read")},is_add:function(){return this.getPermRole("order:add")},is_delete:function(){return this.getPermRole("order:delete")},is_group:function(){return this.getPermRole("order:group")},is_cancel:function(){return this.getPermRole("order:cancel")},is_read_tab_1:function(){return this.getPermRole("order:read-tab1")},is_read_tab_2:function(){return this.getPermRole("order:read-tab2")},is_read_tab_3:function(){return this.getPermRole("order:read-tab3")},is_read_tab_4:function(){return this.getPermRole("order:read-tab4")},is_update_tab_1:function(){return this.getPermRole("order:update-tab1")},is_update_tab_2:function(){return this.getPermRole("order:update-tab2")},is_update_tab_3:function(){return this.getPermRole("order:update-tab3")},is_update_tab_4:function(){return this.getPermRole("order:update-tab4")},is_groupable:function(){var e=!0;if(this.selected_booking.length>0){if(1==this.selected_booking.length)return!0;var t=this.selected_booking[0].productCode,i=this.selected_booking[0].travelDate;return this.selected_booking.forEach((function(o){t==o.productCode&&i==o.travelDate||(e=!1)})),e}return e},pickerOptionTravelDate:function(){return{disabledDate:function(e){var t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),e.getTime()<t.getTime()}}},selected_booking:function(){var e=[];return this.list_booking.forEach((function(t){t.check_select&&e.push(t)})),e},total_sales_new_booking:function(){var e=this,t=0;return e.tier_and_price.forEach((function(e){e.active&&(t+=e.sales)})),t},total_other_sales_new_booking:function(){var e=this.item_booking.surcharge+this.item_booking.commissionFee+this.item_booking.cancellationFee+this.item_booking.othersIncreaseFee;return e},total_net_sales_new_booking:function(){var e=this.getRightNumber(this.item_booking.grossSales),t=this.getRightNumber(this.item_booking.couponValue),i=this.getRightNumber(this.item_booking.discount),o=this.getRightNumber(this.item_booking.cancellationSales),a=this.getRightNumber(this.item_booking.otherDecreaseFee),n=e-(t+i+o+a);return n},total_tax_amount:function(){var e=this.item_booking.netSales/(1+this.item_booking.taxRate/100)*(this.item_booking.taxRate/100);return e},total_net_sale_before_tax:function(){var e=this.item_booking.netSales-this.item_booking.taxAmount;return e},total_remaining_amount:function(){var e=this.item_booking.netSales-this.item_booking.depositReceived;return e},total_balance:function(){var e=this.item_booking.netSales-this.item_booking.depositReceived-this.item_booking.paymentReceived-this.item_booking.refundToGuests;return e},total_money_receive_deposit_amount:function(){var e=this,t=0;return e.list_money_receive_temp.forEach((function(e){0==e.classify&&(t+=e.amount)})),t},total_refund:function(){var e=this,t=0;return e.list_refund_temp.forEach((function(e){t+=e.amount})),t},total_money_additional_payment_amount:function(){var e=this,t=0;return e.list_money_receive_temp.forEach((function(e){1==e.classify&&(t+=e.amount)})),t},total_guest_quantity:function(){var e=this.item_booking.adultNumber+this.item_booking.childNumber+this.item_booking.infantNumber+this.item_booking.youthNumber+this.item_booking.seniorNumber;return e}}),validations:{item_booking:{productId:{required:p["required"]},travelDate:{required:p["required"]},startTime:{required:p["required"]},bookingDate:{required:p["required"]},adultNumber:{required:p["required"]},childNumber:{required:p["required"]},infantNumber:{required:p["required"]},youthNumber:{required:p["required"]},seniorNumber:{required:p["required"]},leadTravelerFirstName:{required:p["required"]},leadTravelerLastEmail:{required:p["required"]},surcharge:{required:p["required"]},commissionFee:{required:p["required"]},othersIncreaseFee:{required:p["required"]},discount:{required:p["required"]},otherDecreaseFee:{required:p["required"]},taxRate:{required:p["required"]}},obj_money_receive_temp:{amount:{required:p["required"]},fee:{required:p["required"]}},obj_refund_temp:{amount:{required:p["required"]},fee:{required:p["required"]}}},data:function(){return{is_true:!0,hourOptions:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22],item_booking:{bookingNumber:"",productId:"",productCode:"",productName:"",travelDate:"",groupBooking:"",startTime:"",endTime:"",bookerId:"",bookerName:"",bookerEmail:"",bookerSaleChannel:"",bookerClient:"",duration:"",tourType:"",transportation:"",guestQuantity:0,adultNumber:0,infantNumber:0,youthNumber:0,childNumber:0,seniorNumber:0,adultPrice:0,childPrice:0,infantPrice:0,youthPrice:0,seniorPrice:0,leadTravelerFirstName:"",leadTravelerLastName:"",leadTravelerLastPhone:"",leadTravelerLastEmail:"",leadTravelerGender:"",otherTravelerNames:[],nationality:"",passportNumber:"",bookingDate:"",foodNotes:"",otherNotes:"",pickupOrder:"",pickupTimeFrom:"",pickupTimeTo:"",hotelName:"",hotelAddress:"",sales:0,otherSales:0,surcharge:0,commissionFee:0,othersIncreaseFee:0,grossSales:0,saleDeduction:0,discount:0,couponCode:"",couponValue:"",otherDecreaseFee:0,netSales:0,taxRate:0,taxAmount:0,netSalesBeforeTax:0,depositRequested:0,depositReceived:0,remainingAmount:0,paymentReceived:0,refundToGuests:0,balance:0,emailSent:!0,invoiceSent:!0,reminderText:"",status:-1,cancellationFee:0,cancellationSales:0,receivables:0},info_booking_view_invoice:{},data_total_row:{guest_quantity:0,adult_number:0,child_number:0,infant_number:0,youth_number:0,senior_number:0,adult_price:0,child_price:0,infant_price:0,youth_price:0,senior_price:0,sales:0,other_sales:0,surcharge:0,commission:0,cancellation_fee:0,other_revenue:0,gross_sales:0,sales_deduction:0,discount:0,coupon_value:0,cancellation_sales:0,other_deduction:0,net_sales:0,tax_amount:0,net_sale_before_tax:0,deposit_request:0,deposit_receive:0,remaining_amount:0,payment_receive:0,refund_to_guess:0,balance:0},options_country_world:b["a"],options_range_time:[{value:"12:00am",label:"12:00am"},{value:"12:30am",label:"12:30am"},{value:"01:00am",label:"01:00am"},{value:"01:30am",label:"01:30am"},{value:"02:00am",label:"02:00am"},{value:"02:30am",label:"02:30am"},{value:"03:00am",label:"03:00am"},{value:"03:30am",label:"03:30am"},{value:"04:00am",label:"04:00am"},{value:"04:30am",label:"04:30am"},{value:"05:00am",label:"05:00am"},{value:"05:30am",label:"05:30am"},{value:"06:00am",label:"06:00am"},{value:"06:30am",label:"06:30am"},{value:"07:00am",label:"07:00am"},{value:"07:30am",label:"07:30am"},{value:"08:00am",label:"08:00am"},{value:"08:30am",label:"08:30am"},{value:"09:00am",label:"09:00am"},{value:"09:30am",label:"09:30am"},{value:"10:00am",label:"10:00am"},{value:"10:30am",label:"10:30am"},{value:"11:00am",label:"11:00am"},{value:"11:30am",label:"11:30am"},{value:"12:00pm",label:"12:00pm"},{value:"12:30pm",label:"12:30pm"},{value:"01:00pm",label:"01:00pm"},{value:"01:30pm",label:"01:30pm"},{value:"02:00pm",label:"02:00pm"},{value:"02:30pm",label:"02:30pm"},{value:"03:00pm",label:"03:00pm"},{value:"03:30pm",label:"03:30pm"},{value:"04:00pm",label:"04:00pm"},{value:"04:30pm",label:"04:30pm"},{value:"05:00pm",label:"05:00pm"},{value:"05:30pm",label:"05:30pm"},{value:"06:00pm",label:"06:00pm"},{value:"06:30pm",label:"06:30pm"},{value:"07:00pm",label:"07:00pm"},{value:"07:30pm",label:"07:30pm"},{value:"08:00pm",label:"08:00pm"},{value:"08:30pm",label:"08:30pm"},{value:"09:00pm",label:"09:00pm"},{value:"09:30pm",label:"09:30pm"},{value:"10:00pm",label:"10:00pm"},{value:"10:30pm",label:"10:30pm"},{value:"11:00pm",label:"11:00pm"},{value:"11:30pm",label:"11:30pm"}],options_range_time_filter:[{value:-1,label:"Not selected"},{value:"12:00am",label:"12:00am"},{value:"12:30am",label:"12:30am"},{value:"01:00am",label:"01:00am"},{value:"01:30am",label:"01:30am"},{value:"02:00am",label:"02:00am"},{value:"02:30am",label:"02:30am"},{value:"03:00am",label:"03:00am"},{value:"03:30am",label:"03:30am"},{value:"04:00am",label:"04:00am"},{value:"04:30am",label:"04:30am"},{value:"05:00am",label:"05:00am"},{value:"05:30am",label:"05:30am"},{value:"06:00am",label:"06:00am"},{value:"06:30am",label:"06:30am"},{value:"07:00am",label:"07:00am"},{value:"07:30am",label:"07:30am"},{value:"08:00am",label:"08:00am"},{value:"08:30am",label:"08:30am"},{value:"09:00am",label:"09:00am"},{value:"09:30am",label:"09:30am"},{value:"10:00am",label:"10:00am"},{value:"10:30am",label:"10:30am"},{value:"11:00am",label:"11:00am"},{value:"11:30am",label:"11:30am"},{value:"12:00pm",label:"12:00pm"},{value:"12:30pm",label:"12:30pm"},{value:"01:00pm",label:"01:00pm"},{value:"01:30pm",label:"01:30pm"},{value:"02:00pm",label:"02:00pm"},{value:"02:30pm",label:"02:30pm"},{value:"03:00pm",label:"03:00pm"},{value:"03:30pm",label:"03:30pm"},{value:"04:00pm",label:"04:00pm"},{value:"04:30pm",label:"04:30pm"},{value:"05:00pm",label:"05:00pm"},{value:"05:30pm",label:"05:30pm"},{value:"06:00pm",label:"06:00pm"},{value:"06:30pm",label:"06:30pm"},{value:"07:00pm",label:"07:00pm"},{value:"07:30pm",label:"07:30pm"},{value:"08:00pm",label:"08:00pm"},{value:"08:30pm",label:"08:30pm"},{value:"09:00pm",label:"09:00pm"},{value:"09:30pm",label:"09:30pm"},{value:"10:00pm",label:"10:00pm"},{value:"10:30pm",label:"10:30pm"},{value:"11:00pm",label:"11:00pm"},{value:"11:30pm",label:"11:30pm"}],options_group_booking:[{name:"No choose",value:""},{name:"Tour #1",value:"tour1"},{name:"Tour #2",value:"tour2"},{name:"Tour #3",value:"tour3"},{name:"Tour #4",value:"tour4"},{name:"Tour #5",value:"tour5"},{name:"Tour #6",value:"tour6"},{name:"Tour #7",value:"tour7"},{name:"Tour #8",value:"tour8"},{name:"Tour #9",value:"tour9"}],options_status_booking:[{value:-1,label:"No choose"},{value:0,label:"Pending"},{value:1,label:"Waiting"},{value:2,label:"Reject"},{value:3,label:"CF-Unpaid"},{value:8,label:"Cancel"},{value:9,label:"Others"}],options_status_booking_filter:[{value:-1,label:"Not selected"},{value:0,label:"Pending"},{value:1,label:"Waiting"},{value:2,label:"Reject"},{value:3,label:"CF-Unpaid"},{value:4,label:"CF-Deposit"},{value:5,label:"CF-Paid"},{value:6,label:"DD-Paid"},{value:7,label:"DD-Due"},{value:8,label:"Cancel"},{value:9,label:"Others"}],options_main_transportation:[],options_main_transportation_filter:[],option_start_time:[],options_day_of_week:[{value:"Monday",label:"Monday"},{value:"Tuesday",label:"Tuesday"},{value:"Wednesday",label:"Wednesday"},{value:"Thursday",label:"Thursday"},{value:"Friday",label:"Friday"},{value:"Saturday",label:"Saturday"},{value:"Sunday",label:"Sunday"}],options_day_of_week_filter:[{value:-1,label:"Not selected"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"},{value:0,label:"Sunday"}],option_tour_type:[],option_tour_type_filter:[],options_status_yes_no:[{label:"Yes",value:!0},{label:"No",value:!1}],options_status_yes_no_filter:[{label:"Not selected",value:-1},{label:"Yes",value:!0},{label:"No",value:!1}],options_invoice_send_yes_no:[{label:"Yes",value:!0},{label:"No",value:!1}],options_hotel:[],list_hotel:[],list_bookers_client_filter:[],list_bookers_sale_channel:[],options_bookers:[],options_bookers_filter:[],options_gender:[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Other",value:"other"}],options_pickup_order:[{label:"#1",value:"#1"},{label:"#2",value:"#2"},{label:"#3",value:"#3"},{label:"#4",value:"#4"}],options_classify_new_payment:[{name:"Deposit received",value:0},{name:"Additional payment",value:1}],option_type_of_payment:[{name:"Cash",value:0},{name:"Bank Transfer",value:1},{name:"Paypal",value:2},{name:"Credit Card",value:3}],list_product:[],list_booking:[],options_list_group_tour:["tour1","tour2","tour3","Tour4"],data_product_temp:{},temp_duration:{days:"",hours:"",minutes:""},list_money_receive_temp:[],obj_money_receive_temp:{created:null,lastModified:null,amount:0,paymentType:0,classify:0,fee:"",notes:""},index_money_receive_current:-1,list_refund_temp:[],obj_refund_temp:{created:null,lastModified:null,amount:0,paymentType:0,fee:"",notes:""},index_refund_current:-1,list_will_deleted_receivable:[],tier_and_price:[{name:"Adult",price:0,quantity:0,sales:0,active:!1},{name:"Child",price:0,quantity:0,sales:0,active:!1},{name:"Infant",price:0,quantity:0,sales:0,active:!1},{name:"Youth",price:0,quantity:0,sales:0,active:!1},{name:"Senior",price:0,quantity:0,sales:0,active:!1}],loading:{loading_product:!1,loading_list_booking:!1,loading_list_booker:!1},open_modal_choose_email_template:!1,value_email_template:"",list_email_template:[],open_modal_view_invoice_booking:!1,open_modal_cancel_booking:!1,is_open_dialog_choose_duration:!1,open_modal_add_money_receive:!1,open_modal_add_refund:!1,tab:"details",tab_add_new_booking:"booking",pagination:{sortBy:"stt",descending:!1,page:1,rowsPerPage:10},group_booking_choosed:null,open_modal_add_booking:!1,selected:[],columns:v["a"],info_filter_booking:{status:-1,booking_number:"",product_name:"",date_range:{},day_of_week:-1,tour_type:-1,start_time:-1,group_booking:"",transportation:-1,booker_name:"Not selected",booker_client:-1,booker_sale_channel:"",lead_first_name:"",lead_last_name:"",nationality:"",lead_email:"",food_note:"",other_note:"",booking_date:"",email_sent:-1,invoice_sent:-1},options:[],is_view_booking:!1,is_edit_booking:!1,options_status:[],current_booking_select_to_view:{},is_edit_money_receive:!1,is_edit_refund:!1,checkbox_temp:!1,money_option:{},option_filter:{symbol:"",thousandsSeparator:",",fractionCount:0,fractionSeparator:".",display_symbol:"VND"}}},methods:{viewTourOfBooking:function(e){var t=this.$router.resolve({name:"view-detail-tour",params:{tour_id:e.tourId}});window.open(t.href,"_blank")},getDateFromDateFilter:function(e){if(e){var t=e.split("/"),i=t[0],o=t[1],a=t[2],n=new Date(parseInt(a),parseInt(o)-1,parseInt(i),0,0,0);return n}return null},onDateSelected:function(){},getNameHeaderCrop:function(e){var t=e.split(" ").length;if(t>1){var i="",o=e.split(" ");return o.forEach((function(e,t){i+=1==t?"<br>"+e:" "+e})),i}return e},triggerOpenModalViewInvoice:function(){this.info_booking_view_invoice=this.item_booking,this.open_modal_view_invoice_booking=!0},getNameGroupBooking:function(e){var t="";return this.options_group_booking.forEach((function(i){i.value==e&&(t=i.name)})),t},getPermRole:function(e){return-1!=this.role_perm.indexOf(e)},getFormatDate:function(e){var t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=new Date(e),a=t[o.getDay()],n=i[o.getMonth()],s=o.getDate().toString(),r=o.getFullYear().toString();return a+", "+s+" "+n+" "+r},getRightNumber:function(e){return e?isNaN(e)||""==e?0:parseFloat(e):0},reloadDataBookingInView:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");e.$axios.get("/api/Orders/GetDetail?orderId="+e.item_booking.id,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.openModalViewBooking(t.data)})).catch((function(t){e.item_booking.couponCode="",e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have error"})}))},updateCancelBooking:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i={orderId:e.item_booking.id,cancellationFee:e.item_booking.cancellationFee,cancellationNotes:e.item_booking.cancellationNotes};e.$axios.put("/api/Orders/Cancel",JSON.stringify(i),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.open_modal_cancel_booking=!1,e.reloadDataBookingInView(),e.getListBooking(),e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Update successfully!"})})).catch((function(t){e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have error"})}))},triggerOpenModalCancelBooking:function(){this.open_modal_cancel_booking=!0},checkCouponCode:function(){var e=this,t=e.current_branch_id;if(""!=e.item_booking.couponCode){var i=localStorage.getItem("user_token_fisheye_client");e.$axios.get("/api/Coupons/CheckValidCoupon?BranchId="+t+"&Code="+e.item_booking.couponCode,{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(t){var i=t.data;if(i.status)if(-1!=i.productIdsApplied.indexOf(e.item_booking.productId.toString())){var o=new Date(i.startTime),a=new Date(i.endTime),n=new Date;o.setHours(1),a.setHours(23),n>=o&&n<=a?1==i.type?e.item_booking.couponValue=i.value/100*e.item_booking.grossSales:e.item_booking.couponValue=i.value:(e.item_booking.couponCode="",e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Coupon is invalid"}))}else e.item_booking.couponCode="",e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Coupon is invalid"});else e.item_booking.couponCode="",e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Coupon is invalid"})})).catch((function(t){e.item_booking.couponCode="",e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Coupon is invalid"})}))}},triggerEditMoneyReceive:function(e,t){this.checkValidateMoneyReceive()&&(this.obj_money_receive_temp=JSON.parse(JSON.stringify(e)),this.index_money_receive_current=t,this.is_edit_money_receive=!0,this.open_modal_add_money_receive=!0)},triggerEditRefund:function(e,t){this.obj_refund_temp=JSON.parse(JSON.stringify(e)),this.index_refund_current=t,this.is_edit_refund=!0,this.open_modal_add_refund=!0},getPaymentTypeName:function(e){var t="";return this.option_type_of_payment.forEach((function(i){i.value==e&&(t=i.name)})),t},getClassifyName:function(e){var t="";return this.options_classify_new_payment.forEach((function(i){i.value==e&&(t=i.name)})),t},cancelEditBooking:function(){var e=this;e.$v.item_booking.$reset(),this.is_view_booking=!0,this.is_edit_booking=!1,this.list_will_deleted_receivable=[]},triggerEditBooking:function(){this.is_view_booking=!1,this.is_edit_booking=!0},changeValueHotel:function(){var e=this,t=e.item_booking.hotelName;e.list_hotel.forEach((function(i){i.placeName==t&&(e.item_booking.hotelAddress=i.placeAddress)})),e.$forceUpdate()},routerToViewEmail:function(){var e=this.item_booking.id,t=this.value_email_template,i=this.$router.resolve({name:"preview-template",params:{booking_id:e,template_id:t}});window.open(i.href,"_blank"),this.open_modal_choose_email_template=!1},triggerOpenModalGenerateEmail:function(){this.open_modal_choose_email_template=!0},changeInputQuantityTierAndPrice:function(e){var t=this;switch(e.name){case"Adult":t.item_booking.adultNumber=e.quantity;break;case"Child":t.item_booking.childNumber=e.quantity;break;case"Infant":t.item_booking.infantNumber=e.quantity;break;case"Youth":t.item_booking.youthNumber=e.quantity;break;case"Senior":t.item_booking.seniorNumber=e.quantity;break;default:break}t.$forceUpdate()},doGroupTour:function(){var e=this,t=e.selected_booking.map((function(e){return e.id})),i=localStorage.getItem("user_token_fisheye_client"),o={orderIds:t,branchId:parseInt(e.current_branch_id),tourIndex:e.group_booking_choosed};e.$axios.post("/api/Orders/Group",JSON.stringify(o),{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(t){e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Group booking successfully!"}),e.list_booking.forEach((function(e){e.check_select=!1})),e.group_booking_choosed=null,e.getListBooking()})).catch((function(t){e.list_booking.forEach((function(e){e.check_select=!1})),e.group_booking_choosed=null,t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))},changeSelectGroupBooking:function(){var e=this;this.is_groupable?this.$q.dialog({title:"Confirm",message:"Would you like to group this booking?",ok:{},cancel:{push:!0,color:"negative"},persistent:!0}).onOk((function(){e.doGroupTour()})).onCancel((function(){e.list_booking.forEach((function(e){e.check_select=!1})),e.group_booking_choosed=null,e.$forceUpdate()})).onDismiss((function(){})):(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Can not group orders have Product code or Travel date different"}),e.group_booking_choosed=null)},addOrderReceivable:function(e){var t=this,i=localStorage.getItem("user_token_fisheye_client");0==t.list_money_receive_temp.length&&0==t.list_refund_temp.length?(t.open_modal_add_booking=!1,t.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Create successfully!"})):(0!=t.list_money_receive_temp.length&&0==t.list_refund_temp.length&&t.list_money_receive_temp.forEach((function(o,a){var n={orderId:e,amount:o.amount,type:0,classify:o.classify,paymentType:o.paymentType,fee:o.fee,notes:o.notes};a!=t.list_money_receive_temp.length-1?t.$axios.post("/api/Orders/AddReceivable",JSON.stringify(n),{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(e){})).catch((function(e){e.response.data?t.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:e.response.data}):t.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})})):t.$axios.post("/api/Orders/AddReceivable",JSON.stringify(n),{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(e){t.open_modal_add_booking=!1,t.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Create successfully!"})})).catch((function(e){e.response.data?t.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:e.response.data}):t.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))})),0==t.list_money_receive_temp.length&&0!=t.list_refund_temp.length&&t.list_refund_temp.forEach((function(o,a){var n={orderId:e,amount:o.amount,type:1,paymentType:o.paymentType,fee:o.fee,notes:o.notes};a!=t.list_refund_temp.length-1?t.$axios.post("/api/Orders/AddReceivable",JSON.stringify(n),{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(e){})).catch((function(e){consolog("error")})):t.$axios.post("/api/Orders/AddReceivable",JSON.stringify(n),{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(e){t.open_modal_add_booking=!1,t.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Create successfully!"})})).catch((function(e){consolog("error")}))})))},checkValidate:function(){var e=this;return e.$v.item_booking.$touch(),!e.$v.item_booking.$error||(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Please view error in your booking!"}),!1)},checkValidateMoneyReceive:function(){var e=this;return e.$v.obj_money_receive_temp.$touch(),!e.$v.obj_money_receive_temp.$error||(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Please view error!"}),!1)},checkValidateRefund:function(){var e=this;return e.$v.obj_refund_temp.$touch(),!e.$v.obj_refund_temp.$error||(e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Please view error!"}),!1)},addBookingFinal:function(){if(this.checkValidate()){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i=new Date(e.item_booking.travelDate.toISOString());i.setHours(7);var o=new Date(e.item_booking.bookingDate.toISOString());o.setHours(7);var a={productId:e.item_booking.productId,travelDate:i,groupBooking:""==e.item_booking.groupBooking?null:e.item_booking.groupBooking,bookerId:e.item_booking.bookerId,startTime:e.item_booking.startTime,endTime:e.item_booking.endTime,duration:e.item_booking.duration,tourType:e.item_booking.tourType,transportation:e.item_booking.transportation,guestQuantity:e.item_booking.guestQuantity,adultNumber:e.item_booking.adultNumber,childNumber:e.item_booking.childNumber,infantNumber:e.item_booking.infantNumber,youthNumber:e.item_booking.youthNumber,seniorNumber:e.item_booking.seniorNumber,adultPrice:e.tier_and_price[0].price,childPrice:e.tier_and_price[1].price,infantPrice:e.tier_and_price[2].price,youthPrice:e.tier_and_price[3].price,seniorPrice:e.tier_and_price[4].price,leadTravelerFirstName:e.item_booking.leadTravelerFirstName,leadTravelerLastName:e.item_booking.leadTravelerLastName,leadTravelerLastPhone:e.item_booking.leadTravelerLastPhone,leadTravelerLastEmail:e.item_booking.leadTravelerLastEmail,leadTravelerGender:e.item_booking.leadTravelerGender,otherTravelerNames:e.item_booking.otherTravelerNames,nationality:e.item_booking.nationality,passportNumber:e.item_booking.passportNumber,bookingDate:o,pickupOrder:e.item_booking.pickupOrder,hotelName:e.item_booking.hotelName,hotelAddress:e.item_booking.hotelAddress,foodNotes:e.item_booking.foodNotes,otherNotes:e.item_booking.otherNotes,pickupTimeFrom:e.item_booking.pickupTimeFrom,pickupTimeTo:e.item_booking.pickupTimeTo,surcharge:e.item_booking.surcharge,commissionFee:e.item_booking.commissionFee,othersIncreaseFee:e.item_booking.othersIncreaseFee,discount:e.item_booking.discount,couponCode:e.item_booking.couponCode,otherDecreaseFee:e.item_booking.otherDecreaseFee,taxRate:e.item_booking.taxRate,taxAmount:e.item_booking.taxAmount,depositRequested:e.item_booking.depositRequested,depositReceived:e.item_booking.depositReceived,remainingAmount:e.item_booking.remainingAmount,paymentReceived:e.item_booking.paymentReceived,refundToGuests:e.item_booking.refundToGuests,balance:e.item_booking.balance,emailSent:e.item_booking.emailSent,invoiceSent:e.item_booking.invoiceSent,reminderText:e.item_booking.reminderText};-1!=e.item_booking.status&&(a.status=e.item_booking.status),this.$axios.post("/api/Orders/Create",JSON.stringify(a),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.addOrderReceivable(t.data),e.getListBooking()})).catch((function(t){t.response.data?t.response.data.GuestQuantity?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data.GuestQuantity[0]}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))}},editBookingFinal:function(){if(this.checkValidate()){var e=this;localStorage.getItem("user_token_fisheye_client");e.updateFirstTab()}},updateFirstTab:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");if("object"==l()(e.item_booking.travelDate)){var i=new Date(e.item_booking.travelDate.toISOString());i.setHours(7)}else i=e.item_booking.travelDate;if("object"==l()(e.item_booking.bookingDate)){var o=new Date(e.item_booking.bookingDate.toISOString());o.setHours(7)}else o=e.item_booking.bookingDate;var a={orderId:e.item_booking.id,productId:e.item_booking.productId,travelDate:i,startTime:e.item_booking.startTime,endTime:e.item_booking.endTime,duration:e.item_booking.duration,groupBooking:""==e.item_booking.groupBooking?null:e.item_booking.groupBooking,transportation:e.item_booking.transportation,guestQuantity:e.item_booking.guestQuantity,bookingDate:o,pickupOrder:e.item_booking.pickupOrder,hotelName:e.item_booking.hotelName,hotelAddress:e.item_booking.hotelAddress,emailSent:e.item_booking.emailSent,invoiceSent:e.item_booking.invoiceSent,reminderText:e.item_booking.reminderText};-1!=e.item_booking.status&&(a.status=e.item_booking.status),this.$axios.put("/api/Orders/UpdateFirstTab",JSON.stringify(a),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.updateSecondTab()})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))},updateSecondTab:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i={orderId:e.item_booking.id,bookerId:e.item_booking.bookerId,leadTravelerFirstName:e.item_booking.leadTravelerFirstName,leadTravelerLastName:e.item_booking.leadTravelerLastName,leadTravelerLastPhone:e.item_booking.leadTravelerLastPhone,leadTravelerLastEmail:e.item_booking.leadTravelerLastEmail,leadTravelerGender:e.item_booking.leadTravelerGender,pickupTimeFrom:e.item_booking.pickupTimeFrom,pickupTimeTo:e.item_booking.pickupTimeTo};this.$axios.put("/api/Orders/UpdateSecondTab",JSON.stringify(i),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.updateThirdTab()})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))},updateThirdTab:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i={orderId:e.item_booking.id,guestQuantity:e.item_booking.guestQuantity,adultNumber:e.item_booking.adultNumber,childNumber:e.item_booking.childNumber,infantNumber:e.item_booking.infantNumber,youthNumber:e.item_booking.youthNumber,seniorNumber:e.item_booking.seniorNumber,adultPrice:e.tier_and_price[0].price,childPrice:e.tier_and_price[1].price,infantPrice:e.tier_and_price[2].price,youthPrice:e.tier_and_price[3].price,seniorPrice:e.tier_and_price[4].price,surcharge:e.item_booking.surcharge,commission:e.item_booking.commissionFee,othersIncreaseFee:e.item_booking.othersIncreaseFee,discount:e.item_booking.discount,couponCode:e.item_booking.couponCode,otherDecreaseFee:e.item_booking.otherDecreaseFee,taxRate:e.item_booking.taxRate,taxAmount:e.item_booking.taxAmount,depositRequested:e.item_booking.depositRequested};this.$axios.put("/api/Orders/UpdateThirdTab",JSON.stringify(i),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.updateFourTab()})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))},updateFourTab:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");e.list_will_deleted_receivable.forEach((function(i){if(i.id&&i.orderId){var o={receivableId:i.id,orderId:i.orderId};e.$axios.delete("/api/Orders/DeleteReceivable",{data:o,headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(e){})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))}}));var i=e.list_money_receive_temp.filter((function(e){return void 0!=e.id&&null!=e.id})),o=e.list_money_receive_temp.filter((function(e){return void 0==e.id||null==e.id}));i.forEach((function(i){var o={receivableId:i.id,orderId:i.orderId,amount:i.amount,type:0,classify:i.classify,paymentType:i.paymentType,fee:i.fee,notes:i.notes};e.$axios.put("/api/Orders/UpdateReceivable",JSON.stringify(o),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(e){})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))})),o.forEach((function(i){var o={orderId:e.item_booking.id,amount:i.amount,type:0,classify:i.classify,paymentType:i.paymentType,fee:i.fee,notes:i.notes};e.$axios.post("/api/Orders/AddReceivable",JSON.stringify(o),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(e){})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))}));var a=e.list_refund_temp.filter((function(e){return void 0!=e.id&&null!=e.id})),n=e.list_refund_temp.filter((function(e){return void 0==e.id||null==e.id}));a.forEach((function(i){var o={receivableId:i.id,orderId:i.orderId,amount:i.amount,type:1,paymentType:i.paymentType,fee:i.fee,notes:i.notes};e.$axios.put("/api/Orders/UpdateReceivable",JSON.stringify(o),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(e){})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))})),n.forEach((function(i,o){var a={orderId:e.item_booking.id,amount:i.amount,type:1,paymentType:i.paymentType,fee:i.fee,notes:i.notes};e.$axios.post("/api/Orders/AddReceivable",JSON.stringify(a),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){o==n.length-1&&(e.getReceivablesAPI(e.item_booking.id),e.is_edit_booking=!1,e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Update Successfully"}),e.cancelEditBooking(),e.getListBooking())})).catch((function(t){t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))})),0==n.length&&(e.getReceivablesAPI(e.item_booking.id),e.is_edit_booking=!1,e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Update Successfully"}),e.cancelEditBooking(),e.getListBooking())},editMoneyReceive:function(){var e=this,t=(localStorage.getItem("user_token_fisheye_client"),e.index_money_receive_current);e.$set(e.list_money_receive_temp[t],"amount",e.obj_money_receive_temp.amount),e.$set(e.list_money_receive_temp[t],"type",e.obj_money_receive_temp.type),e.$set(e.list_money_receive_temp[t],"classify",e.obj_money_receive_temp.classify),e.$set(e.list_money_receive_temp[t],"paymentType",e.obj_money_receive_temp.paymentType),e.$set(e.list_money_receive_temp[t],"fee",e.obj_money_receive_temp.fee),e.$set(e.list_money_receive_temp[t],"notes",e.obj_money_receive_temp.notes),e.is_edit_money_receive=!1,e.open_modal_add_money_receive=!1,e.$forceUpdate()},editRefund:function(){if(this.checkValidateRefund()){var e=this,t=(localStorage.getItem("user_token_fisheye_client"),e.index_refund_current);e.$set(e.list_refund_temp[t],"amount",e.obj_refund_temp.amount),e.$set(e.list_refund_temp[t],"paymentType",e.obj_refund_temp.paymentType),e.$set(e.list_refund_temp[t],"fee",e.obj_refund_temp.fee),e.$set(e.list_refund_temp[t],"notes",e.obj_refund_temp.notes),e.is_edit_refund=!1,e.open_modal_add_refund=!1,e.$forceUpdate()}},deleteMoneyReceive:function(e){var t=this;t.list_will_deleted_receivable.push(e);var i=t.list_money_receive_temp.indexOf(e);t.list_money_receive_temp.splice(i,1)},deleteRefund:function(e){var t=this;t.list_will_deleted_receivable.push(e);var i=t.list_refund_temp.indexOf(e);t.list_refund_temp.splice(i,1)},addMoneyReceive:function(){this.checkValidateMoneyReceive()&&(this.list_money_receive_temp.push(JSON.parse(JSON.stringify(this.obj_money_receive_temp))),this.open_modal_add_money_receive=!1)},addRefund:function(){this.checkValidateRefund()&&(this.list_refund_temp.push(JSON.parse(JSON.stringify(this.obj_refund_temp))),this.open_modal_add_refund=!1)},reCalculationGrossSales:function(){this.item_booking.grossSales=this.item_booking.surcharge+this.item_booking.commissionFee+this.item_booking.cancellationFee+this.item_booking.othersIncreaseFee+this.total_sales_new_booking},changeSurcharge:function(){this.reCalculationGrossSales()},changecommissionFee:function(){this.reCalculationGrossSales()},changeOtherIncreaseFee:function(){this.reCalculationGrossSales()},refreshTierAndPrice:function(e){""!=e.quantity&&void 0!=e.quantity&&"NaN"!=e.quantity||(e.quantity=0),""!=e.price&&void 0!=e.price&&"NaN"!=e.price||(e.price=0);var t=parseFloat(e.quantity)*parseFloat(e.price);e.sales=t},closeDialogChooseDuration:function(){this.is_open_dialog_choose_duration=!1,this.$v.item_booking.duration.$model=this.temp_duration.days+" Days "+this.temp_duration.hours+" Hours "+this.temp_duration.minutes+" Minutes "},openDialogChooseDuration:function(){this.is_open_dialog_choose_duration=!0},changePickerTravelDateNewBooking:function(){var e=this,t=this.item_booking.travelDate.getDay();switch(t){case 0:e.item_booking.day_of_week="Sunday";break;case 1:e.item_booking.day_of_week="Monday";break;case 2:e.item_booking.day_of_week="Tuesday";break;case 3:e.item_booking.day_of_week="Wednesday";break;case 4:e.item_booking.day_of_week="Thursday";break;case 5:e.item_booking.day_of_week="Friday";break;case 6:e.item_booking.day_of_week="Saturday";break}e.$forceUpdate()},getDateOfWeek:function(e){var t=new Date(e),i=t.getDay(),o="";switch(i){case 0:o="Sunday";break;case 1:o="Monday";break;case 2:o="Tuesday";break;case 3:o="Wednesday";break;case 4:o="Thursday";break;case 5:o="Friday";break;case 6:o="Saturday";break}return o},initDataStartTime:function(){var e=this,t=[];if(e.option_start_time=[],e.data_product_temp.priceOptions){e.data_product_temp.priceOptions.forEach((function(e){e.prices.forEach((function(e){e.timeApply.forEach((function(e){var i={label:e,value:e},o=t.filter((function(t){return t.value==e}));0==o.length&&t.push(i)}))}))}));var i=t.sort((function(e,t){var i=e.value,o=t.value;return i<o?-1:i>o?1:0}));e.option_start_time=i}},initQuantityAndPrice:function(){var e=this;e.tier_and_price.forEach((function(e){e.active=!1})),e.is_view_booking?e.data_product_temp.ageGroup.ageTiers.forEach((function(t){"Senior"==t.name&&t.isActive&&(e.tier_and_price[4].active=!0,e.tier_and_price[4].price=e.item_booking.seniorPrice,e.tier_and_price[4].quantity=e.item_booking.seniorNumber,e.tier_and_price[4].sales=e.item_booking.seniorNumber*e.item_booking.seniorPrice,e.tier_and_price[4].name="Senior (aged "+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Adult"==t.name&&t.isActive&&(e.tier_and_price[0].active=!0,e.tier_and_price[0].price=e.item_booking.adultPrice,e.tier_and_price[0].quantity=e.item_booking.adultNumber,e.tier_and_price[0].sales=e.item_booking.adultNumber*e.item_booking.adultPrice,e.tier_and_price[0].name="Adult (aged "+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Child"==t.name&&t.isActive&&(e.tier_and_price[1].active=!0,e.tier_and_price[1].price=e.item_booking.childPrice,e.tier_and_price[1].quantity=e.item_booking.childNumber,e.tier_and_price[1].sales=e.item_booking.childNumber*e.item_booking.childPrice,e.tier_and_price[1].name="Child (aged "+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Infant"==t.name&&t.isActive&&(e.tier_and_price[2].active=!0,e.tier_and_price[2].price=e.item_booking.infantPrice,e.tier_and_price[2].quantity=e.item_booking.infantNumber,e.tier_and_price[2].sales=e.item_booking.infantNumber*e.item_booking.infantPrice,e.tier_and_price[2].name="Infant (aged "+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Youth"==t.name&&t.isActive&&(e.tier_and_price[3].active=!0,e.tier_and_price[3].price=e.item_booking.youthPrice,e.tier_and_price[3].quantity=e.item_booking.youthNumber,e.tier_and_price[3].sales=e.item_booking.youthNumber*e.item_booking.youthPrice,e.tier_and_price[3].name="Youth (aged "+t.minAge.toString()+" - "+t.maxAge.toString()+")")})):e.data_product_temp.ageGroup.ageTiers.forEach((function(t){"Senior"==t.name&&t.isActive&&(e.tier_and_price[4].active=!0,e.tier_and_price[4].price=0,e.tier_and_price[4].quantity=0,e.tier_and_price[4].sales=0,e.tier_and_price[4].name="Senior (aged "+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Adult"==t.name&&t.isActive&&(e.tier_and_price[0].active=!0,e.tier_and_price[0].price=0,e.tier_and_price[0].quantity=0,e.tier_and_price[0].sales=0,e.tier_and_price[0].name="Adult (aged "+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Child"==t.name&&t.isActive&&(e.tier_and_price[1].active=!0,e.tier_and_price[1].price=0,e.tier_and_price[1].quantity=0,e.tier_and_price[1].sales=0,e.tier_and_price[1].name="Child (aged "+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Infant"==t.name&&t.isActive&&(e.tier_and_price[2].active=!0,e.tier_and_price[2].price=0,e.tier_and_price[2].quantity=0,e.tier_and_price[2].sales=0,e.tier_and_price[2].name="Infant (aged "+t.minAge.toString()+" - "+t.maxAge.toString()+")"),"Youth"==t.name&&t.isActive&&(e.tier_and_price[3].active=!0,e.tier_and_price[3].price=0,e.tier_and_price[3].quantity=0,e.tier_and_price[3].sales=0,e.tier_and_price[3].name="Youth (aged "+t.minAge.toString()+" - "+t.maxAge.toString()+")")})),e.$forceUpdate()},changeSelectBookerNewBooking:function(e){var t=this;null!=e?t.options_bookers.forEach((function(i){i.id==e&&(t.item_booking.bookerEmail=i.email,t.item_booking.bookerClient=i.client.name,t.item_booking.bookerSaleChannel=i.salesChannel)})):(t.item_booking.bookerEmail="Online Website",t.item_booking.bookerClient="Online Website",t.item_booking.bookerSaleChannel="Online Website"),t.$forceUpdate()},changeSelectProductNewBooking:function(e){var t=this;t.list_product.forEach((function(i){i.id==e&&(t.item_booking.productCode=i.referenceCode,t.item_booking.productName=i.title)}));var i=localStorage.getItem("user_token_fisheye_client");t.$axios.get("/api/Products/GetProductDetail/"+e,{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(e){t.data_product_temp=e.data,t.initDataStartTime(),t.initQuantityAndPrice()})).catch((function(e){e.response.data?t.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:e.response.data}):t.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))},triggerOpenModalAddMoneyReceive:function(){this.obj_money_receive_temp={created:null,lastModified:null,amount:0,paymentType:0,classify:0,fee:"",notes:""},this.open_modal_add_money_receive=!0},triggerOpenModalAddRefund:function(){this.obj_refund_temp={created:null,lastModified:null,amount:0,paymentType:0,fee:"",notes:""},this.open_modal_add_refund=!0},openDialogAddBooking:function(){var e=this;e.$v.item_booking.$reset(),this.is_view_booking=!1,this.is_edit_booking=!1,this.list_money_receive_temp=[],this.list_refund_temp=[],this.tab_add_new_booking="booking",this.item_booking={bookingNumber:"",productId:"",productCode:"",productName:"",travelDate:"",groupBooking:"",startTime:"",endTime:"",bookerId:"",bookerName:"",bookerEmail:"",bookerSaleChannel:"",bookerClient:"",duration:"",tourType:"",transportation:"",guestQuantity:0,adultNumber:0,infantNumber:0,youthNumber:0,childNumber:0,seniorNumber:0,adultPrice:0,childPrice:0,infantPrice:0,youthPrice:0,seniorPrice:0,leadTravelerFirstName:"",leadTravelerLastName:"",leadTravelerLastPhone:"",leadTravelerLastEmail:"",leadTravelerGender:"",otherTravelerNames:[],nationality:"",passportNumber:"",bookingDate:"",foodNotes:"",otherNotes:"",pickupOrder:"",pickupTimeFrom:"",pickupTimeTo:"",hotelName:"",hotelAddress:"",sales:0,otherSales:0,surcharge:0,commissionFee:0,othersIncreaseFee:0,grossSales:0,saleDeduction:0,discount:0,couponCode:"",couponValue:"",otherDecreaseFee:0,netSales:0,taxRate:0,taxAmount:0,netSalesBeforeTax:0,depositRequested:0,depositReceived:0,remainingAmount:0,paymentReceived:0,refundToGuests:0,balance:0,emailSent:!0,invoiceSent:!0,reminderText:"",status:-1,cancellationFee:0,cancellationSales:0,receivables:0},this.open_modal_add_booking=!0},openModalViewBooking:function(e){if(this.$forceUpdate(),this.$v.item_booking.$reset(),this.is_read_tab_1||this.is_read_tab_2||this.is_read_tab_3||this.is_read_tab_4){this.is_read_tab_1?this.tab_add_new_booking="booking":this.is_read_tab_2?this.tab_add_new_booking="traveler":this.is_read_tab_3?this.tab_add_new_booking="revenue":this.is_read_tab_4&&(this.tab_add_new_booking="receivables"),this.is_view_booking=!0;var t=JSON.parse(JSON.stringify(e));null==t.cancellationFee&&(t.cancellationFee=0),isNaN(t.transportation)||null==t.transportation||""==t.transportation?t.transportation=null:t.transportation=parseInt(t.transportation),t.booker?t.bookerId=t.booker.id:(t.bookerId=null,t.bookerEmail="Online website",t.bookerSaleChannel="Online website",t.bookerClient="Online website"),this.getReceivablesAPI(t.id),this.$set(this,"item_booking",t),this.changeSelectProductNewBooking(t.productId),this.open_modal_add_booking=!0,this.$forceUpdate()}},getReceivablesAPI:function(e){var t=this,i=localStorage.getItem("user_token_fisheye_client");t.$axios.get("/api/Orders/GetReceivables?orderId="+e+"&Type=0",{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(e){t.list_money_receive_temp=e.data.receivables})).catch((function(e){Object(g["a"])(e.response,t)})),t.$axios.get("/api/Orders/GetReceivables?orderId="+e+"&Type=1",{headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then((function(e){t.list_refund_temp=e.data.receivables})).catch((function(e){Object(g["a"])(e.response,t)}))},deleteBooking:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");this.$q.dialog({title:"Confirm",message:"Would you like to DELETE this booking! You will not revert data if you deleted, Are you sure?",cancel:!0,persistent:!0}).onOk((function(){e.$axios.delete("/api/Orders/Delete/"+e.item_booking.id,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.open_modal_add_booking=!1,e.$q.notify({color:"secondary",position:"top-right",icon:"tag_faces",message:"Delete booking Successfully"}),e.getListBooking()})).catch((function(t){e.loading.loading_product=!1,t.response.data?e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:t.response.data}):e.$q.notify({color:"negative",icon:"report_problem",position:"top-right",message:"Have Error"})}))})).onCancel((function(){})).onDismiss((function(){}))},getListProduct:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");-1!=this.current_branch_id&&(e.loading.loading_product=!0,this.$axios.get("/api/Products/GetProductList?BranchId="+e.current_branch_id+"&Status=1&PageSize=1000",{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.list_product=t.data.products,e.loading.loading_product=!1})).catch((function(t){e.loading.loading_product=!1,Object(g["a"])(t.response,e)})))},getListMainTransportation:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");-1!=this.current_branch_id&&this.$axios.get("/api/MasterLists/Get?BranchId="+e.current_branch_id+"&ListName=maintransportation",{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.options_main_transportation=t.data.masterLists,e.options_main_transportation_filter=JSON.parse(JSON.stringify(t.data.masterLists)),e.options_main_transportation_filter.unshift({id:-1,plateNumber:"Not selected"})})).catch((function(t){Object(g["a"])(t.response,e)}))},getListBooker:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");-1!=this.current_branch_id&&(e.loading.loading_list_booker=!0,this.$axios.get("/api/MasterLists/GetBookers?BranchId="+e.current_branch_id,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.options_bookers=JSON.parse(JSON.stringify(t.data.bookerLists)),e.options_bookers.push({id:null,name:"Online Website"}),e.options_bookers_filter=JSON.parse(JSON.stringify(t.data.bookerLists)),e.options_bookers_filter.unshift({id:-1,name:"Not selected"}),e.options_bookers_filter.push({id:"null",name:"Online website"}),e.loading.loading_list_booker=!1})).catch((function(t){e.loading.loading_list_booker=!1,Object(g["a"])(t.response,e)})))},formatListBooking:function(e){var t=this,i=[];return i=e,i.forEach((function(e,i){e.stt=i+1,e.disable_selected=!1,e.check_select=!1,e.is_grouped=!1,""!=e.groupBooking&&null!=e.groupBooking&&(e.is_grouped=!0),e.aliasName=e.product.referenceCode+"-"+e.transportation+"-"+e.guestQuantity,e.product?(e.productCode=e.product.referenceCode,e.productTitle=e.product.title):(e.productCode="",e.productTitle=""),e.dayOfWeek=t.getDateOfWeek(e.travelDate),e.booker?(e.bookerName=e.booker.name,e.bookerEmail=e.booker.email,e.booker.client?e.bookerClient=e.booker.client.name:e.bookerClient="",e.bookerSaleChannel=e.booker.salesChannel):(e.bookerName="Online website",e.bookerEmail="Online website",e.bookerClient="Online website",e.bookerSaleChannel="Online website"),e.otherTravelerNames&&e.otherTravelerNames.length>0?e.otherTravelerNamesText=e.otherTravelerNames.join(", "):e.otherTravelerNamesText=""})),i},getListBooking:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i=e.$route.params.booking_id;i&&!isNaN(i)&&(e.loading.loading_list_booking=!0,this.$axios.get("/api/Orders/GetDetail?orderId="+i,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){var i=[t.data],o=e.formatListBooking(i);e.list_booking=o,e.getInfoTotalRow(),e.loading.loading_list_booking=!1,e.doClickToViewDetailbooking()})).catch((function(t){e.loading.loading_list_booking=!1,Object(g["a"])(t.response,e)})))},doClickToViewDetailbooking:function(){this.openModalViewBooking(this.list_booking[0])},getInfoTotalRow:function(){var e=this,t=this.pagination.page,i=(this.pagination.rowsPerPage,10*(t-1)),o=e.list_booking.slice(i,10),a={guest_quantity:0,adult_number:0,child_number:0,infant_number:0,youth_number:0,senior_number:0,adult_price:0,child_price:0,infant_price:0,youth_price:0,senior_price:0,sales:0,other_sales:0,surcharge:0,commission:0,cancellation_fee:0,other_revenue:0,gross_sales:0,sales_deduction:0,discount:0,coupon_value:0,cancellation_sales:0,other_deduction:0,net_sales:0,tax_amount:0,net_sale_before_tax:0,deposit_request:0,deposit_receive:0,remaining_amount:0,payment_receive:0,refund_to_guess:0,balance:0};o.forEach((function(e){a.guest_quantity+=e.guestQuantity,a.adult_number+=e.adultNumber,a.child_number+=e.childNumber,a.infant_number+=e.infantNumber,a.youth_number+=e.youthNumber,a.senior_number+=e.seniorNumber,a.adult_price+=e.adultPrice,a.child_price+=e.childPrice,a.infant_price+=e.infantPrice,a.youth_price+=e.youthPrice,a.senior_price+=e.seniorPrice,a.sales+=e.sales,a.other_sales+=e.otherSales,a.surcharge+=e.surcharge,a.commission+=e.commissionFee,a.cancellation_fee+=e.cancellationFee,a.other_revenue+=e.othersIncreaseFee,a.gross_sales+=e.grossSales,a.sales_deduction+=e.saleDeduction,a.discount+=e.discount,a.coupon_value+=e.couponValue,a.cancellation_sales+=e.cancellationSales,a.other_deduction+=e.otherDecreaseFee,a.net_sales+=e.netSales,a.tax_amount+=e.taxAmount,a.net_sale_before_tax+=e.netSalesBeforeTax,a.deposit_request+=e.depositRequested,a.deposit_receive+=e.depositReceived,a.remaining_amount+=e.remainingAmount,a.payment_receive+=e.paymentReceived,a.refund_to_guess+=e.refundToGuests,a.balance+=e.balance})),this.data_total_row=a},getListEmailTemplate:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client");-1!=this.current_branch_id&&this.$axios.get("/api/EmailTemplates/Get?BranchId="+e.current_branch_id+"&PageSize=1000",{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.list_email_template=t.data.emailTemplates})).catch((function(t){Object(g["a"])(t.response,e)}))},getListTourType:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i=this.current_branch_id;-1!=i&&e.$axios.get("/api/MasterLists/Get?PageSize=1000&BranchId="+i+"&ListName=tourtype",{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){var i=[];t.data.masterLists.forEach((function(e){var t={name:e.namePIC,value:e.namePIC};i.push(t)})),e.option_tour_type=i,e.option_tour_type_filter=JSON.parse(JSON.stringify(i)),e.option_tour_type_filter.unshift({name:"Not selected",value:-1})})).catch((function(t){Object(g["a"])(t.response,e)}))},getListHotel:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i=this.current_branch_id;-1!=i&&e.$axios.get("/api/MasterLists/Get?PageSize=1000&BranchId="+i+"&ListName=hotel",{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.list_hotel=t.data.masterLists;var i=[];t.data.masterLists.forEach((function(e){var t={name:e.placeName,value:e.placeName};i.push(t)})),e.options_hotel=i})).catch((function(t){Object(g["a"])(t.response,e)}))},getListClient:function(){var e=this,t=localStorage.getItem("user_token_fisheye_client"),i=this.current_branch_id;-1!=i&&e.$axios.get("/api/MasterLists/GetClients?PageSize=1000&BranchId="+i,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((function(t){e.list_bookers_client_filter=t.data.clientLists,e.list_bookers_client_filter.unshift({id:-1,name:"Not selected"})})).catch((function(t){Object(g["a"])(t.response,e)}))}},components:{"view-invoice-booking":k["a"],"picker-filter":u.a},mounted:function(){var e=this.$route.params.booking_id;e&&!isNaN(e)&&(this.getListTourType(),this.getListHotel(),this.getListEmailTemplate(),this.getListClient(),this.getListBooking(),this.getListProduct(),this.getListMainTransportation(),this.getListBooker())}},$=C,x=(i("cfdf"),i("2877")),w=i("fe09"),T=Object(x["a"])($,n,s,!1,null,null,null),N=T.exports;T.options.components=Object.assign({QTabs:w["J"],QTab:w["F"],QSeparator:w["C"],QTabPanels:w["H"],QTabPanel:w["G"],QBtn:w["c"],QSpace:w["D"],QInput:w["p"],QIcon:w["n"],QPopupProxy:w["B"],QTime:w["M"],QDialog:w["k"],QCard:w["e"],QCardActions:w["f"]},T.options.components||{}),T.options.directives=Object.assign({ClosePopup:w["a"]},T.options.directives||{});var q={name:"list-booking-page",filters:{},data:function(){return{}},methods:{deleteClient:function(){this.$q.dialog({title:"Confirm",message:"Would you like to DELETE this client! You will not revert data if you deleted, Are you sure?",cancel:!0,persistent:!0}).onOk((function(){})).onCancel((function(){})).onDismiss((function(){}))},blockClient:function(){this.$q.dialog({title:"Confirm",message:"Would you like to BLOCK this client! Are you sure?",cancel:!0,persistent:!0}).onOk((function(){})).onCancel((function(){})).onDismiss((function(){}))},openDialogEditClient:function(){var e=this;e.is_edit_client=!0,e.client_temp=e.selected[0],e.open_modal_add=!0},openDialogAddClient:function(){var e=this;e.is_edit_client=!1,e.client_temp={ownerName:"",email:"",phone:"",status:!0,date_created:"10/10/2020 20:59",company_name:"",company_website:"",company_telephone:"",company_address:"",user_number:0,branch_number:0},e.open_modal_add=!0},onSubmit:function(){var e=this,t=this;this.$refs.formCreateClient.validate().then((function(i){i?(e.$q.notify({color:"primary",position:"top-right",icon:"tag_faces",message:"Add client successfully"}),t.client_temp.id=t.data.length+1,t.data.push(t.client_temp),t.open_modal_add=!1,t.client_temp={ownerName:"",email:"",phone:"",status:!0,date_created:"10/10/2020 20:59",company_name:"",company_website:"",company_telephone:"",company_address:"",user_number:0,branch_number:0}):e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:"You need to check your input"})}))},editClient:function(){var e=this,t=this;this.$refs.formCreateClient.validate().then((function(i){i?(e.$q.notify({color:"primary",position:"top-right",icon:"tag_faces",message:"Add client successfully"}),t.client_temp.id=t.data.length+1,t.data.push(t.client_temp),t.open_modal_add=!1,t.client_temp={ownerName:"",email:"",phone:"",status:!0,date_created:"10/10/2020 20:59",company_name:"",company_website:"",company_telephone:"",company_address:"",user_number:0,branch_number:0}):e.$q.notify({color:"red-5",textColor:"white",position:"top-right",icon:"warning",message:"You need to check your input"})}))},onReset:function(){this.name=null,this.age=null,this.accept=!1}},components:{"view-detail-bookings-desktop":N}},S=q,O=(i("67cd"),Object(x["a"])(S,o,a,!1,null,null,null));t["default"]=O.exports;O.options.components=Object.assign({QPage:w["y"],QHeader:w["m"]},O.options.components||{})},"67cd":function(e,t,i){"use strict";var o=i("d659"),a=i.n(o);a.a},cfdf:function(e,t,i){"use strict";var o=i("d8a7"),a=i.n(o);a.a},d659:function(e,t,i){},d8a7:function(e,t,i){}}]);